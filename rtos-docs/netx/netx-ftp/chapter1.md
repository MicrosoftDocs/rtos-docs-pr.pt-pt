---
title: Capítulo 1 - Introdução ao Azure RTOS NetX FTP
description: O Protocolo de Transferência de Ficheiros (FTP) é um protocolo concebido para transferências de ficheiros. A FTP utiliza serviços fiáveis de Protocolo de Controlo de Transmissão (TCP) para executar a sua função de transferência de ficheiros.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 86e132daf96f9039631234f10c8e239b61ad5126
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826732"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-ftp"></a><span data-ttu-id="95abd-104">Capítulo 1 - Introdução ao Azure RTOS NetX FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-104">Chapter 1 - Introduction to Azure RTOS NetX FTP</span></span>

<span data-ttu-id="95abd-105">O Protocolo de Transferência de Ficheiros (FTP) é um protocolo concebido para transferências de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="95abd-105">The File Transfer Protocol (FTP) is a protocol designed for file transfers.</span></span> <span data-ttu-id="95abd-106">A FTP utiliza serviços fiáveis de Protocolo de Controlo de Transmissão (TCP) para executar a sua função de transferência de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="95abd-106">FTP utilizes reliable Transmission Control Protocol (TCP) services to perform its file transfer function.</span></span> <span data-ttu-id="95abd-107">Por causa disso, a FTP é um protocolo de transferência de ficheiros altamente fiável.</span><span class="sxs-lookup"><span data-stu-id="95abd-107">Because of this, FTP is a highly reliable file transfer protocol.</span></span> <span data-ttu-id="95abd-108">FTP também é de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="95abd-108">FTP is also high-performance.</span></span> <span data-ttu-id="95abd-109">A transferência de ficheiros FTP real é realizada numa ligação FTP dedicada.</span><span class="sxs-lookup"><span data-stu-id="95abd-109">The actual FTP file transfer is performed on a dedicated FTP connection.</span></span>

## <a name="ftp-requirements"></a><span data-ttu-id="95abd-110">Requisitos FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-110">FTP Requirements</span></span>

<span data-ttu-id="95abd-111">Para funcionar corretamente, o pacote Azure RTOS NetX FTP requer que já tenha sido criada uma instância IP NetX.</span><span class="sxs-lookup"><span data-stu-id="95abd-111">In order to function properly, the Azure RTOS NetX FTP package requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="95abd-112">Além disso, a TCP deve ser ativada nessa mesma instância de PI.</span><span class="sxs-lookup"><span data-stu-id="95abd-112">In addition, TCP must be enabled on that same IP instance.</span></span> <span data-ttu-id="95abd-113">A parte do cliente FTP do pacote NetX FTP não tem requisitos adicionais.</span><span class="sxs-lookup"><span data-stu-id="95abd-113">The FTP Client portion of the NetX FTP package has no further requirements.</span></span>

<span data-ttu-id="95abd-114">A parte ftp server do pacote NetX FTP tem vários requisitos adicionais.</span><span class="sxs-lookup"><span data-stu-id="95abd-114">The FTP Server portion of the NetX FTP package has several additional requirements.</span></span> <span data-ttu-id="95abd-115">Em primeiro lugar, requer acesso completo à *conhecida porta 21* da TCP para lidar com todos os pedidos de comando ftp do Cliente e *porta 20 bem conhecida* para lidar com todas as transferências de dados FTP do Cliente.</span><span class="sxs-lookup"><span data-stu-id="95abd-115">First, it requires complete access to TCP *well-known port 21* for handling all Client FTP command requests and *well-known port 20* for handling all Client FTP data transfers.</span></span> <span data-ttu-id="95abd-116">O FtP Server também foi concebido para ser utilizado com o sistema de ficheiros incorporado FileX.</span><span class="sxs-lookup"><span data-stu-id="95abd-116">The FTP Server is also designed for use with the FileX embedded file system.</span></span> <span data-ttu-id="95abd-117">Se o FileX não estiver disponível, o utilizador pode apresentar as porções do FileX utilizadas para o seu próprio ambiente.</span><span class="sxs-lookup"><span data-stu-id="95abd-117">If FileX is not available, the user may port the portions of FileX used to their own environment.</span></span> <span data-ttu-id="95abd-118">Isto é discutido em secções posteriores deste guia.</span><span class="sxs-lookup"><span data-stu-id="95abd-118">This is discussed in later sections of this guide.</span></span>

## <a name="ftp-constraints"></a><span data-ttu-id="95abd-119">Restrições FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-119">FTP Constraints</span></span>

<span data-ttu-id="95abd-120">A norma FTP tem muitas opções no que diz respeito à representação de dados de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="95abd-120">The FTP standard has many options regarding the representation of file data.</span></span> <span data-ttu-id="95abd-121">À semelhança das implementações da Unix, a NetX FTP assume as seguintes restrições ao formato de ficheiro:</span><span class="sxs-lookup"><span data-stu-id="95abd-121">Similar to Unix implementations, NetX FTP assumes the following file format constraints:</span></span>

- <span data-ttu-id="95abd-122">Tipo de ficheiro: **Binário**</span><span class="sxs-lookup"><span data-stu-id="95abd-122">File Type: **Binary**</span></span>
- <span data-ttu-id="95abd-123">Formato de ficheiro: **Apenas impressão**</span><span class="sxs-lookup"><span data-stu-id="95abd-123">File Format: **Nonprint Only**</span></span>
- <span data-ttu-id="95abd-124">Estrutura de arquivo: **Apenas estrutura de arquivo**</span><span class="sxs-lookup"><span data-stu-id="95abd-124">File Structure: **File Structure Only**</span></span>
- <span data-ttu-id="95abd-125">Modo de transmissão: **Apenas modo de fluxo**</span><span class="sxs-lookup"><span data-stu-id="95abd-125">Transmission Mode: **Stream Mode Only**</span></span>

## <a name="ftp-file-names"></a><span data-ttu-id="95abd-126">Nomes de ficheiros FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-126">FTP File Names</span></span>

<span data-ttu-id="95abd-127">Os nomes dos ficheiros FTP devem estar no formato do sistema de ficheiros-alvo (normalmente FileX).</span><span class="sxs-lookup"><span data-stu-id="95abd-127">FTP file names should be in the format of the target file system (usually FileX).</span></span> <span data-ttu-id="95abd-128">Devem ser nulas terminadas as cordas ASCII, com informações completas sobre o percurso, se necessário.</span><span class="sxs-lookup"><span data-stu-id="95abd-128">They should be NULL terminated ASCII strings, with full path information if necessary.</span></span> <span data-ttu-id="95abd-129">Não existe um limite especificado para o tamanho dos nomes de ficheiros FTP na implementação do NetX FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-129">There is no specified limit for the size of FTP file names in the NetX FTP implementation.</span></span> <span data-ttu-id="95abd-130">No entanto, o tamanho da carga útil da piscina deve ser capaz de acomodar o caminho máximo e/ou nome do ficheiro.</span><span class="sxs-lookup"><span data-stu-id="95abd-130">However, the packet pool payload size should be able to accommodate the maximum path and/or file name.</span></span>

## <a name="ftp-client-commands"></a><span data-ttu-id="95abd-131">Comandos de clientes FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-131">FTP Client Commands</span></span>

<span data-ttu-id="95abd-132">O FTP tem um mecanismo simples para abrir ligações e realizar operações de arquivo e diretório.</span><span class="sxs-lookup"><span data-stu-id="95abd-132">The FTP has a simple mechanism for opening connections and performing file and directory operations.</span></span> <span data-ttu-id="95abd-133">Existe basicamente um conjunto de comandos FTP padrão que são emitidos pelo Cliente depois de uma ligação ter sido estabelecida com sucesso na *porta 21 bem conhecida* da TCP .</span><span class="sxs-lookup"><span data-stu-id="95abd-133">There is basically a set of standard FTP commands that are issued by the Client after a connection has been successfully established on the TCP *well-known port 21*.</span></span> <span data-ttu-id="95abd-134">O seguinte mostra alguns dos comandos FTP básicos:</span><span class="sxs-lookup"><span data-stu-id="95abd-134">The following shows some of the basic FTP commands:</span></span>

### <a name="ftp-command-and-meaning"></a><span data-ttu-id="95abd-135">Comando FTP e Significado</span><span class="sxs-lookup"><span data-stu-id="95abd-135">FTP Command and Meaning</span></span>

- <span data-ttu-id="95abd-136">**Caminho CWD**: *Alterar diretório de trabalho*</span><span class="sxs-lookup"><span data-stu-id="95abd-136">**CWD path**: *Change working directory*</span></span>
- <span data-ttu-id="95abd-137">**Nome de ficheiro DELE**: *Eliminar nome de ficheiro especificado*</span><span class="sxs-lookup"><span data-stu-id="95abd-137">**DELE filename**: *Delete specified file name*</span></span>
- <span data-ttu-id="95abd-138">**Lista de anúncios**: *Obtenha listagem de diretório*</span><span class="sxs-lookup"><span data-stu-id="95abd-138">**LIST directory**: *Get directory listing*</span></span>
- <span data-ttu-id="95abd-139">**Diretório MKD**: *Faça novo diretório*</span><span class="sxs-lookup"><span data-stu-id="95abd-139">**MKD directory**: *Make new directory*</span></span>
- <span data-ttu-id="95abd-140">**Diretório NLST**: *Obter listagem de diretório*</span><span class="sxs-lookup"><span data-stu-id="95abd-140">**NLST directory**: *Get directory listing*</span></span>
- <span data-ttu-id="95abd-141">**NOOP**: *Sem operação, retorna o sucesso*</span><span class="sxs-lookup"><span data-stu-id="95abd-141">**NOOP**: *No operation, returns success*</span></span>
- <span data-ttu-id="95abd-142">**Passe palavra-passe**: *Forneça senha para iniciar sessão*</span><span class="sxs-lookup"><span data-stu-id="95abd-142">**PASS password**: *Provide password for login*</span></span>
- <span data-ttu-id="95abd-143">**PASV**: *Solicite o modo de transferência passiva*</span><span class="sxs-lookup"><span data-stu-id="95abd-143">**PASV**: *Request passive transfer mode*</span></span>
- <span data-ttu-id="95abd-144">**Percurso DO PWD**: *Caminho atual do diretório de recolha*</span><span class="sxs-lookup"><span data-stu-id="95abd-144">**PWD path**: *Pickup current directory path*</span></span>
- <span data-ttu-id="95abd-145">**QUIT**: *Terminar a ligação com o Cliente*</span><span class="sxs-lookup"><span data-stu-id="95abd-145">**QUIT**: *Terminate Client connection*</span></span>
- <span data-ttu-id="95abd-146">**NOME DE ARQUIVO RETR**: *Ler ficheiro especificado*</span><span class="sxs-lookup"><span data-stu-id="95abd-146">**RETR filename**: *Read specified file*</span></span>
- <span data-ttu-id="95abd-147">**Diretório RMD**: *Eliminar diretório especificado*</span><span class="sxs-lookup"><span data-stu-id="95abd-147">**RMD directory**: *Delete specified directory*</span></span>
- <span data-ttu-id="95abd-148">**RNFR oldfilename**: *Especifique o ficheiro para renomear*</span><span class="sxs-lookup"><span data-stu-id="95abd-148">**RNFR oldfilename**: *Specify file to rename*</span></span>
- <span data-ttu-id="95abd-149">**RNTO newfilename**: *Rebatize o ficheiro para o nome do ficheiro fornecido*</span><span class="sxs-lookup"><span data-stu-id="95abd-149">**RNTO newfilename**: *Rename file to supplied file name*</span></span>
- <span data-ttu-id="95abd-150">**Nome de ficheiro STOR**: *Escreva ficheiro especificado*</span><span class="sxs-lookup"><span data-stu-id="95abd-150">**STOR filename**: *Write specified file*</span></span>
- <span data-ttu-id="95abd-151">**TIPO I**: *Selecione a imagem de ficheiro binário*</span><span class="sxs-lookup"><span data-stu-id="95abd-151">**TYPE I**: *Select binary file image*</span></span>
- <span data-ttu-id="95abd-152">**Nome de utilizador user:** *Forneça o nome de utilizador para iniciar sessão*</span><span class="sxs-lookup"><span data-stu-id="95abd-152">**USER username**: *Provide username for login*</span></span>
- <span data-ttu-id="95abd-153">**PORT ip_address,porta**: *Fornecer endereço IP e porta de dados do Cliente*</span><span class="sxs-lookup"><span data-stu-id="95abd-153">**PORT ip_address,port**: *Provide IP address and Client data port*</span></span>

<span data-ttu-id="95abd-154">Estes comandos ASCII são utilizados internamente pelo software Do Cliente NetX FTP para executar operações FTP com o FtP Server.</span><span class="sxs-lookup"><span data-stu-id="95abd-154">These ASCII commands are used internally by the NetX FTP Client software to perform FTP operations with the FTP Server.</span></span>

## <a name="ftp-server-responses"></a><span data-ttu-id="95abd-155">Respostas do servidor FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-155">FTP Server Responses</span></span>

<span data-ttu-id="95abd-156">O FTP Server utiliza a *conhecida porta TCP 21* para fazer os pedidos de comando do Cliente.</span><span class="sxs-lookup"><span data-stu-id="95abd-156">The FTP Server utilizes the *well-known TCP port 21* to field Client command requests.</span></span> <span data-ttu-id="95abd-157">Uma vez que o Servidor FTP processa o comando do Cliente, devolve uma resposta numérica de 3 dígitos no ASCII seguida de uma cadeia ASCII opcional.</span><span class="sxs-lookup"><span data-stu-id="95abd-157">Once the FTP Server processes the Client command, it returns a 3-digit numeric response in ASCII followed by an optional ASCII string.</span></span> <span data-ttu-id="95abd-158">A resposta numérica é utilizada pelo software FTP Client para determinar se a operação foi bem sucedida ou falhou.</span><span class="sxs-lookup"><span data-stu-id="95abd-158">The numeric response is used by the FTP Client software to determine whether the operation succeeded or failed.</span></span> <span data-ttu-id="95abd-159">As seguintes listas são várias as respostas do Servidor FTP aos comandos do Cliente:</span><span class="sxs-lookup"><span data-stu-id="95abd-159">The following lists various FTP Server responses to Client commands:</span></span>

### <a name="first-numeric-field-and-meaning"></a><span data-ttu-id="95abd-160">Primeiro Campo Numérico e Significado</span><span class="sxs-lookup"><span data-stu-id="95abd-160">First Numeric Field and Meaning</span></span>

- <span data-ttu-id="95abd-161">**1xx**: *Estatuto preliminar positivo – outra resposta a chegar*.</span><span class="sxs-lookup"><span data-stu-id="95abd-161">**1xx**: *Positive preliminary status – another reply coming*.</span></span>
- <span data-ttu-id="95abd-162">**2xx**: *Estado de conclusão positivo*.</span><span class="sxs-lookup"><span data-stu-id="95abd-162">**2xx**: *Positive completion status*.</span></span>
- <span data-ttu-id="95abd-163">**3xx**: *Estado preliminar positivo – deve ser enviado outro comando*.</span><span class="sxs-lookup"><span data-stu-id="95abd-163">**3xx**: *Positive preliminary status – another command must be sent*.</span></span>
- <span data-ttu-id="95abd-164">**4xx**: *Condição temporária de erro*.</span><span class="sxs-lookup"><span data-stu-id="95abd-164">**4xx**: *Temporary error condition*.</span></span>
- <span data-ttu-id="95abd-165">**5xx**: *Condição de erro.*</span><span class="sxs-lookup"><span data-stu-id="95abd-165">**5xx**: *Error condition.*</span></span>

### <a name="second-numeric-field-and-meaning"></a><span data-ttu-id="95abd-166">Segundo Campo Numérico e Significado</span><span class="sxs-lookup"><span data-stu-id="95abd-166">Second Numeric Field and Meaning</span></span>

- <span data-ttu-id="95abd-167">**x0x**: Erro de sintaxe no comando.</span><span class="sxs-lookup"><span data-stu-id="95abd-167">**x0x**: Syntax error in command.</span></span>
- <span data-ttu-id="95abd-168">**x1x**: Mensagem informativa.</span><span class="sxs-lookup"><span data-stu-id="95abd-168">**x1x**: Informational message.</span></span>
- <span data-ttu-id="95abd-169">**x2x**: Ligação relacionada.</span><span class="sxs-lookup"><span data-stu-id="95abd-169">**x2x**: Connection related.</span></span>
- <span data-ttu-id="95abd-170">**x3x**: Autenticação relacionada.</span><span class="sxs-lookup"><span data-stu-id="95abd-170">**x3x**: Authentication related.</span></span>
- <span data-ttu-id="95abd-171">**x4x**: Não especificado.</span><span class="sxs-lookup"><span data-stu-id="95abd-171">**x4x**: Unspecified.</span></span>
- <span data-ttu-id="95abd-172">**x5x**: Sistema de ficheiros relacionado.</span><span class="sxs-lookup"><span data-stu-id="95abd-172">**x5x**: File system related.</span></span>

<span data-ttu-id="95abd-173">Por exemplo, um pedido do Cliente para desligar uma ligação FTP com o comando QUIT será normalmente respondido com um código "221" do Servidor – se a desconexão for bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-173">For example, a Client request to disconnect an FTP connection with the QUIT command will typically be responded with a "221" code from the Server – if the disconnect is successful.</span></span>

## <a name="ftp-passive-transfer-mode"></a><span data-ttu-id="95abd-174">Modo de Transferência Passiva FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-174">FTP Passive Transfer Mode</span></span>

<span data-ttu-id="95abd-175">Por predefinição, o Cliente FTP NetX utiliza o modo de transporte ativo para trocar dados sobre a tomada de dados com o servidor FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-175">By default, the NetX FTP Client uses the active transport mode to exchange data over the data socket with the FTP server.</span></span> <span data-ttu-id="95abd-176">O problema com este arranjo é que requer que o Cliente FTP abra uma tomada de servidor TCP para que o Servidor FTP se conecte.</span><span class="sxs-lookup"><span data-stu-id="95abd-176">The problem with this arrangement is that it requires the FTP Client to open a TCP server socket for the FTP Server to connect to.</span></span> <span data-ttu-id="95abd-177">Isto representa um possível risco de segurança e pode ser bloqueado pela firewall do Cliente.</span><span class="sxs-lookup"><span data-stu-id="95abd-177">This represents a possible security risk and may be blocked by the Client firewall.</span></span> <span data-ttu-id="95abd-178">O modo de transferência passiva difere do modo de transporte ativo, fazendo com que o servidor FTP crie a tomada do servidor TCP na ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-178">Passive transfer mode differs from active transport mode by having the FTP server create the TCP server socket on the data connection.</span></span> <span data-ttu-id="95abd-179">Isto elimina o risco de segurança (para o Cliente FTP).</span><span class="sxs-lookup"><span data-stu-id="95abd-179">This eliminates the security risk (for the FTP Client).</span></span>

<span data-ttu-id="95abd-180">Para permitir a transferência passiva de dados, as chamadas de aplicação *nx_ftp_client_passive_mode_set* num Cliente FTP previamente criado com o segundo argumento definido para NX_TRUE.</span><span class="sxs-lookup"><span data-stu-id="95abd-180">To enable passive data transfer, the application calls *nx_ftp_client_passive_mode_set* on a previously created FTP Client with the second argument set to NX_TRUE.</span></span> <span data-ttu-id="95abd-181">Posteriormente, todos os serviços subsequentes do Cliente NetX FTP para transferência de dados (NLST, RETR, STOR) são tentados no modo de transporte passivo.</span><span class="sxs-lookup"><span data-stu-id="95abd-181">Thereafter, all subsequent NetX FTP Client services for transferring data (NLST, RETR, STOR) are attempted in the passive transport mode.</span></span>

<span data-ttu-id="95abd-182">O Cliente FTP envia primeiro o comando PASV (sem argumentos).</span><span class="sxs-lookup"><span data-stu-id="95abd-182">The FTP Client first sends the PASV command (no arguments).</span></span> <span data-ttu-id="95abd-183">Se o servidor FTP suportar este pedido, retornará a resposta "OK" 227.</span><span class="sxs-lookup"><span data-stu-id="95abd-183">If the FTP server supports this request it will return the 227 "OK" response.</span></span> <span data-ttu-id="95abd-184">Em seguida, o Cliente envia o pedido, por exemplo, RETR.</span><span class="sxs-lookup"><span data-stu-id="95abd-184">Then the Client sends the request e.g. RETR.</span></span> <span data-ttu-id="95abd-185">Se o servidor recusar o modo de transferência passiva, o serviço Cliente NetX FTP devolve um estado de erro.</span><span class="sxs-lookup"><span data-stu-id="95abd-185">If the server refuses passive transfer mode, the NetX FTP Client service returns an error status.</span></span>

<span data-ttu-id="95abd-186">Para desativar o modo de transporte passivo e voltar ao modo de transporte ativo, a aplicação chama *nx_ftp_client_passive_mode_set* com o segundo argumento definido para NX_FALSE.</span><span class="sxs-lookup"><span data-stu-id="95abd-186">To disable passive transport mode and return to active transport mode, the application calls *nx_ftp_client_passive_mode_set* with the second argument set to NX_FALSE.</span></span>

## <a name="ftp-communication"></a><span data-ttu-id="95abd-187">Comunicação FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-187">FTP Communication</span></span>

<span data-ttu-id="95abd-188">O FTP Server utiliza a *conhecida porta TCP 21* para fazer os pedidos do Cliente.</span><span class="sxs-lookup"><span data-stu-id="95abd-188">The FTP Server utilizes the *well-known TCP port 21* to field Client requests.</span></span> <span data-ttu-id="95abd-189">Os Clientes FTP podem utilizar qualquer porta TCP disponível.</span><span class="sxs-lookup"><span data-stu-id="95abd-189">FTP Clients may use any available TCP port.</span></span> <span data-ttu-id="95abd-190">A sequência geral dos eventos FTP é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="95abd-190">The general sequence of FTP events is as follows:</span></span>

### <a name="ftp-read-file-requests"></a><span data-ttu-id="95abd-191">Pedidos de arquivo de leitura FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-191">FTP Read File Requests</span></span>

1. <span data-ttu-id="95abd-192">O cliente emite ligação TCP à porta do Servidor 21.</span><span class="sxs-lookup"><span data-stu-id="95abd-192">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="95abd-193">O servidor envia resposta "220" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-193">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="95abd-194">O cliente envia mensagem "USER" com "username".</span><span class="sxs-lookup"><span data-stu-id="95abd-194">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="95abd-195">O servidor envia resposta "331" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-195">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="95abd-196">O cliente envia mensagem "PASS" com "password".</span><span class="sxs-lookup"><span data-stu-id="95abd-196">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="95abd-197">O servidor envia resposta "230" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-197">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="95abd-198">O cliente envia mensagem "TYPE I" para transferência binária.</span><span class="sxs-lookup"><span data-stu-id="95abd-198">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="95abd-199">O servidor envia uma resposta "200" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-199">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="95abd-200">O cliente envia mensagem "PORT" com endereço IP e porta.</span><span class="sxs-lookup"><span data-stu-id="95abd-200">Client sends "PORT" message with IP address and port.</span></span>
1. <span data-ttu-id="95abd-201">O servidor envia uma resposta "200" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-201">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="95abd-202">O cliente envia mensagem "RETR" com nome de ficheiro para ler.</span><span class="sxs-lookup"><span data-stu-id="95abd-202">Client sends "RETR" message with file name to read.</span></span>
1. <span data-ttu-id="95abd-203">O servidor cria uma tomada de dados e conecta-se com a porta de dados do cliente especificada no comando "PORT".</span><span class="sxs-lookup"><span data-stu-id="95abd-203">Server creates data socket and connects with client data port specified in the "PORT" command.</span></span>
1. <span data-ttu-id="95abd-204">O servidor envia a resposta "125" para a leitura do ficheiro de sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-204">Server sends "125" response to signal file read has started.</span></span>
1. <span data-ttu-id="95abd-205">O servidor envia conteúdo de ficheiro através da ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-205">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="95abd-206">Este processo continua até que o ficheiro seja completamente transferido.</span><span class="sxs-lookup"><span data-stu-id="95abd-206">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="95abd-207">Quando terminada, o Servidor desliga a ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-207">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="95abd-208">O servidor envia resposta "250" para a leitura do ficheiro de sinal é bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-208">Server sends "250" response to signal file read is successful.</span></span>
1. <span data-ttu-id="95abd-209">Os clientes enviam "QUIT" para terminar a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-209">Clients sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="95abd-210">O servidor envia a resposta "221" para desligar o sinal é bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-210">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="95abd-211">O servidor desliga a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-211">Server disconnects FTP connection.</span></span>

<span data-ttu-id="95abd-212">Como mencionado anteriormente, a única diferença entre FTP que passa por IPv4 e IPv6 é que o comando PORT é substituído pelo comando EPRT para IPv6</span><span class="sxs-lookup"><span data-stu-id="95abd-212">As mentioned previously, the only difference between FTP running over IPv4 and IPv6 is the PORT command is replaced with the EPRT command for IPv6</span></span>

<span data-ttu-id="95abd-213">Se o Cliente FTP fizer um pedido de leitura no modo de transferência passiva, a sequência de comando é a seguinte (linhas **audazes** indicam um passo diferente do modo de transferência ativo):</span><span class="sxs-lookup"><span data-stu-id="95abd-213">If the FTP Client makes a read request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="95abd-214">O cliente emite ligação TCP à porta do Servidor 21.</span><span class="sxs-lookup"><span data-stu-id="95abd-214">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="95abd-215">O servidor envia resposta "220" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-215">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="95abd-216">O cliente envia mensagem "USER" com "username".</span><span class="sxs-lookup"><span data-stu-id="95abd-216">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="95abd-217">O servidor envia resposta "331" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-217">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="95abd-218">O cliente envia mensagem "PASS" com "password".</span><span class="sxs-lookup"><span data-stu-id="95abd-218">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="95abd-219">O servidor envia resposta "230" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-219">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="95abd-220">O cliente envia mensagem "TYPE I" para transferência binária.</span><span class="sxs-lookup"><span data-stu-id="95abd-220">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="95abd-221">O servidor envia uma resposta "200" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-221">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="95abd-222">**O cliente envia mensagem "PASV".**</span><span class="sxs-lookup"><span data-stu-id="95abd-222">**Client sends "PASV" message.**</span></span>
1. <span data-ttu-id="95abd-223">**O servidor envia resposta "227" e endereço IP e porta para o Cliente se conectar, para sinalizar o sucesso.**</span><span class="sxs-lookup"><span data-stu-id="95abd-223">**Server sends "227" response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="95abd-224">O cliente envia mensagem "RETR" com nome de ficheiro para ler.</span><span class="sxs-lookup"><span data-stu-id="95abd-224">Client sends "RETR" message with file name to read.</span></span>
1. <span data-ttu-id="95abd-225">**O servidor cria a tomada do servidor de dados e ouve o pedido de ligação do Cliente nesta tomada utilizando a porta especificada na resposta "227".**</span><span class="sxs-lookup"><span data-stu-id="95abd-225">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the "227" response.**</span></span>
1. <span data-ttu-id="95abd-226">**O servidor envia a resposta "150" na tomada de controlo para a leitura do ficheiro de sinal iniciada.**</span><span class="sxs-lookup"><span data-stu-id="95abd-226">**Server sends "150" response on the control socket to signal file read has started.**</span></span>
1. <span data-ttu-id="95abd-227">O servidor envia conteúdo de ficheiro através da ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-227">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="95abd-228">Este processo continua até que o ficheiro seja completamente transferido.</span><span class="sxs-lookup"><span data-stu-id="95abd-228">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="95abd-229">Quando terminada, o Servidor desliga a ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-229">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="95abd-230">**O servidor envia a resposta "226" na tomada de controlo para a leitura do ficheiro de sinal é bem sucedida.**</span><span class="sxs-lookup"><span data-stu-id="95abd-230">**Server sends "226" response on the control socket to signal file read is successful.**</span></span>
1. <span data-ttu-id="95abd-231">O cliente envia "QUIT" para terminar a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-231">Client sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="95abd-232">O servidor envia a resposta "221" para desligar o sinal é bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-232">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="95abd-233">O servidor desliga a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-233">Server disconnects FTP connection.</span></span>

### <a name="ftp-write-requests"></a><span data-ttu-id="95abd-234">Pedidos de escrita FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-234">FTP Write Requests</span></span>

1. <span data-ttu-id="95abd-235">O cliente emite ligação TCP à porta do Servidor 21.</span><span class="sxs-lookup"><span data-stu-id="95abd-235">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="95abd-236">O servidor envia resposta "220" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-236">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="95abd-237">O cliente envia mensagem "USER" com "username".</span><span class="sxs-lookup"><span data-stu-id="95abd-237">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="95abd-238">O servidor envia resposta "331" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-238">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="95abd-239">O cliente envia mensagem "PASS" com "password".</span><span class="sxs-lookup"><span data-stu-id="95abd-239">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="95abd-240">O servidor envia resposta "230" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-240">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="95abd-241">O cliente envia mensagem "TYPE I" para transferência binária.</span><span class="sxs-lookup"><span data-stu-id="95abd-241">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="95abd-242">O servidor envia uma resposta "200" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-242">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="95abd-243">O cliente envia mensagem "PORT" com endereço IP e porta.</span><span class="sxs-lookup"><span data-stu-id="95abd-243">Client sends "PORT" message with IP address and port.</span></span>
1. <span data-ttu-id="95abd-244">O servidor envia uma resposta "200" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-244">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="95abd-245">O cliente envia mensagem "STOR" com nome de ficheiro para escrever.</span><span class="sxs-lookup"><span data-stu-id="95abd-245">Client sends "STOR" message with file name to write.</span></span>
1. <span data-ttu-id="95abd-246">O servidor cria uma tomada de dados e conecta-se com a porta de dados do cliente especificada no comando "PORT".</span><span class="sxs-lookup"><span data-stu-id="95abd-246">Server creates data socket and connects with client data port specified in the "PORT" command.</span></span>
1. <span data-ttu-id="95abd-247">O servidor envia a resposta "125" para a escrita do ficheiro de sinal já começou.</span><span class="sxs-lookup"><span data-stu-id="95abd-247">Server sends "125" response to signal file write has started.</span></span>
1. <span data-ttu-id="95abd-248">O cliente envia conteúdo de ficheiro através da ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-248">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="95abd-249">Este processo continua até que o ficheiro seja completamente transferido.</span><span class="sxs-lookup"><span data-stu-id="95abd-249">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="95abd-250">Quando terminada, o Cliente desliga a ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-250">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="95abd-251">O servidor envia resposta "250" para a escrita de ficheiros de sinal é bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-251">Server sends "250" response to signal file write is successful.</span></span>
1. <span data-ttu-id="95abd-252">Os clientes enviam "QUIT" para terminar a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-252">Clients sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="95abd-253">O servidor envia a resposta "221" para desligar o sinal é bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-253">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="95abd-254">O servidor desliga a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-254">Server disconnects FTP connection.</span></span>

<span data-ttu-id="95abd-255">Se o Cliente FTP fizer um pedido de escrita no modo de transferência passiva, a sequência de comando é a seguinte (linhas **audazes** indicam um passo diferente do modo de transferência ativo):</span><span class="sxs-lookup"><span data-stu-id="95abd-255">If the FTP Client makes a write request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="95abd-256">O cliente emite ligação TCP à porta do Servidor 21.</span><span class="sxs-lookup"><span data-stu-id="95abd-256">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="95abd-257">O servidor envia resposta "220" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-257">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="95abd-258">O cliente envia mensagem "USER" com "username".</span><span class="sxs-lookup"><span data-stu-id="95abd-258">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="95abd-259">O servidor envia resposta "331" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-259">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="95abd-260">O cliente envia mensagem "PASS" com "password".</span><span class="sxs-lookup"><span data-stu-id="95abd-260">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="95abd-261">O servidor envia resposta "230" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-261">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="95abd-262">O cliente envia mensagem "TYPE I" para transferência binária.</span><span class="sxs-lookup"><span data-stu-id="95abd-262">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="95abd-263">O servidor envia uma resposta "200" para o sucesso do sinal.</span><span class="sxs-lookup"><span data-stu-id="95abd-263">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="95abd-264">**O cliente envia mensagem "PASV".**</span><span class="sxs-lookup"><span data-stu-id="95abd-264">**Client sends "PASV" message.**</span></span>
1. <span data-ttu-id="95abd-265">**O servidor envia resposta "227" e endereço IP e porta para o Cliente se conectar, para sinalizar o sucesso.**</span><span class="sxs-lookup"><span data-stu-id="95abd-265">**Server sends "227" response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="95abd-266">O cliente envia mensagem "STOR" com nome de ficheiro para escrever.</span><span class="sxs-lookup"><span data-stu-id="95abd-266">Client sends "STOR" message with file name to write.</span></span>
1. <span data-ttu-id="95abd-267">**O servidor cria a tomada do servidor de dados e ouve o pedido de ligação do Cliente nesta tomada utilizando a porta especificada na resposta "227".**</span><span class="sxs-lookup"><span data-stu-id="95abd-267">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the "227" response.**</span></span>
1. <span data-ttu-id="95abd-268">**O servidor envia a resposta "150" na tomada de controlo para a escrita do ficheiro de sinal já começou.**</span><span class="sxs-lookup"><span data-stu-id="95abd-268">**Server sends "150" response on the control socket to signal file write has started.**</span></span>
1. <span data-ttu-id="95abd-269">O cliente envia conteúdo de ficheiro através da ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-269">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="95abd-270">Este processo continua até que o ficheiro seja completamente transferido.</span><span class="sxs-lookup"><span data-stu-id="95abd-270">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="95abd-271">Quando terminada, o Cliente desliga a ligação de dados.</span><span class="sxs-lookup"><span data-stu-id="95abd-271">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="95abd-272">**O servidor envia a resposta "226" na tomada de controlo para a escrita do ficheiro de sinal é bem sucedida.**</span><span class="sxs-lookup"><span data-stu-id="95abd-272">**Server sends "226" response on the control socket to signal file write is successful.**</span></span>
1. <span data-ttu-id="95abd-273">O cliente envia "QUIT" para terminar a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-273">Client sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="95abd-274">O servidor envia a resposta "221" para desligar o sinal é bem sucedida.</span><span class="sxs-lookup"><span data-stu-id="95abd-274">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="95abd-275">O servidor desliga a ligação FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-275">Server disconnects FTP connection.</span></span>

## <a name="ftp-authentication"></a><span data-ttu-id="95abd-276">Autenticação FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-276">FTP Authentication</span></span>

<span data-ttu-id="95abd-277">Sempre que uma ligação FTP ocorra, o Cliente deve fornecer ao Servidor um nome de *utilizador* e *senha*.</span><span class="sxs-lookup"><span data-stu-id="95abd-277">Whenever an FTP connection takes place, the Client must provide the Server with a *username* and *password*.</span></span> <span data-ttu-id="95abd-278">Alguns sites FTP permitem o que é chamado *FTP Anónimo,* que permite o acesso ftp sem um nome de utilizador e senha específicos.</span><span class="sxs-lookup"><span data-stu-id="95abd-278">Some FTP sites allow what is called *Anonymous FTP*, which allows FTP access without a specific username and password.</span></span> <span data-ttu-id="95abd-279">Para este tipo de ligação, deve ser fornecido "anónimo" para o nome de utilizador e a palavra-passe deve ser um endereço de e-mail completo.</span><span class="sxs-lookup"><span data-stu-id="95abd-279">For this type of connection, "anonymous" should be supplied for username and the password should be a complete e-mail address.</span></span>

<span data-ttu-id="95abd-280">O utilizador é responsável pelo fornecimento de rotinas de autenticação de login e logout NetX.</span><span class="sxs-lookup"><span data-stu-id="95abd-280">The user is responsible for supplying NetX FTP with login and logout authentication routines.</span></span> <span data-ttu-id="95abd-281">Estes são fornecidos durante a função \***nx_ftp_server_create** _ e chamados a partir do processamento da palavra-passe.</span><span class="sxs-lookup"><span data-stu-id="95abd-281">These are supplied during the \***nx_ftp_server_create** _ function and called from the password processing.</span></span> <span data-ttu-id="95abd-282">Se a função _login\* voltar NX_SUCCESS, a ligação é autenticada e são permitidas operações FTP.</span><span class="sxs-lookup"><span data-stu-id="95abd-282">If the _login\* function returns NX_SUCCESS, the connection is authenticated and FTP operations are allowed.</span></span> <span data-ttu-id="95abd-283">Caso contrário, se a função *de login* devolver algo diferente NX_SUCCESS, a tentativa de ligação é rejeitada.</span><span class="sxs-lookup"><span data-stu-id="95abd-283">Otherwise, if the *login* function returns something other than NX_SUCCESS, the connection attempt is rejected.</span></span>

## <a name="ftp-multi-thread-support"></a><span data-ttu-id="95abd-284">Suporte multi-rosca FTP</span><span class="sxs-lookup"><span data-stu-id="95abd-284">FTP Multi-Thread Support</span></span>

<span data-ttu-id="95abd-285">Os serviços do Cliente NetX FTP podem ser chamados a partir de várias linhas simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="95abd-285">The NetX FTP Client services can be called from multiple threads simultaneously.</span></span> <span data-ttu-id="95abd-286">No entanto, ler ou escrever pedidos para uma determinada instância do Cliente FTP deve ser feito em sequência a partir do mesmo fio.</span><span class="sxs-lookup"><span data-stu-id="95abd-286">However, read or write requests for a particular FTP Client instance should be done in sequence from the same thread.</span></span>

## <a name="ftp-rfcs"></a><span data-ttu-id="95abd-287">FTP RFCs</span><span class="sxs-lookup"><span data-stu-id="95abd-287">FTP RFCs</span></span>

<span data-ttu-id="95abd-288">O NetX FTP está em conformidade com o RFC959 e com os RFCs relacionados.</span><span class="sxs-lookup"><span data-stu-id="95abd-288">NetX FTP is compliant with RFC959 and related RFCs.</span></span>