---
title: Capítulo 2 - Instalação e Utilização do Cliente RTOS NetX Duo LWM2M
description: Este capítulo explica como instalar e utilizar o RtOS NetX Duo LWM2M Client.
author: v-condav
ms.author: v-condav
ms.date: 01/22/2021
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 536225de30f54356157c222917fc904c6aa039fe
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104825951"
---
# <a name="chapter-2--installation-and-use-of-lwm2m-client"></a><span data-ttu-id="81d97-103">Capítulo 2 Instalação e Utilização do Cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="81d97-103">Chapter 2  Installation and Use of LWM2M Client</span></span>

<span data-ttu-id="81d97-104">Este capítulo contém uma descrição de vários problemas relacionados com a instalação, configuração e utilização do componente LWM2M Client.</span><span class="sxs-lookup"><span data-stu-id="81d97-104">This chapter contains a description of various issues related to installation, setup, and usage of the LWM2M Client component.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="81d97-105">Distribuição de Produtos</span><span class="sxs-lookup"><span data-stu-id="81d97-105">Product Distribution</span></span>

<span data-ttu-id="81d97-106">Cliente Azure RTOS LWM2M pode ser obtido a partir do nosso repositório de código fonte pública em [https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m](https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m/) .</span><span class="sxs-lookup"><span data-stu-id="81d97-106">Azure RTOS LWM2M Client can be obtained from our public source code repository at [https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m](https://github.com/azure-rtos/netxduo/tree/master/addons/lwm2m/).</span></span> <span data-ttu-id="81d97-107">O pacote inclui três ficheiros de origem, um inclui ficheiros, da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="81d97-107">The package includes three source files, one include files, as follows.</span></span>

* <span data-ttu-id="81d97-108">**nx \_ lwm2m \_ cliente.h** Arquivo de cabeçalho para o Cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="81d97-108">**nx\_lwm2m\_client.h** Header file for the LWM2M Client</span></span>

* <span data-ttu-id="81d97-109">**\_ nx lwm2m \_ cliente.c** ficheiros C Source para Cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="81d97-109">**nx\_lwm2m\_client.c** C Source files for LWM2M Client</span></span>

* <span data-ttu-id="81d97-110">**demo \_ netx \_ lwm2m \_ cliente.c** ficheiro C Source para demonstração de cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="81d97-110">**demo\_netx\_lwm2m\_client.c** C Source file for LWM2M Client Demo</span></span>

## <a name="lwm2m-client-installation"></a><span data-ttu-id="81d97-111">Instalação do cliente LWM2M</span><span class="sxs-lookup"><span data-stu-id="81d97-111">LWM2M Client Installation</span></span>

<span data-ttu-id="81d97-112">O Cliente LWM2M faz parte da NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="81d97-112">The LWM2M Client is part of NetX Duo.</span></span> <span data-ttu-id="81d97-113">Assim, após a clonagem do NetX Duo do repositório GitHub, a fonte de cliente LWM2M pode ser encontrada em ***netxduo/addons/lwm2m***.</span><span class="sxs-lookup"><span data-stu-id="81d97-113">Therefore, after cloning NetX Duo from the GitHub repository, LWM2M client source can be found at ***netxduo/addons/lwm2m***.</span></span>

## <a name="using-lwm2m_client"></a><span data-ttu-id="81d97-114">Utilização de Cliente LWM2M \_</span><span class="sxs-lookup"><span data-stu-id="81d97-114">Using LWM2M\_Client</span></span>

<span data-ttu-id="81d97-115">A utilização do Cliente LWM2M é simples.</span><span class="sxs-lookup"><span data-stu-id="81d97-115">Using LWM2M Client is straightforward.</span></span> <span data-ttu-id="81d97-116">Basicamente, o código de aplicação deve incluir ***nx \_ lwm2m \_ client.h\*\*_ depois de incluir _*_tx \_ api.h_*_ e _*_nx \_ api.h_*_, a fim de usar ThreadX e NetX. Uma vez incluído _*_nx \_ lwm2m \_ client.h_*_ é incluído, o código de aplicação é então capaz de fazer as chamadas de função LWM2M Cliente especificadas mais tarde neste guia. O pedido também deve importar os ficheiros _* _nx \_ cliente lwm2m \_ \_ para \***\* a biblioteca NetX.</span><span class="sxs-lookup"><span data-stu-id="81d97-116">Basically, the application code must include ***nx\_lwm2m\_client.h\*\*_ after it includes _*_tx\_api.h_*_ and _*_nx\_api.h_*_, in order to use ThreadX and NetX. Once _*_nx\_lwm2m\_client.h_*_ is included, the application code is then able to make the LWM2M Client function calls specified later in this guide. The application must also import the _* _nx\_lwm2m\_client\_.\***\* files into the NetX library.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="81d97-117">Opções de configuração</span><span class="sxs-lookup"><span data-stu-id="81d97-117">Configuration Options</span></span>

<span data-ttu-id="81d97-118">Existem várias opções de configuração ao construir a biblioteca LWM2M Client e a aplicação utilizando o Cliente LWM2M.</span><span class="sxs-lookup"><span data-stu-id="81d97-118">There are several configuration options when building the LWM2M Client library and the application using the LWM2M Client.</span></span> <span data-ttu-id="81d97-119">As opções de configuração podem ser definidas na fonte de aplicação, na linha de comando, salvo especificação em contrário.</span><span class="sxs-lookup"><span data-stu-id="81d97-119">The configuration options can be defined in the application source, on the command line, unless otherwise specified.</span></span>

| <span data-ttu-id="81d97-120">Opção de configuração &nbsp;</span><span class="sxs-lookup"><span data-stu-id="81d97-120">Configuration&nbsp;Option</span></span> | <span data-ttu-id="81d97-121">Descrição</span><span class="sxs-lookup"><span data-stu-id="81d97-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="81d97-122">**CLIENTE NX \_ LWM2M \_ \_ MTU**</span><span class="sxs-lookup"><span data-stu-id="81d97-122">**NX\_LWM2M\_CLIENT\_MTU**</span></span> | <span data-ttu-id="81d97-123">Especifica o tamanho máximo de uma mensagem CoAP, incluindo cabeçalhos IP e UDP.</span><span class="sxs-lookup"><span data-stu-id="81d97-123">Specifies the maximum size of a CoAP message, including IP and UDP headers.</span></span> <span data-ttu-id="81d97-124">O valor predefinido é de 1280.</span><span class="sxs-lookup"><span data-stu-id="81d97-124">The default value is 1280.</span></span> |
| <span data-ttu-id="81d97-125">**TOS DE TOMADA DE CLIENTE NX \_ LWM2M \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-125">**NX\_LWM2M\_CLIENT\_SOCKET\_TOS**</span></span> | <span data-ttu-id="81d97-126">Tipo de serviço necessário para o UDP LwM2M.</span><span class="sxs-lookup"><span data-stu-id="81d97-126">Type of service required for the LwM2M UDP.</span></span> <span data-ttu-id="81d97-127">Por predefinição, este valor é definido como NX \_ IP NORMAL para indicar o serviço normal de \_ pacotes IP.</span><span class="sxs-lookup"><span data-stu-id="81d97-127">By default, this value is defined as NX\_IP\_NORMAL to indicate normal IP packet service.</span></span> |
| <span data-ttu-id="81d97-128">**TTL DE TOMADA DE CLIENTE NX \_ LWM2M \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-128">**NX\_LWM2M\_CLIENT\_SOCKET\_TTL**</span></span> | <span data-ttu-id="81d97-129">Especifica o número de routers que este pacote pode passar antes de ser descartado.</span><span class="sxs-lookup"><span data-stu-id="81d97-129">Specifies the number of routers this packet can pass before it is discarded.</span></span> <span data-ttu-id="81d97-130">O valor predefinido é definido para 0x80.</span><span class="sxs-lookup"><span data-stu-id="81d97-130">The default value is set to 0x80.</span></span> |
| <span data-ttu-id="81d97-131">**FILA DE TOMADA DE CLIENTE NX \_ LWM2M \_ \_ \_ \_ MAX**</span><span class="sxs-lookup"><span data-stu-id="81d97-131">**NX\_LWM2M\_CLIENT\_SOCKET\_QUEUE\_MAX**</span></span> | <span data-ttu-id="81d97-132">Especifica o número de profundidades máximas da fila de receção.</span><span class="sxs-lookup"><span data-stu-id="81d97-132">Specifies the number of maximum depths of receive queue.</span></span> <span data-ttu-id="81d97-133">O valor predefinido é definido para 4.</span><span class="sxs-lookup"><span data-stu-id="81d97-133">The default value is set to 4.</span></span> |
| <span data-ttu-id="81d97-134">**NX \_ LWM2M \_ CLIENTE MAX \_ \_ COAP \_ URI \_ PATH**</span><span class="sxs-lookup"><span data-stu-id="81d97-134">**NX\_LWM2M\_CLIENT\_MAX\_COAP\_URI\_PATH**</span></span> | <span data-ttu-id="81d97-135">Especifica o número de comprimentos máximos da opção coAP Uri-Path.</span><span class="sxs-lookup"><span data-stu-id="81d97-135">Specifies the number of maximum lengths of the CoAP Uri-Path option.</span></span> <span data-ttu-id="81d97-136">O valor predefinido é definido para 32.</span><span class="sxs-lookup"><span data-stu-id="81d97-136">The default value is set to 32.</span></span> |
| <span data-ttu-id="81d97-137">**ERROS DO DISPOSITIVO MAX DO CLIENTE NX \_ LWM2M \_ \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-137">**NX\_LWM2M\_CLIENT\_MAX\_DEVICE\_ERRORS**</span></span> | <span data-ttu-id="81d97-138">Especifica o número máximo de códigos de erro armazenados pelo Objeto do Dispositivo.</span><span class="sxs-lookup"><span data-stu-id="81d97-138">Specifies the maximum number of error codes stored by the Device Object.</span></span> <span data-ttu-id="81d97-139">O valor predefinido é 8.</span><span class="sxs-lookup"><span data-stu-id="81d97-139">The default value is 8.</span></span> |
| <span data-ttu-id="81d97-140">**\_NX LWM2M \_ CLIENTE MAX SECURITY \_ \_ \_ INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="81d97-140">**NX\_LWM2M\_CLIENT\_MAX\_SECURITY\_INSTANCES**</span></span> | <span data-ttu-id="81d97-141">Especifica o número máximo de instâncias de objetos de segurança.</span><span class="sxs-lookup"><span data-stu-id="81d97-141">Specifies the maximum number of Security Object Instances.</span></span> <span data-ttu-id="81d97-142">O valor predefinido é 2 para suportar um Servidor Bootstrap e um Servidor padrão.</span><span class="sxs-lookup"><span data-stu-id="81d97-142">The default value is 2 for supporting a Bootstrap Server and a standard Server.</span></span> |
| <span data-ttu-id="81d97-143">**NX \_ LWM2M \_ CLIENT \_ MAX \_ SERVER \_ INSTANCES**</span><span class="sxs-lookup"><span data-stu-id="81d97-143">**NX\_LWM2M\_CLIENT\_MAX\_SERVER\_INSTANCES**</span></span> | <span data-ttu-id="81d97-144">Especifica o número máximo de instâncias de objetos de servidor.</span><span class="sxs-lookup"><span data-stu-id="81d97-144">Specifies the maximum number of Server Object Instances.</span></span> <span data-ttu-id="81d97-145">O valor predefinido é 1 para suportar um único Servidor padrão.</span><span class="sxs-lookup"><span data-stu-id="81d97-145">The default value is 1 for supporting a single standard Server.</span></span> |
| <span data-ttu-id="81d97-146">**NX \_ LWM2M \_ CLIENTE MAX ACESSO A \_ \_ \_ INSTÂNCIAS DE CONTROLO DE ACESSO \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-146">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_INSTANCES**</span></span> | <span data-ttu-id="81d97-147">Especifica o número máximo de instâncias de controlo de acesso.</span><span class="sxs-lookup"><span data-stu-id="81d97-147">Specifies the maximum number of Access Control Instances.</span></span> <span data-ttu-id="81d97-148">O valor predefinido é 0, que desativa o controlo de acesso.</span><span class="sxs-lookup"><span data-stu-id="81d97-148">The default value is 0, which disables access control.</span></span> <span data-ttu-id="81d97-149">Se a aplicação suportar mais de um Servidor LWM2M, o número máximo de Instâncias de Controlo de Acesso deve ser definido para o número máximo de instâncias de objeto que o Cliente LWM2M irá suportar, uma vez que uma Instância de Controlo de Acesso deve ser criada para cada Instância de Objeto (exceto para as Instâncias de Objeto de Segurança).</span><span class="sxs-lookup"><span data-stu-id="81d97-149">If the application supports more than one LWM2M Server, the maximum number of Access Control Instances must be set to the maximum number of Object Instances that the LWM2M Client will support, as one Access Control Instance must be created for each Object Instance (except for the Security Object Instances).</span></span> |
| <span data-ttu-id="81d97-150">**NX \_ LWM2M \_ CLIENTE MAX ACCESS CONTROL \_ \_ \_ \_ ACLS**</span><span class="sxs-lookup"><span data-stu-id="81d97-150">**NX\_LWM2M\_CLIENT\_MAX\_ACCESS\_CONTROL\_ACLS**</span></span> | <span data-ttu-id="81d97-151">Especifica o número máximo de recursos ACL por Instância de Controlo de Acesso.</span><span class="sxs-lookup"><span data-stu-id="81d97-151">Specifies the maximum number of ACL resources per Access Control Instance.</span></span> <span data-ttu-id="81d97-152">O valor predefinido é 4.</span><span class="sxs-lookup"><span data-stu-id="81d97-152">The default value is 4.</span></span> |
| <span data-ttu-id="81d97-153">**NOTIFICAÇÕES MAX DO CLIENTE NX \_ LWM2M \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-153">**NX\_LWM2M\_CLIENT\_MAX\_NOTIFICATIONS**</span></span> | <span data-ttu-id="81d97-154">Especifica o número máximo de notificações que o Cliente LWM2M irá suportar.</span><span class="sxs-lookup"><span data-stu-id="81d97-154">Specifies the maximum number of notifications that the LWM2M Client will support.</span></span> <span data-ttu-id="81d97-155">Um Servidor LWM2M pode definir notificações em Objetos, Instâncias de Objetos e Recursos.</span><span class="sxs-lookup"><span data-stu-id="81d97-155">A LWM2M Server can set notifications on Objects, Object Instances, and Resources.</span></span> <span data-ttu-id="81d97-156">O valor predefinido é 8.</span><span class="sxs-lookup"><span data-stu-id="81d97-156">The default value is 8.</span></span> |
| <span data-ttu-id="81d97-157">**RECURSOS MAX DO CLIENTE NX \_ LWM2M \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-157">**NX\_LWM2M\_CLIENT\_MAX\_RESOURCES**</span></span> | <span data-ttu-id="81d97-158">Especifica o número máximo de Recursos por Objeto.</span><span class="sxs-lookup"><span data-stu-id="81d97-158">Specifies the maximum number of Resources per Object.</span></span> <span data-ttu-id="81d97-159">O valor predefinido é 32.</span><span class="sxs-lookup"><span data-stu-id="81d97-159">The default value is 32.</span></span> |
| <span data-ttu-id="81d97-160">**CLIENTE NX \_ LWM2M \_ \_ MAX MÚLTIPLOS \_ \_ RECURSOS**</span><span class="sxs-lookup"><span data-stu-id="81d97-160">**NX\_LWM2M\_CLIENT\_MAX\_MULTIPLE\_RESOURCES**</span></span> | <span data-ttu-id="81d97-161">Especifica o número máximo de casos de Recursos para vários recursos.</span><span class="sxs-lookup"><span data-stu-id="81d97-161">Specifies the maximum number of Resources instances for multiple resource.</span></span> <span data-ttu-id="81d97-162">O valor predefinido é 8.</span><span class="sxs-lookup"><span data-stu-id="81d97-162">The default value is 8.</span></span> |
| <span data-ttu-id="81d97-163">**CLIENTE NX \_ LWM2M \_ \_ BOOTSTRAP \_ \_ TEMPORIZADOR INATIVO**</span><span class="sxs-lookup"><span data-stu-id="81d97-163">**NX\_LWM2M\_CLIENT\_BOOTSTRAP\_IDLE\_TIMER**</span></span> | <span data-ttu-id="81d97-164">Especifica o tempo máximo para esperar pelos pedidos do servidor bootstrap quando a sessão de bootstrap é iniciada antes de abortar a sessão.</span><span class="sxs-lookup"><span data-stu-id="81d97-164">Specifies the maximum time to wait for bootstrap server requests when the bootstrap session is initiated before aborting the session.</span></span> <span data-ttu-id="81d97-165">O valor predefinido é de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="81d97-165">The default value is 60 seconds.</span></span> |
| <span data-ttu-id="81d97-166">**NX \_ LWM2M \_ CLIENTE \_ DTLS \_ INICIAR \_ TEMPO**</span><span class="sxs-lookup"><span data-stu-id="81d97-166">**NX\_LWM2M\_CLIENT\_DTLS\_START\_TIMEOUT**</span></span> | <span data-ttu-id="81d97-167">Especifica o tempo máximo para esperar pela conclusão do aperto de mão DTLS.</span><span class="sxs-lookup"><span data-stu-id="81d97-167">Specifies the maximum time to wait for DTLS handshake completion.</span></span> <span data-ttu-id="81d97-168">O valor predefinido é de 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="81d97-168">The default value is 30 seconds.</span></span> |
| <span data-ttu-id="81d97-169">**CLIENTE NX \_ LWM2M \_ \_ DTLS \_ TERMINA \_ TIMEOUT**</span><span class="sxs-lookup"><span data-stu-id="81d97-169">**NX\_LWM2M\_CLIENT\_DTLS\_END\_TIMEOUT**</span></span> | <span data-ttu-id="81d97-170">Especifica o tempo máximo para esperar pela conclusão do encerramento do DTLS.</span><span class="sxs-lookup"><span data-stu-id="81d97-170">Specifies the maximum time to wait for DTLS shutdown completion.</span></span> <span data-ttu-id="81d97-171">O valor predefinido é de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="81d97-171">The default value is 5 seconds.</span></span> |
| <span data-ttu-id="81d97-172">**SEGURANÇA DO CLIENTE NX \_ LWM2M \_ \_ MAX SERVER \_ \_ \_ URI**</span><span class="sxs-lookup"><span data-stu-id="81d97-172">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_URI**</span></span> | <span data-ttu-id="81d97-173">Especifica o comprimento máximo de um URI do servidor, incluindo o fim do carácter nulo.</span><span class="sxs-lookup"><span data-stu-id="81d97-173">Specifies the maximum length of a server URI, including terminating null character.</span></span> <span data-ttu-id="81d97-174">O valor predefinido é de 128.</span><span class="sxs-lookup"><span data-stu-id="81d97-174">The default value is 128.</span></span> |
| <span data-ttu-id="81d97-175">**SEGURANÇA DO CLIENTE NX \_ LWM2M \_ MAX CHAVE OU \_ \_ \_ \_ \_ \_ IDENTIDADE PÚBLICA**</span><span class="sxs-lookup"><span data-stu-id="81d97-175">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_PUBLIC\_KEY\_OR\_IDENTITY**</span></span> | <span data-ttu-id="81d97-176">Especifica o comprimento máximo da chave pública ou identidade para DTLS.</span><span class="sxs-lookup"><span data-stu-id="81d97-176">Specifies the maximum length of the public key or identity for DTLS.</span></span> <span data-ttu-id="81d97-177">O valor predefinido é de 128.</span><span class="sxs-lookup"><span data-stu-id="81d97-177">The default value is 128.</span></span> |
| <span data-ttu-id="81d97-178">**CHAVE PÚBLICA DO SERVIDOR MAX DO SERVIDOR MAX DE SEGURANÇA DO CLIENTE NX \_ LWM2M \_ \_ \_ \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-178">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SERVER\_PUBLIC\_KEY**</span></span> | <span data-ttu-id="81d97-179">Especifica o comprimento máximo da chave pública do servidor para DTLS.</span><span class="sxs-lookup"><span data-stu-id="81d97-179">Specifies the maximum length of the server public key for DTLS.</span></span> <span data-ttu-id="81d97-180">O valor predefinido é de 128.</span><span class="sxs-lookup"><span data-stu-id="81d97-180">The default value is 128.</span></span> |
| <span data-ttu-id="81d97-181">**CHAVE SECRETA DE SEGURANÇA DO CLIENTE NX \_ LWM2M \_ \_ \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-181">**NX\_LWM2M\_CLIENT\_SECURITY\_MAX\_SECRET\_KEY**</span></span> | <span data-ttu-id="81d97-182">Especifica o comprimento máximo da chave secreta para DTLS.</span><span class="sxs-lookup"><span data-stu-id="81d97-182">Specifies the maximum length of the secret key for DTLS.</span></span> <span data-ttu-id="81d97-183">O valor predefinido é de 128.</span><span class="sxs-lookup"><span data-stu-id="81d97-183">The default value is 128.</span></span> |
| <span data-ttu-id="81d97-184">**CLIENTE NX \_ LWM2M \_ \_ \_ ESPERA**</span><span class="sxs-lookup"><span data-stu-id="81d97-184">**NX\_LWM2M\_CLIENT\_HOLD\_OFF**</span></span> | <span data-ttu-id="81d97-185">Especifica o número de segundos a esperar antes de iniciar a armadilha de botas.</span><span class="sxs-lookup"><span data-stu-id="81d97-185">Specifies the number of seconds to wait before initiating bootstrap.</span></span> <span data-ttu-id="81d97-186">O valor predefinido é 1 segundo.</span><span class="sxs-lookup"><span data-stu-id="81d97-186">The default value is 1 second.</span></span> |
| <span data-ttu-id="81d97-187">**TEMPO DE VIDA DO CLIENTE NX \_ LWM2M \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="81d97-187">**NX\_LWM2M\_CLIENT\_LIFE\_TIME**</span></span> | <span data-ttu-id="81d97-188">Especifica o número de segundos para o tempo de vida útil do registo.</span><span class="sxs-lookup"><span data-stu-id="81d97-188">Specifies the number of seconds for the registration lifetime.</span></span> <span data-ttu-id="81d97-189">O valor predefinido é 600 segundos.</span><span class="sxs-lookup"><span data-stu-id="81d97-189">The default value is 600 seconds.</span></span> |
