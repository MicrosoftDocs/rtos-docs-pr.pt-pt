---
title: Capítulo 1 - Introdução ao Azure RTOS NetX Secure
description: Este capítulo contém uma introdução ao Azure RTOS NetX Secure e uma descrição das suas aplicações e benefícios.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 8f4c7a97564cd2f702f9887181b36297b42fa492
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104825682"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-secure"></a><span data-ttu-id="66756-103">Capítulo 1 - Introdução ao Azure RTOS NetX Secure</span><span class="sxs-lookup"><span data-stu-id="66756-103">Chapter 1 - Introduction to Azure RTOS NetX Secure</span></span>

<span data-ttu-id="66756-104">Azure RTOS NetX Secure é uma implementação em tempo real de alto desempenho de padrões de segurança de rede criptográfica, incluindo TLS/SSL projetado exclusivamente para aplicações incorporadas baseadas em ThreadX.</span><span class="sxs-lookup"><span data-stu-id="66756-104">Azure RTOS NetX Secure is a high-performance real-time implementation of cryptographic network security standards including TLS/SSL designed exclusively for embedded ThreadX-based applications.</span></span> <span data-ttu-id="66756-105">Este capítulo contém uma introdução ao NetX Secure e uma descrição das suas aplicações e benefícios.</span><span class="sxs-lookup"><span data-stu-id="66756-105">This chapter contains an introduction to NetX Secure and a description of its applications and benefits.</span></span>

## <a name="netx-secure-unique-features"></a><span data-ttu-id="66756-106">Recursos exclusivos da NetX Secure</span><span class="sxs-lookup"><span data-stu-id="66756-106">NetX Secure Unique Features</span></span>

<span data-ttu-id="66756-107">Ao contrário da maioria das outras implementações do TLS, o NetX Secure foi projetado do zero para suportar uma grande variedade de plataformas e escalas de hardware incorporadas facilmente, desde pequenas aplicações de microcontrolador até aos processadores incorporados mais poderosos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="66756-107">Unlike most other TLS implementations, NetX Secure was designed from the ground up to support a wide variety of embedded hardware platforms and scales easily from small micro-controller applications to the most powerful embedded processors available.</span></span> <span data-ttu-id="66756-108">O código é escrito com os recursos limitados dos sistemas incorporados em mente, e fornece uma série de opções de configuração para reduzir a pegada de memória necessária para fornecer comunicações de rede seguras sobre TLS.</span><span class="sxs-lookup"><span data-stu-id="66756-108">The code is written with the limited resources of embedded systems in mind, and provides a number of configuration options to reduce the memory footprint needed to provide secure network communications over TLS.</span></span>

## <a name="rfcs-supported-by-netx-secure"></a><span data-ttu-id="66756-109">RFCs Suportados por NetX Secure</span><span class="sxs-lookup"><span data-stu-id="66756-109">RFCs Supported by NetX Secure</span></span> 

<span data-ttu-id="66756-110">O NetX Secure suporta os seguintes protocolos relacionados com o TLS.</span><span class="sxs-lookup"><span data-stu-id="66756-110">NetX Secure supports the following protocols related to TLS.</span></span> <span data-ttu-id="66756-111">A lista não é necessariamente abrangente, uma vez que existem numerosos RFCs relativos ao TLS e à criptografia.</span><span class="sxs-lookup"><span data-stu-id="66756-111">The list is not necessarily comprehensive as there are numerous RFCs pertaining to TLS and cryptography.</span></span> <span data-ttu-id="66756-112">O NetX Secure segue todas as recomendações gerais e requisitos básicos dentro dos limites de um sistema operativo em tempo real com pequena pegada de memória e execução eficiente.</span><span class="sxs-lookup"><span data-stu-id="66756-112">NetX Secure follows all general recommendations and basic requirements within the constraints of a real-time operating system with small memory footprint and efficient execution.</span></span>

| <span data-ttu-id="66756-113">RFC</span><span class="sxs-lookup"><span data-stu-id="66756-113">RFC</span></span>      | <span data-ttu-id="66756-114">Descrição</span><span class="sxs-lookup"><span data-stu-id="66756-114">Description</span></span>                                                                                                 | <span data-ttu-id="66756-115">Página</span><span class="sxs-lookup"><span data-stu-id="66756-115">Page</span></span> |
|----------|-------------------------------------------------------------------------------------------------------------|------|
| <span data-ttu-id="66756-116">RFC 2104</span><span class="sxs-lookup"><span data-stu-id="66756-116">RFC 2104</span></span> | <span data-ttu-id="66756-117">HMAC: Keyed-Hashing para autenticação de mensagens</span><span class="sxs-lookup"><span data-stu-id="66756-117">HMAC: Keyed-Hashing for Message Authentication</span></span>                                                              | <span data-ttu-id="66756-118">33</span><span class="sxs-lookup"><span data-stu-id="66756-118">33</span></span>   |
| <span data-ttu-id="66756-119">RFC 2246</span><span class="sxs-lookup"><span data-stu-id="66756-119">RFC 2246</span></span> | <span data-ttu-id="66756-120">O Protocolo TLS Versão 1.0</span><span class="sxs-lookup"><span data-stu-id="66756-120">The TLS Protocol Version 1.0</span></span>                                                                                | <span data-ttu-id="66756-121">19</span><span class="sxs-lookup"><span data-stu-id="66756-121">19</span></span>   |
| <span data-ttu-id="66756-122">RFC 3268</span><span class="sxs-lookup"><span data-stu-id="66756-122">RFC 3268</span></span> | <span data-ttu-id="66756-123">Cifrasuites avançadas da Padrão de Encriptação (AES) para segurança da camada de transporte (TLS)</span><span class="sxs-lookup"><span data-stu-id="66756-123">Advanced Encryption Standard (AES) Ciphersuites for Transport Layer Security (TLS)</span></span>                          | <span data-ttu-id="66756-124">31</span><span class="sxs-lookup"><span data-stu-id="66756-124">31</span></span>   |
| <span data-ttu-id="66756-125">RFC 3447</span><span class="sxs-lookup"><span data-stu-id="66756-125">RFC 3447</span></span> | <span data-ttu-id="66756-126">Public-Key Padrões de Criptografia (PKCS) #1: RSA Cryptography Specifications Version 2.1</span><span class="sxs-lookup"><span data-stu-id="66756-126">Public-Key Cryptography Standards (PKCS) #1: RSA Cryptography Specifications Version 2.1</span></span>                    | <span data-ttu-id="66756-127">32</span><span class="sxs-lookup"><span data-stu-id="66756-127">32</span></span>   |
| <span data-ttu-id="66756-128">RFC 4279</span><span class="sxs-lookup"><span data-stu-id="66756-128">RFC 4279</span></span> | <span data-ttu-id="66756-129">Cifrasuites de chaves pré-partilhadas para TLS</span><span class="sxs-lookup"><span data-stu-id="66756-129">Pre-Shared Key Ciphersuites for TLS</span></span>                                                                         | <span data-ttu-id="66756-130">39</span><span class="sxs-lookup"><span data-stu-id="66756-130">39</span></span>   |
| <span data-ttu-id="66756-131">RFC 4346</span><span class="sxs-lookup"><span data-stu-id="66756-131">RFC 4346</span></span> | <span data-ttu-id="66756-132">Protocolo de Segurança da Camada de Transporte (TLS) Versão 1.1</span><span class="sxs-lookup"><span data-stu-id="66756-132">The Transport Layer Security (TLS) Protocol Version 1.1</span></span>                                                     | <span data-ttu-id="66756-133">19</span><span class="sxs-lookup"><span data-stu-id="66756-133">19</span></span>   |
| <span data-ttu-id="66756-134">RFC 5246</span><span class="sxs-lookup"><span data-stu-id="66756-134">RFC 5246</span></span> | <span data-ttu-id="66756-135">Protocolo de Segurança da Camada de Transporte (TLS) Versão 1.2</span><span class="sxs-lookup"><span data-stu-id="66756-135">The Transport Layer Security (TLS) Protocol Version 1.2</span></span>                                                     | <span data-ttu-id="66756-136">19</span><span class="sxs-lookup"><span data-stu-id="66756-136">19</span></span>   |
| <span data-ttu-id="66756-137">RFC 5280</span><span class="sxs-lookup"><span data-stu-id="66756-137">RFC 5280</span></span> | <span data-ttu-id="66756-138">Certificados X.509 PKI (v3)</span><span class="sxs-lookup"><span data-stu-id="66756-138">X.509 PKI Certificates (v3)</span></span>                                                                                 | <span data-ttu-id="66756-139">41</span><span class="sxs-lookup"><span data-stu-id="66756-139">41</span></span>   |
| <span data-ttu-id="66756-140">RFC 5746</span><span class="sxs-lookup"><span data-stu-id="66756-140">RFC 5746</span></span> | <span data-ttu-id="66756-141">Extensão de indicação de renegociação da extensão da indicação de renegociação da camada de transporte (TLS)</span><span class="sxs-lookup"><span data-stu-id="66756-141">Transport Layer Security (TLS) Renegotiation Indication Extension</span></span>                                           |      |
| <span data-ttu-id="66756-142">RFC 5869</span><span class="sxs-lookup"><span data-stu-id="66756-142">RFC 5869</span></span> | <span data-ttu-id="66756-143">Função de derivação da chave de extração e expansão baseada em HMAC (HKDF)</span><span class="sxs-lookup"><span data-stu-id="66756-143">HMAC-based Extract-and-Expand Key Derivation Function (HKDF)</span></span>                                                | <span data-ttu-id="66756-144">19</span><span class="sxs-lookup"><span data-stu-id="66756-144">19</span></span>   |
| <span data-ttu-id="66756-145">RFC 6066<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="66756-145">RFC 6066<sup>1</sup></span></span> | <span data-ttu-id="66756-146">Extensões de segurança da camada de transporte (TLS): Definições de extensão</span><span class="sxs-lookup"><span data-stu-id="66756-146">Transport Layer Security (TLS) Extensions: Extension Definitions</span></span>                                            | <span data-ttu-id="66756-147">19</span><span class="sxs-lookup"><span data-stu-id="66756-147">19</span></span>   |
| <span data-ttu-id="66756-148">RFC 6234</span><span class="sxs-lookup"><span data-stu-id="66756-148">RFC 6234</span></span> | <span data-ttu-id="66756-149">Us Secure Hash Algorithms (SHA e SHA-based HMAC e HKDF)</span><span class="sxs-lookup"><span data-stu-id="66756-149">US Secure Hash Algorithms (SHA and SHA-based HMAC and HKDF)</span></span>                                                 | <span data-ttu-id="66756-150">33</span><span class="sxs-lookup"><span data-stu-id="66756-150">33</span></span>   |
| <span data-ttu-id="66756-151">RFC 8443</span><span class="sxs-lookup"><span data-stu-id="66756-151">RFC 8443</span></span> | <span data-ttu-id="66756-152">Criptografia da Curva Elíptica (ECC) Cipher Suites for Transport Layer Security (TLS) Versões 1.2 e Anterior</span><span class="sxs-lookup"><span data-stu-id="66756-152">Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS) Versions 1.2 and Earlier</span></span> |      |
| <span data-ttu-id="66756-153">RFC 8446</span><span class="sxs-lookup"><span data-stu-id="66756-153">RFC 8446</span></span> | <span data-ttu-id="66756-154">Protocolo de Segurança da Camada de Transporte (TLS) Versão 1.3</span><span class="sxs-lookup"><span data-stu-id="66756-154">The Transport Layer Security (TLS) Protocol Version 1.3</span></span>                                                     | <span data-ttu-id="66756-155">19</span><span class="sxs-lookup"><span data-stu-id="66756-155">19</span></span>   |

1. <span data-ttu-id="66756-156">A partir da versão 6.0 apenas a extensão de indicação de nome do servidor (SNI) do RFC 6066 está totalmente suportada.</span><span class="sxs-lookup"><span data-stu-id="66756-156">As of version 6.0 only the Server Name Indication (SNI) extension from RFC 6066 is fully supported.</span></span>

## <a name="netx-secure-requirements"></a><span data-ttu-id="66756-157">Requisitos de segurança NetX</span><span class="sxs-lookup"><span data-stu-id="66756-157">NetX Secure Requirements</span></span>

<span data-ttu-id="66756-158">Para funcionar corretamente, a biblioteca de tempo de execução NetX Secure requer que já tenha sido criada uma instância IP NetX.</span><span class="sxs-lookup"><span data-stu-id="66756-158">In order to function properly, the NetX Secure run-time library requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="66756-159">Além disso, e dependendo da aplicação, serão necessários um ou mais Certificados Digitais X.509 codificados pela DER, quer para identificar uma instância TLS, quer para verificar certificados provenientes de um anfitrião remoto.</span><span class="sxs-lookup"><span data-stu-id="66756-159">In addition, and depending on the application, one or more DER-encoded X.509 Digital Certificates will be required, either to identify a TLS instance or to verify certificates coming from a remote host.</span></span> <span data-ttu-id="66756-160">O pacote NetX Secure não tem mais requisitos.</span><span class="sxs-lookup"><span data-stu-id="66756-160">The NetX Secure package has no further requirements.</span></span>

## <a name="netx-secure-constraints"></a><span data-ttu-id="66756-161">Restrições de segurança NetX</span><span class="sxs-lookup"><span data-stu-id="66756-161">NetX Secure Constraints</span></span>

<span data-ttu-id="66756-162">O protocolo NetX Secure implementa os requisitos do RFC 5246 Standard(s) para TLS 1.2 e RFC 8446 para TLS 1.3, bem como fornecer opcional (desativado por padrão) retrocompatibilidade com RFCs 4346 (TLS 1.1) e 2246 (TLS 1.0).</span><span class="sxs-lookup"><span data-stu-id="66756-162">The NetX Secure protocol implements the requirements of the RFC 5246 Standard(s) for TLS 1.2 and RFC 8446 for TLS 1.3, as well as providing optional (disabled by default) backwards-compatibility with RFCs 4346 (TLS 1.1) and 2246 (TLS 1.0).</span></span> <span data-ttu-id="66756-163">No entanto, existem os seguintes constrangimentos:</span><span class="sxs-lookup"><span data-stu-id="66756-163">However, there are the following constraints:</span></span>

- <span data-ttu-id="66756-164">Apenas os cifrasuites que utilizam SHA-256 são suportados para TLS 1.2 e TLS 1.3.</span><span class="sxs-lookup"><span data-stu-id="66756-164">Only ciphersuites using SHA-256 are supported for TLS 1.2 and TLS 1.3.</span></span> <span data-ttu-id="66756-165">Nas versões anteriores ao TLS 1.2, o aperto de mão TLS utiliza uma rotina de hashing fixa para verificar se as mensagens de aperto de mão TLS não são adulteradas.</span><span class="sxs-lookup"><span data-stu-id="66756-165">In versions prior to TLS 1.2, the TLS handshake uses a fixed hashing routine to verify TLS handshake messages are not tampered with.</span></span> <span data-ttu-id="66756-166">Começando pela versão 1.2, o aperto de mão utiliza a rotina de haxixe fornecida com a cifrasuite.</span><span class="sxs-lookup"><span data-stu-id="66756-166">Starting with version 1.2, the handshake uses the hash routine provided with the ciphersuite.</span></span> <span data-ttu-id="66756-167">O TLS não sabe com antecedência qual a rotina de haxixe que será usada e deve cache as mensagens de aperto de mão.</span><span class="sxs-lookup"><span data-stu-id="66756-167">TLS does not know ahead of time what hash routine will be used and must cache the handshake messages.</span></span> <span data-ttu-id="66756-168">Ao fixar o hash a SHA-256, o NetX Secure TLS pode funcionar com uma pegada RAM menor do que outras implementações de TLS.</span><span class="sxs-lookup"><span data-stu-id="66756-168">By fixing the hash to SHA-256, NetX Secure TLS can function with a smaller RAM footprint than other TLS implementations.</span></span> <span data-ttu-id="66756-169">Esta limitação será removida numa versão futura assim que a utilização da memória possa ser devidamente abordada.</span><span class="sxs-lookup"><span data-stu-id="66756-169">This limitation will be removed in a future version once the memory usage can be properly addressed.</span></span> <span data-ttu-id="66756-170">\*NOTA IMPORTANTE: Esta limitação aplica-se **apenas** à escolha cifrassuita.</span><span class="sxs-lookup"><span data-stu-id="66756-170">\*IMPORTANT NOTE: This limitation applies **only** to ciphersuite choice.</span></span> <span data-ttu-id="66756-171">As assinaturas de certificado X.509 não estão sujeitas à mesma limitação e qualquer uma das rotinas de haxixe suportadas pode ser utilizada.</span><span class="sxs-lookup"><span data-stu-id="66756-171">X.509 certificate signatures are not subject to the same limitation and any of the supported hash routines may be used.</span></span>
- <span data-ttu-id="66756-172">Devido à natureza dos dispositivos incorporados, algumas aplicações podem não ter recursos para suportar o tamanho máximo de registo de TLS de 16KB.</span><span class="sxs-lookup"><span data-stu-id="66756-172">Due to the nature of embedded devices, some applications may not have the resources to support the maximum TLS record size of 16KB.</span></span> <span data-ttu-id="66756-173">O NetX Secure pode lidar com registos de 16KB em dispositivos com recursos suficientes.</span><span class="sxs-lookup"><span data-stu-id="66756-173">NetX Secure can handle 16KB records on devices with sufficient resources.</span></span> <span data-ttu-id="66756-174">O tampão de remontagem TLS (ver referência API para *nx_secure_tls_session_packet_buffer_set*) **pode** ser definido para um tamanho inferior a 16KB em risco de problemas de interoperabilidade.</span><span class="sxs-lookup"><span data-stu-id="66756-174">The TLS reassembly buffer (see API reference for *nx_secure_tls_session_packet_buffer_set*) **may** be set to a size smaller than 16KB at the risk of interoperability problems.</span></span> <span data-ttu-id="66756-175">Se for recebido um registo TLS válido que seja maior do que o tampão de remontagem, o NetX Secure TLS abortará a sessão de TLS com um erro.</span><span class="sxs-lookup"><span data-stu-id="66756-175">If a valid TLS record is received that is larger than the reassembly buffer, NetX Secure TLS will abort the TLS session with an error.</span></span> <span data-ttu-id="66756-176">Em geral, o tampão deve ser sempre regulado para pelo menos 18KB (tamanho de registo 16KB TLS + 2KB para enchimento de encriptação) e apenas reduzido em configurações controladas (por exemplo, o hospedeiro remoto garante um tamanho máximo de registo TLS).</span><span class="sxs-lookup"><span data-stu-id="66756-176">In general, the buffer should always be set to at least 18KB (16KB TLS record size + 2KB for encryption padding) and only made smaller in controlled settings (e.g. the remote host guarantees a maximum TLS record size).</span></span>
  > [!NOTE]
  > <span data-ttu-id="66756-177">Em geral, o tampão de remontagem do pacote nunca deve ser menor do que o tamanho máximo de registo TLS.</span><span class="sxs-lookup"><span data-stu-id="66756-177">In general, the packet reassembly buffer should never be smaller than the TLS maximum record size.</span></span> <span data-ttu-id="66756-178">No entanto, se as características do hospedeiro remoto forem bem conhecidas (por exemplo, num sistema completamente fechado), o tamanho pode ser reduzido para recuperar algum espaço RAM.</span><span class="sxs-lookup"><span data-stu-id="66756-178">However, if the characteristics of the remote host are well known (e.g. in a completely closed system) the size can be reduced to regain some RAM space.</span></span>
- <span data-ttu-id="66756-179">Verificação mínima do certificado.</span><span class="sxs-lookup"><span data-stu-id="66756-179">Minimal certificate verification.</span></span> <span data-ttu-id="66756-180">O NetX Secure efetuará a verificação básica da cadeia X.509 num certificado para garantir que o certificado é válido e assinado por uma Autoridade de Certificados de confiança, e pode fornecer o certificado Nome Comum para o pedido de comparação com o Top-Level Nome de Domínio do anfitrião remoto.</span><span class="sxs-lookup"><span data-stu-id="66756-180">NetX Secure will perform basic X.509 chain verification on a certificate to assure that the certificate is valid and signed by a trusted Certificate Authority, and can provide the certificate Common Name for the application to compare against the Top-Level Domain Name of the remote host.</span></span> <span data-ttu-id="66756-181">Se estiver disponível um relógio em tempo real, pode ser utilizado para verificar a data de validade do certificado (ver API nx_secure_tls_session_time_function_set).</span><span class="sxs-lookup"><span data-stu-id="66756-181">If a real-time clock is available, it can be used to verify the certificate expiration date (see API nx_secure_tls_session_time_function_set).</span></span> <span data-ttu-id="66756-182">No entanto, a verificação das extensões de certificados e outros dados é da responsabilidade do implementador de aplicações.</span><span class="sxs-lookup"><span data-stu-id="66756-182">However, verification of certificate extensions and other data is the responsibility of the application implementer.</span></span>
- <span data-ttu-id="66756-183">A criptografia baseada em software é intensiva em processador.</span><span class="sxs-lookup"><span data-stu-id="66756-183">Software-based cryptography is processor-intensive.</span></span> <span data-ttu-id="66756-184">As rotinas criptográficas baseadas em software NetX Secure foram otimizadas para o desempenho, mas dependendo da potência do processador-alvo, esse desempenho pode resultar em operações muito longas.</span><span class="sxs-lookup"><span data-stu-id="66756-184">The NetX Secure software-based cryptographic routines have been optimized for performance, but depending on the power of the target processor, that performance may result in very long operations.</span></span> <span data-ttu-id="66756-185">Quando a criptografia baseada em hardware estiver disponível, deve ser usada para um desempenho ideal do NetX Secure TLS.</span><span class="sxs-lookup"><span data-stu-id="66756-185">When hardware-based cryptography is available, it should be used for optimal performance of NetX Secure TLS.</span></span>
- <span data-ttu-id="66756-186">A fragmentação do TLS Handshake Record não é suportada.</span><span class="sxs-lookup"><span data-stu-id="66756-186">TLS Handshake Record fragmentation is unsupported.</span></span> <span data-ttu-id="66756-187">Se certas mensagens de gravação de aperto de mão TLS forem demasiado grandes, podem ser divididas em vários registos TLS – o NetX Secure TLS trata atualmente isto como um erro.</span><span class="sxs-lookup"><span data-stu-id="66756-187">If certain TLS handshake record messages are too large, they may be split across multiple TLS records – NetX Secure TLS currently treats this as an error.</span></span> <span data-ttu-id="66756-188">Os requisitos de memória para sistemas incorporados significam que a mensagem de registo de aperto de mão maior provavelmente não pode ser manuseada de qualquer forma, mas a limitação pode levar a erros ao comunicar com certos anfitriões TLS que usam cadeias de certificados excessivamente grandes.</span><span class="sxs-lookup"><span data-stu-id="66756-188">The memory requirements for embedded systems mean that the larger handshake record message likely cannot be handled anyway but the limitation could lead to errors when communicating with certain TLS hosts that use excessively large certificate chains.</span></span>
- <span data-ttu-id="66756-189">O servidor TLS não suporta a seleção dinâmica de certificados quando existem vários certificados na loja local.</span><span class="sxs-lookup"><span data-stu-id="66756-189">TLS server does not support dynamic certificate selection when there are multiple certificates in the local store.</span></span> 
- <span data-ttu-id="66756-190">Não é observado o certificado X509 KeyUsage.</span><span class="sxs-lookup"><span data-stu-id="66756-190">X509 Certificate KeyUsage is not observed.</span></span> 
- <span data-ttu-id="66756-191">As cifrasuites baseadas no ECDH não são apoiadas.</span><span class="sxs-lookup"><span data-stu-id="66756-191">ECDH-based ciphersuites are not supported.</span></span> <span data-ttu-id="66756-192">Use o ECDHE em vez disso.</span><span class="sxs-lookup"><span data-stu-id="66756-192">Use ECDHE instead.</span></span>
