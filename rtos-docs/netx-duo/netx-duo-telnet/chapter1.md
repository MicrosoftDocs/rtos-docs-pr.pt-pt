---
title: Capítulo 1 - Introdução ao Azure RTOS NetX Duo Telnet
description: O Azure RTOS NetX Duo Telnet é um protocolo concebido para transferir comandos e respostas entre dois nós na Internet.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: d25f5ca4a7bf1ecf4c3d0c68ef6c8aeda7800098
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104825735"
---
# <a name="chapter-1---introduction-to-the-azure-rtos-netx-duo-telnet"></a><span data-ttu-id="346d4-103">Capítulo 1 - Introdução ao Azure RTOS NetX Duo Telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-103">Chapter 1 - Introduction to the Azure RTOS NetX Duo Telnet</span></span>

<span data-ttu-id="346d4-104">O Azure RTOS NetX Duo Telnet é um protocolo concebido para transferir comandos e respostas entre dois nós na Internet.</span><span class="sxs-lookup"><span data-stu-id="346d4-104">The Azure RTOS NetX Duo Telnet is a protocol designed for transferring commands and responses between two nodes on the Internet.</span></span> <span data-ttu-id="346d4-105">A Telnet é um protocolo simples que utiliza serviços fiáveis de Protocolo de Controlo de Transmissão (TCP) para executar a sua função de transferência.</span><span class="sxs-lookup"><span data-stu-id="346d4-105">Telnet is a simple protocol that utilizes reliable Transmission Control Protocol (TCP) services to perform its transfer function.</span></span> <span data-ttu-id="346d4-106">Por causa disso, a Telnet é um protocolo de transferência altamente fiável.</span><span class="sxs-lookup"><span data-stu-id="346d4-106">Because of this, Telnet is a highly reliable transfer protocol.</span></span> <span data-ttu-id="346d4-107">Telnet é também um dos protocolos de aplicação mais utilizados.</span><span class="sxs-lookup"><span data-stu-id="346d4-107">Telnet is also one of the most used application protocols.</span></span>

## <a name="telnet-requirements"></a><span data-ttu-id="346d4-108">Requisitos telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-108">Telnet Requirements</span></span>

<span data-ttu-id="346d4-109">Para funcionar corretamente, o pacote NetX Duo Telnet requer que já tenha sido criada uma instância IP NetX.</span><span class="sxs-lookup"><span data-stu-id="346d4-109">In order to function properly, the NetX Duo Telnet package requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="346d4-110">Além disso, a TCP deve ser ativada nessa mesma instância de PI.</span><span class="sxs-lookup"><span data-stu-id="346d4-110">In addition, TCP must be enabled on that same IP instance.</span></span> <span data-ttu-id="346d4-111">A parte do Cliente Telnet do pacote NetX Duo Telnet não tem requisitos adicionais.</span><span class="sxs-lookup"><span data-stu-id="346d4-111">The Telnet Client portion of the NetX Duo Telnet package has no further requirements.</span></span>

<span data-ttu-id="346d4-112">A parte telnet Server do pacote NetX Duo Telnet tem um requisito adicional.</span><span class="sxs-lookup"><span data-stu-id="346d4-112">The Telnet Server portion of the NetX Duo Telnet package has one additional requirement.</span></span> <span data-ttu-id="346d4-113">Requer acesso total à *conhecida porta 23 da* TCP para lidar com todos os pedidos da Client Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-113">It requires complete access to TCP *well-known port 23* for handling all Client Telnet requests.</span></span>

## <a name="telnet-constraints"></a><span data-ttu-id="346d4-114">Restrições telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-114">Telnet Constraints</span></span> 

<span data-ttu-id="346d4-115">O protocolo NetX Duo Telnet implementa a norma Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-115">The NetX Duo Telnet protocol implements the Telnet standard.</span></span> <span data-ttu-id="346d4-116">No entanto, a interpretação e resposta dos comandos Telnet, indicada por um byte com o valor de 255, é da responsabilidade da aplicação.</span><span class="sxs-lookup"><span data-stu-id="346d4-116">However,the interpretation and response of Telnet commands, indicated by a byte with the value of 255, is the responsibility of the application.</span></span> <span data-ttu-id="346d4-117">Os vários comandos e parâmetros de comando da Telnet são definidos nos ficheiros *nxd_telnet_client.h e nxd_telnet_server.h.*</span><span class="sxs-lookup"><span data-stu-id="346d4-117">The various Telnet commands and command parameters are defined in the *nxd_telnet_client.h and nxd_telnet_server.h* files.</span></span>

## <a name="telnet-communication"></a><span data-ttu-id="346d4-118">Comunicação Telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-118">Telnet Communication</span></span>

<span data-ttu-id="346d4-119">Como mencionado anteriormente, o Telnet Server utiliza a *conhecida porta TCP 23* para fazer os pedidos do Cliente em campo.</span><span class="sxs-lookup"><span data-stu-id="346d4-119">As mentioned previously, the Telnet Server utilizes the *well-known TCP port 23* to field Client requests.</span></span> <span data-ttu-id="346d4-120">Os Clientes Telnet podem utilizar qualquer porta TCP disponível.</span><span class="sxs-lookup"><span data-stu-id="346d4-120">Telnet Clients may use any available TCP port.</span></span>

## <a name="telnet-authentication"></a><span data-ttu-id="346d4-121">Autenticação Telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-121">Telnet Authentication</span></span>

<span data-ttu-id="346d4-122">A autenticação telnet é da responsabilidade da função de retorno do Telnet Server da aplicação.</span><span class="sxs-lookup"><span data-stu-id="346d4-122">Telnet authentication is the responsibility of the application’s Telnet Server callback function.</span></span> <span data-ttu-id="346d4-123">A chamada "nova ligação" do Telnet Server da aplicação normalmente levaria o Cliente a obter nome e/ou senha.</span><span class="sxs-lookup"><span data-stu-id="346d4-123">The application’s Telnet Server “new connection” callback would typically prompt the Client for name and/or password.</span></span> <span data-ttu-id="346d4-124">O Cliente seria então responsável pelo fornecimento da informação.</span><span class="sxs-lookup"><span data-stu-id="346d4-124">The Client would then be responsible for providing the information.</span></span> <span data-ttu-id="346d4-125">O Servidor processaria então a informação na chamada "receber dados".</span><span class="sxs-lookup"><span data-stu-id="346d4-125">The Server would then process the information in the “receive data” callback.</span></span> <span data-ttu-id="346d4-126">É aqui que o código do Servidor de aplicação teria de autenticar as informações e decidir se é ou não válido.</span><span class="sxs-lookup"><span data-stu-id="346d4-126">This is where the application Server code would have to authenticate the information and decide whether or not it is valid.</span></span>

## <a name="telnet-new-connection-callback"></a><span data-ttu-id="346d4-127">Telnet New Connection Callback</span><span class="sxs-lookup"><span data-stu-id="346d4-127">Telnet New Connection Callback</span></span>

<span data-ttu-id="346d4-128">O NetX Duo Telnet Server chama a função de chamada especificada da aplicação sempre que um novo pedido do Cliente Telnet é recebido.</span><span class="sxs-lookup"><span data-stu-id="346d4-128">The NetX Duo Telnet Server calls the application specified callback function whenever a new Telnet Client request is received.</span></span> <span data-ttu-id="346d4-129">A aplicação especifica a função de retorno quando o Telnet Server é criado através da função ***nx_telnet_server_create.***</span><span class="sxs-lookup"><span data-stu-id="346d4-129">The application specifies the callback function when the Telnet Server is created via the ***nx_telnet_server_create*** function.</span></span> <span data-ttu-id="346d4-130">As ações típicas da chamada de "nova ligação" incluem o envio de um banner ou solicitação ao Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-130">Typical actions of the “new connection” callback include sending a banner or prompt to the Client.</span></span> <span data-ttu-id="346d4-131">Isto poderia muito bem incluir um pedido para informações de login.</span><span class="sxs-lookup"><span data-stu-id="346d4-131">This could very well include a prompt for login information.</span></span>

### <a name="prototype"></a><span data-ttu-id="346d4-132">Prototype</span><span class="sxs-lookup"><span data-stu-id="346d4-132">Prototype</span></span>

```c
void  telnet_new_connection(NX_TELNET_SERVER *server_ptr, 
                            UINT logical_connection);
```

### <a name="input-parameters"></a><span data-ttu-id="346d4-133">Parâmetros de Entrada</span><span class="sxs-lookup"><span data-stu-id="346d4-133">Input Parameters</span></span>

- <span data-ttu-id="346d4-134">**server_ptr**: Ponteiro para o chamado Telnet Server.</span><span class="sxs-lookup"><span data-stu-id="346d4-134">**server_ptr**: Pointer to the calling Telnet Server.</span></span>
- <span data-ttu-id="346d4-135">**logical_connection**: A ligação lógica interna para o Servidor Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-135">**logical_connection**: The internal logical connection for the Telnet Server.</span></span> <span data-ttu-id="346d4-136">Isto pode ser usado pela aplicação como um índice em tampãos e/ou estruturas de dados específicas para cada ligação do Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-136">This can be used by the application as an index into buffers and/or data structures specific for each Client connection.</span></span> <span data-ttu-id="346d4-137">O seu valor varia entre 0 e NX_TELNET_MAX_CLIENTS - 1.</span><span class="sxs-lookup"><span data-stu-id="346d4-137">Its value ranges from 0 through NX_TELNET_MAX_CLIENTS - 1.</span></span>

## <a name="telnet-receive-data-callback"></a><span data-ttu-id="346d4-138">Telnet Receber Chamada de Dados</span><span class="sxs-lookup"><span data-stu-id="346d4-138">Telnet Receive Data Callback</span></span>

<span data-ttu-id="346d4-139">O NetX Duo Telnet Server chama a função de chamada especificada da aplicação sempre que um novo dado do Cliente Telnet é recebido.</span><span class="sxs-lookup"><span data-stu-id="346d4-139">The NetX Duo Telnet Server calls the application specified callback function whenever a new Telnet Client data is received.</span></span> <span data-ttu-id="346d4-140">A aplicação especifica a função de retorno quando o Telnet Server é criado através da função ***nx_telnet_server_create.***</span><span class="sxs-lookup"><span data-stu-id="346d4-140">The application specifies the callback function when the Telnet Server is created via the ***nx_telnet_server_create*** function.</span></span> <span data-ttu-id="346d4-141">As ações típicas da chamada de "nova ligação" incluem ecoar os dados de volta e/ou analisar os dados e fornecer dados como resultado da interpretação de um comando do cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-141">Typical actions of the “new connection” callback include echoing the data back and/or parsing the data and providing data as a result of interpreting a command from the client.</span></span>

<span data-ttu-id="346d4-142">Note que esta rotina de retorno também deve libertar o pacote fornecido.</span><span class="sxs-lookup"><span data-stu-id="346d4-142">Note that this callback routine must also release the supplied packet.</span></span>

### <a name="prototype"></a><span data-ttu-id="346d4-143">Prototype</span><span class="sxs-lookup"><span data-stu-id="346d4-143">Prototype</span></span>

```c
void  telnet_receive_data(NX_TELNET_SERVER *server_ptr, 
                          UINT logical_connection, NX_PACKET *packet_ptr);
```
### <a name="input-parameters"></a><span data-ttu-id="346d4-144">Parâmetros de Entrada</span><span class="sxs-lookup"><span data-stu-id="346d4-144">Input Parameters</span></span>

- <span data-ttu-id="346d4-145">**server_ptr**: Ponteiro para o chamado Telnet Server.</span><span class="sxs-lookup"><span data-stu-id="346d4-145">**server_ptr**: Pointer to the calling Telnet Server.</span></span>
- <span data-ttu-id="346d4-146">**logical_connection**: A ligação lógica interna para o Servidor Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-146">**logical_connection**: The internal logical connection for the Telnet Server.</span></span> <span data-ttu-id="346d4-147">Isto pode ser usado pela aplicação como um índice em tampãos e/ou estruturas de dados específicas para cada ligação do Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-147">This can be used by the application as an index into buffers and/or data structures specific for each Client connection.</span></span> <span data-ttu-id="346d4-148">O seu valor varia entre 0 e NX_TELNET_MAX_CLIENTS - 1.</span><span class="sxs-lookup"><span data-stu-id="346d4-148">Its value ranges from 0 through NX_TELNET_MAX_CLIENTS - 1.</span></span>
- <span data-ttu-id="346d4-149">**packet_ptr**: Ponteiro para pacote que contém os dados do Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-149">**packet_ptr**: Pointer to packet containing the data from the Client.</span></span>

## <a name="telnet-end-connection-callback"></a><span data-ttu-id="346d4-150">Chamada de ligação telnet end</span><span class="sxs-lookup"><span data-stu-id="346d4-150">Telnet End Connection Callback</span></span>

<span data-ttu-id="346d4-151">O NetX Duo Telnet Server chama a função de retorno especificado da aplicação sempre que um Cliente Telnet termina a ligação.</span><span class="sxs-lookup"><span data-stu-id="346d4-151">The NetX Duo Telnet Server calls the application specified callback function whenever a Telnet Client ends the connection.</span></span> <span data-ttu-id="346d4-152">A aplicação especifica a função de retorno quando o Telnet Server é criado através da função ***nx_telnet_server_create.***</span><span class="sxs-lookup"><span data-stu-id="346d4-152">The application specifies the callback function when the Telnet Server is created via the ***nx_telnet_server_create*** function.</span></span> <span data-ttu-id="346d4-153">As ações típicas da chamada de "ligação final" incluem a limpeza de quaisquer estruturas de dados específicas do Cliente associadas à ligação lógica.</span><span class="sxs-lookup"><span data-stu-id="346d4-153">Typical actions of the “end connection” callback include cleaning up any Client specific data structures associated with the logical connection.</span></span>

### <a name="prototype"></a><span data-ttu-id="346d4-154">Prototype</span><span class="sxs-lookup"><span data-stu-id="346d4-154">Prototype</span></span>
```c
void  telnet_end_connection(NX_TELNET_SERVER *server_ptr, 
                            UINT logical_connection);
```

### <a name="input-parameters"></a><span data-ttu-id="346d4-155">Parâmetros de Entrada</span><span class="sxs-lookup"><span data-stu-id="346d4-155">Input Parameters</span></span>

- <span data-ttu-id="346d4-156">**server_ptr** Ponteiro para o chamado Telnet Server.</span><span class="sxs-lookup"><span data-stu-id="346d4-156">**server_ptr** Pointer to the calling Telnet Server.</span></span>
- <span data-ttu-id="346d4-157">**logical_connection** A ligação lógica interna para o Servidor Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-157">**logical_connection** The internal logical connection for the Telnet Server.</span></span> <span data-ttu-id="346d4-158">Isto pode ser usado pela aplicação como um índice em tampãos e/ou estruturas de dados específicas para cada ligação do Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-158">This can be used by the application as an index into buffers and/or data structures specific for each Client connection.</span></span> <span data-ttu-id="346d4-159">O seu valor varia entre 0 e NX_TELNET_MAX_CLIENTS - 1.</span><span class="sxs-lookup"><span data-stu-id="346d4-159">Its value ranges from 0 through NX_TELNET_MAX_CLIENTS - 1.</span></span>

## <a name="telnet-option-negotiation"></a><span data-ttu-id="346d4-160">Negociação de Opção Telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-160">Telnet Option Negotiation</span></span>

<span data-ttu-id="346d4-161">O NetX Duo Telnet Server suporta um conjunto limitado de opções Telnet, Echo e Suppress Go Ahead.</span><span class="sxs-lookup"><span data-stu-id="346d4-161">The NetX Duo Telnet Server supports a limited set of Telnet options, Echo and Suppress Go Ahead.</span></span>

<span data-ttu-id="346d4-162">Para ativar esta característica, o NX_TELNET_SERVER_OPTION_DISABLE não deve ser definido.</span><span class="sxs-lookup"><span data-stu-id="346d4-162">To enable this feature the NX_TELNET_SERVER_OPTION_DISABLE must not be defined.</span></span> <span data-ttu-id="346d4-163">Por defeito não está definido.</span><span class="sxs-lookup"><span data-stu-id="346d4-163">By default it is not defined.</span></span> <span data-ttu-id="346d4-164">O Telnet Server cria um pacote de pacotes no serviço *nx_telnet_server_create* a partir do qual atribui pacotes para envio de pedidos de opções telnet ao Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-164">The Telnet Server creates a packet pool in the *nx_telnet_server_create* service from which it allocates packets for sending telnet options requests to the Client.</span></span> <span data-ttu-id="346d4-165">Consulte "Opções de Configuração" para definir a carga útil do pacote (NX_TELNET_SERVER_PACKET_PAYLOAD) e o tamanho da piscina do pacote (NX_TELNET_SERVER_PACKET_POOL_SIZE) para este pacote.</span><span class="sxs-lookup"><span data-stu-id="346d4-165">See “Configuration Options” for setting the packet payload (NX_TELNET_SERVER_PACKET_PAYLOAD) and packet pool size (NX_TELNET_SERVER_PACKET_POOL_SIZE) for this packet pool.</span></span> <span data-ttu-id="346d4-166">Eliminará este pacote quando o serviço *nx_telnet_server_delete* for chamado.</span><span class="sxs-lookup"><span data-stu-id="346d4-166">It will delete this packet pool when the *nx_telnet_server_delete* service is called.</span></span>

<span data-ttu-id="346d4-167">Ao estabelecer uma ligação com o Cliente Telnet, enviará este conjunto de opções telnet ao Cliente se não tiver recebido pedidos de opção do Cliente:</span><span class="sxs-lookup"><span data-stu-id="346d4-167">Upon making a connection with the Telnet Client, it will send out this set of telnet options to the Client if it has not received option requests from the Client:</span></span>

- <span data-ttu-id="346d4-168">vai ecoar</span><span class="sxs-lookup"><span data-stu-id="346d4-168">will echo</span></span>
- <span data-ttu-id="346d4-169">não ecoar</span><span class="sxs-lookup"><span data-stu-id="346d4-169">dont echo</span></span>
- <span data-ttu-id="346d4-170">vai sga</span><span class="sxs-lookup"><span data-stu-id="346d4-170">will sga</span></span>

<span data-ttu-id="346d4-171">Quando recebe dados telnet do Cliente, o Telnet Server verifica se o primeiro byte é o código "IAC".</span><span class="sxs-lookup"><span data-stu-id="346d4-171">When it receives Telnet data from the Client, the Telnet Server checks if the first byte is the “IAC” code.</span></span> <span data-ttu-id="346d4-172">Em caso afirmativo, processará todas as opções no pacote Cliente.</span><span class="sxs-lookup"><span data-stu-id="346d4-172">If so, it will process all the options in the Client packet.</span></span> <span data-ttu-id="346d4-173">As opções que não constam da lista acima são ignoradas.</span><span class="sxs-lookup"><span data-stu-id="346d4-173">Options not in the list above are ignored.</span></span>

<span data-ttu-id="346d4-174">Por predefinição, o Telnet Server cria o seu próprio pool de pacotes internos se NX_TELNET_SERVER_OPTION_DISABLE não estiver definido e precisar de transmitir comandos de opção Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-174">By default, the Telnet Server creates its own internal packet pool if NX_TELNET_SERVER_OPTION_DISABLE is not defined and it needs to transmit Telnet option commands.</span></span> <span data-ttu-id="346d4-175">A piscina de pacotes Telnet Server é definida por NX_TELNET_SERVER_PACKET_PAYLOAD e NX_TELNET_SERVER_PACKET_POOLSIZE.</span><span class="sxs-lookup"><span data-stu-id="346d4-175">The Telnet Server packet pool is defined by NX_TELNET_SERVER_PACKET_PAYLOAD and NX_TELNET_SERVER_PACKET_POOLSIZE.</span></span> <span data-ttu-id="346d4-176">Se, no entanto, NX_TELNET_SERVER_USER_CREATE_PACKET_POOL for definida, a aplicação deve criar a piscina de pacotes telnet Server e defini-la como a piscina de pacotes do Telnet Server chamando *_nx_telnet_server_packet_pool_set*.</span><span class="sxs-lookup"><span data-stu-id="346d4-176">If, however, NX_TELNET_SERVER_USER_CREATE_PACKET_POOL is defined, the application must create the Telnet Server packet pool and set it as the Telnet Server packet pool by calling *_nx_telnet_server_packet_pool_set*.</span></span> <span data-ttu-id="346d4-177">Consulte o capítulo 3 "Descrição dos Serviços Telnet" para obter mais detalhes sobre esta função.</span><span class="sxs-lookup"><span data-stu-id="346d4-177">See Chapter 3 “Description of Telnet Services” for more details about this function.</span></span>

<span data-ttu-id="346d4-178">Ao contrário do NetX Duo Telnet Server, o fio de tarefa do Cliente Telnet Duo NetX não envia e responde automaticamente às opções recebidas do Servidor Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-178">Unlike the NetX Duo Telnet Server, the NetX Duo Telnet Client task thread does not automatically send and respond to received options from the Telnet Server.</span></span> <span data-ttu-id="346d4-179">Isto deve ser feito pela aplicação Do Cliente Telnet.</span><span class="sxs-lookup"><span data-stu-id="346d4-179">This must be done by the Telnet Client application.</span></span>

## <a name="telnet-multi-thread-support"></a><span data-ttu-id="346d4-180">Suporte multi-thread Telnet</span><span class="sxs-lookup"><span data-stu-id="346d4-180">Telnet Multi-Thread Support</span></span>

<span data-ttu-id="346d4-181">Os serviços do Cliente NetX Duo Telnet podem ser chamados a partir de várias linhas simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="346d4-181">The NetX Duo Telnet Client services can be called from multiple threads simultaneously.</span></span> <span data-ttu-id="346d4-182">No entanto, ler ou escrever pedidos para uma determinada instância do Cliente Telnet deve ser feito em sequência a partir do mesmo fio.</span><span class="sxs-lookup"><span data-stu-id="346d4-182">However, read or write requests for a particular Telnet Client instance should be done in sequence from the same thread.</span></span>

## <a name="telnet-rfcs"></a><span data-ttu-id="346d4-183">Telnet RFCs</span><span class="sxs-lookup"><span data-stu-id="346d4-183">Telnet RFCs</span></span>

<span data-ttu-id="346d4-184">NetX Duo Telnet está em conformidade com RFC854 e RFCs relacionados.</span><span class="sxs-lookup"><span data-stu-id="346d4-184">NetX Duo Telnet is compliant with RFC854 and related RFCs.</span></span>
