---
title: Capítulo 1 - Introdução ao Cliente DNS duo Azure RTOS NetX Duo
description: O DNS fornece uma base de dados distribuída que contém mapeamento entre nomes de domínio e endereços IP físicos.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 4c07d6e3183d421c637874dcdeff3767554fca78
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826024"
---
# <a name="chapter-1---introduction-to-the-azure-rtos-netx-duo-dns-client"></a><span data-ttu-id="d5ceb-103">Capítulo 1 - Introdução ao Cliente DNS duo Azure RTOS NetX Duo</span><span class="sxs-lookup"><span data-stu-id="d5ceb-103">Chapter 1 - Introduction to the Azure RTOS NetX Duo DNS Client</span></span>

<span data-ttu-id="d5ceb-104">O DNS fornece uma base de dados distribuída que contém mapeamento entre nomes de domínio e endereços IP físicos.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-104">The DNS provides a distributed database that contains mapping between domain names and physical IP addresses.</span></span> <span data-ttu-id="d5ceb-105">A base de dados é referida como *distribuída* porque não existe uma única entidade na Internet que contenha o mapeamento completo.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-105">The database is referred to as *distributed* because there is no single entity on the Internet that contains the complete mapping.</span></span> <span data-ttu-id="d5ceb-106">Uma entidade que mantém uma parte do mapeamento é chamada de Servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-106">An entity that maintains a portion of the mapping is called a DNS Server.</span></span> <span data-ttu-id="d5ceb-107">A Internet é composta por numerosos Servidores DNS, cada um dos quais contém um subconjunto da base de dados.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-107">The Internet is composed of numerous DNS Servers, each of which contains a subset of the database.</span></span> <span data-ttu-id="d5ceb-108">Os Servidores DNS também respondem aos pedidos do Cliente DNS para informações de mapeamento de nome de domínio, apenas se o servidor tiver o mapeamento solicitado.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-108">DNS Servers also respond to DNS Client requests for domain name mapping information, only if the server has the requested mapping.</span></span>

<span data-ttu-id="d5ceb-109">O protocolo DNS Client para o NetX Duo fornece a aplicação com serviços para solicitar informações de mapeamento a partir de um ou mais Servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-109">The DNS Client protocol for NetX Duo provides the application with services to request mapping information from one or more DNS Servers.</span></span>

## <a name="dns-client-setup"></a><span data-ttu-id="d5ceb-110">Configuração do cliente DNS</span><span class="sxs-lookup"><span data-stu-id="d5ceb-110">DNS Client Setup</span></span>

<span data-ttu-id="d5ceb-111">Para funcionar corretamente, o pacote DNS Client requer que já tenha sido criada uma instância IP NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-111">In order to function properly, the DNS Client package requires that a NetX Duo IP instance has already been created.</span></span>

<span data-ttu-id="d5ceb-112">Após a criação do Cliente DNS, a aplicação deve adicionar um ou mais servidores DNS à lista de servidores mantida pelo Cliente DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-112">After creating the DNS Client, the application must add one or more DNS servers to the server list maintained by the DNS Client.</span></span> <span data-ttu-id="d5ceb-113">Para adicionar servidores DNS, a aplicação utiliza o serviço *nxd_dns_server_add.*</span><span class="sxs-lookup"><span data-stu-id="d5ceb-113">To add DNS servers, the application uses the *nxd_dns_server_add* service.</span></span> <span data-ttu-id="d5ceb-114">O serviço de clientes NetX Duo DNS *nx_dns_server_add também* pode ser usado para adicionar servidores.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-114">The NetX Duo DNS Client service *nx_dns_server_add* can also be used to add servers.</span></span> <span data-ttu-id="d5ceb-115">No entanto, apenas aceita endereços IPv4 e recomenda-se que os desenvolvedores utilizem o serviço *nxd_dns_server_add.*</span><span class="sxs-lookup"><span data-stu-id="d5ceb-115">However it only accepts IPv4 addresses and it is recommended that developers use the *nxd_dns_server_add* service instead.</span></span>

<span data-ttu-id="d5ceb-116">Se a opção NX_DNS_IP_GATEWAY_SERVER estiver ativada e o endereço de gateway de instância IP não for zero, o gateway de instância IP é automaticamente adicionado como o servidor principal de DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-116">If the NX_DNS_IP_GATEWAY_SERVER option is enabled, and the IP instance gateway address is non zero, the IP instance gateway is automatically added as the primary DNS server.</span></span> <span data-ttu-id="d5ceb-117">Se as informações do servidor DNS não forem conhecidas estáticamente, também pode ser obtida através do Protocolo de Configuração do Anfitrião Dinâmico (DHCP) para o NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-117">If DNS server information is not statically known, it may also be derived through the Dynamic Host Configuration Protocol (DHCP) for NetX Duo.</span></span> <span data-ttu-id="d5ceb-118">Consulte o Guia de Utilizador NETX Duo DHCP para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-118">Please refer to the NetX Duo DHCP User Guide for more information.</span></span>

<span data-ttu-id="d5ceb-119">O Cliente DNS requer um pacote de pacotes para transmitir mensagens DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-119">The DNS Client requires a packet pool for transmitting DNS messages.</span></span> <span data-ttu-id="d5ceb-120">Por predefinição, o Cliente DNS cria este pacote quando o serviço *nx_dns_create* é chamado.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-120">By default, the DNS Client creates this packet pool when the *nx_dns_create* service is called.</span></span> <span data-ttu-id="d5ceb-121">As opções de configuração NX_DNS_PACKET_PAYLOAD_UNALIGNED e NX_DNS_PACKET_POOL_SIZE permitem que a aplicação determine o tamanho da carga útil do pacote e o tamanho da piscina do pacote (por exemplo, número de pacotes) deste pacote de piscina, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-121">The configuration options NX_DNS_PACKET_PAYLOAD_UNALIGNED and NX_DNS_PACKET_POOL_SIZE allow the application to determine the packet payload and packet pool size (e.g. number of packets) of this packet pool respectively.</span></span> <span data-ttu-id="d5ceb-122">Estas opções são descritas na secção "Opções de Configuração" do Capítulo Dois.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-122">These options are described in section “Configuration Options” in Chapter Two.</span></span>

<span data-ttu-id="d5ceb-123">Uma alternativa ao Cliente DNS que cria o seu próprio pool de pacotes é a aplicação para criar o pool de pacotes e defini-lo como o pacote do Cliente DNS usando o serviço *nx_dns_packet_pool_set.*</span><span class="sxs-lookup"><span data-stu-id="d5ceb-123">An alternative to the DNS Client creating its own packet pool is for the application to create the packet pool and set it as the DNS Client’s packet pool using the *nx_dns_packet_pool_set* service.</span></span> <span data-ttu-id="d5ceb-124">Para tal, a opção NX_DNS_CLIENT_USER_CREATE_PACKET_POOL deve ser definida.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-124">To do so, the NX_DNS_CLIENT_USER_CREATE_PACKET_POOL option must be defined.</span></span> <span data-ttu-id="d5ceb-125">Esta opção também requer um pool de pacotes previamente criado usando *nx_packet_pool_create* como entrada do ponteiro do ponteiro do pacote para *nx_dns_packet_pool_set* .</span><span class="sxs-lookup"><span data-stu-id="d5ceb-125">This option also requires a previously created packet pool using *nx_packet_pool_create* as the packet pool pointer input to *nx_dns_packet_pool_set* .</span></span> <span data-ttu-id="d5ceb-126">Quando a instância do Cliente DNS é eliminada, a aplicação é responsável por eliminar o pacote de pacotes DNS Client se NX_DNS_CLIENT_USER_CREATE_PACKET_POOL estiver ativado se já não for necessário.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-126">When the DNS Client instance is deleted, the application is responsible for deleting the DNS Client packet pool if NX_DNS_CLIENT_USER_CREATE_PACKET_POOL is enabled if it is no longer needed.</span></span>

> [!NOTE] 
> <span data-ttu-id="d5ceb-127">Para aplicações que optam por fornecer a sua própria piscina de pacotes utilizando a opção NX_DNS_CLIENT_USER_CREATE_PACKET_POOL, o tamanho do pacote precisa de ser capaz de manter o tamanho máximo de massagem DNS (512 bytes) mais quartos para cabeçalho UDP, cabeçalho IPv4 ou IPv6, e o cabeçalho MAC.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-127">For applications choosing to provide its own packet pool using the NX_DNS_CLIENT_USER_CREATE_PACKET_POOL option, the packet size needs to be able to hold the DNS maximum massage size (512 bytes) plus rooms for UDP header, IPv4 or IPv6 header, and the MAC header.</span></span>

## <a name="dns-messages"></a><span data-ttu-id="d5ceb-128">Mensagens DNS</span><span class="sxs-lookup"><span data-stu-id="d5ceb-128">DNS Messages</span></span>

<span data-ttu-id="d5ceb-129">O DNS tem um mecanismo muito simples para obter mapeamento entre nomes de anfitriões e endereços IP.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-129">The DNS has a very simple mechanism for obtaining mapping between host names and IP addresses.</span></span> <span data-ttu-id="d5ceb-130">Para obter um mapeamento, o Cliente DNS prepara uma mensagem de consulta DNS contendo o nome ou o endereço IP que precisa de ser resolvido.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-130">To obtain a mapping, the DNS Client prepares a DNS query message containing the name or the IP address that needs to be resolved.</span></span> <span data-ttu-id="d5ceb-131">A mensagem é então enviada para o primeiro servidor DNS na lista de servidores.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-131">The message is then sent to the first DNS server in the server list.</span></span> <span data-ttu-id="d5ceb-132">Se o servidor tiver tal mapeamento, responde ao Cliente DNS utilizando uma mensagem de resposta DNS que contém as informações de mapeamento solicitadas.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-132">If the server has such a mapping, it replies to the DNS Client using a DNS response message that contains the requested mapping information.</span></span> <span data-ttu-id="d5ceb-133">Se o servidor não responder, o Cliente DNS consulta o próximo servidor da sua lista até que todos os seus servidores DNS tenham sido consultados.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-133">If the server does not respond, the DNS Client queries the next server on its list until all its DNS servers have been queried.</span></span> <span data-ttu-id="d5ceb-134">Se não for recebida qualquer resposta de todos os seus servidores DNS, o Cliente DNS tem lógica de recandidúsão da mensagem DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-134">If no response from all its DNS servers is received, the DNS Client has retry logic to retransmit the DNS message.</span></span> <span data-ttu-id="d5ceb-135">Ao reenender uma consulta de DNS, o tempo limite de retransmissão é duplicado.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-135">On resending a DNS query, the retransmission timeout is doubled.</span></span> <span data-ttu-id="d5ceb-136">Este processo continua até que o tempo limite máximo de transmissão (definido como NX_DNS_MAX_RETRANS_TIMEOUT em *nxd_dns.h)* seja alcançado ou até que seja obtida uma resposta bem sucedida a partir desse servidor.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-136">This process continues until the maximum transmission timeout (defined as NX_DNS_MAX_RETRANS_TIMEOUT in *nxd_dns.h*) is reached or until a successful response is received from that server is obtained.</span></span>

<span data-ttu-id="d5ceb-137">O Cliente DNS Duo NetX pode realizar tanto pesquisas de endereços IPv6 (tipo AAAA) como pesquisas de endereços IPv4 (tipo A) especificando a versão do endereço IP na *chamada nxd_dns_host_by_name_get.*</span><span class="sxs-lookup"><span data-stu-id="d5ceb-137">NetX Duo DNS Client can perform both IPv6 address lookups (type AAAA) and IPv4 address lookups (type A) by specifying the version of the IP address in the *nxd_dns_host_by_name_get* call.</span></span> <span data-ttu-id="d5ceb-138">O Cliente DNS pode realizar pesquisas inversas de endereços IP (consultas de tipo PTR) para obter nomes de anfitriões da Web usando *nxd_dns_host_by_address_get*.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-138">The DNS Client can perform reverse lookups of IP addresses (type PTR queries) to obtain web host names using *nxd_dns_host_by_address_get*.</span></span> <span data-ttu-id="d5ceb-139">O Cliente DNS Duo NetX ainda suporta o *nx_dns_host_by_name_get* e *nx_dns_host_by_address_get* que são os serviços equivalentes mas que se limitam à comunicação da rede IPv4.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-139">The NetX Duo DNS Client still supports the *nx_dns_host_by_name_get* and *nx_dns_host_by_address_get* which are the equivalent services but which are limited to IPv4 network communication.</span></span> <span data-ttu-id="d5ceb-140">No entanto, os desenvolvedores são encorajados a apresentar as aplicações existentes do Cliente DNS para os serviços *de nxd_dns_host_by_name_get* e *nxd_dns_host_by_address_get.*</span><span class="sxs-lookup"><span data-stu-id="d5ceb-140">However, developers are encouraged to port existing DNS Client applications to the *nxd_dns_host_by_name_get* and *nxd_dns_host_by_address_get* services.</span></span>

<span data-ttu-id="d5ceb-141">As mensagens DNS utilizam o protocolo UDP para enviar pedidos e respostas de campo.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-141">DNS messaging utilizes the UDP protocol to send requests and field responses.</span></span> <span data-ttu-id="d5ceb-142">Um SERVIDOR DNS ouve na porta número 53 para consultas de clientes.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-142">A DNS Server listens on port number 53 for queries from clients.</span></span> <span data-ttu-id="d5ceb-143">Por isso, os serviços UDP devem ser ativados no NetX Duo utilizando o serviço ***nx_udp_enable** _ numa instância IP previamente criada (_*_nx_ip_create_\*\*).</span><span class="sxs-lookup"><span data-stu-id="d5ceb-143">Therefore UDP services must be enabled in NetX Duo using the ***nx_udp_enable** _ service on a previously created IP instance (_*_nx_ip_create_\*\*).</span></span>

<span data-ttu-id="d5ceb-144">Neste momento, o Cliente DNS está pronto para aceitar pedidos da aplicação e enviar consultas DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-144">At this point, the DNS Client is ready to accept requests from the application and send out DNS queries.</span></span>

## <a name="extended-dns-resource-record-types"></a><span data-ttu-id="d5ceb-145">Tipos de registo de recursos DNS estendidos</span><span class="sxs-lookup"><span data-stu-id="d5ceb-145">Extended DNS Resource Record Types</span></span>

<span data-ttu-id="d5ceb-146">Se NX_DNS_ENABLE_EXTENDED_RR_TYPES estiver ativado, o Cliente DNS da NetX Duo também suporta as seguintes consultas de tipo de registo:</span><span class="sxs-lookup"><span data-stu-id="d5ceb-146">If NX_DNS_ENABLE_EXTENDED_RR_TYPES is enabled, NetX Duo DNS Client also supports the following record type queries:</span></span>

- <span data-ttu-id="d5ceb-147">CNAME: contém o nome canónico para um pseudónimo</span><span class="sxs-lookup"><span data-stu-id="d5ceb-147">CNAME: contains the canonical name for an alias</span></span>
- <span data-ttu-id="d5ceb-148">TXT: contém uma cadeia de texto</span><span class="sxs-lookup"><span data-stu-id="d5ceb-148">TXT: contains a text string</span></span>
- <span data-ttu-id="d5ceb-149">NS: contém um servidor de nome autoritário</span><span class="sxs-lookup"><span data-stu-id="d5ceb-149">NS: contains an authoritative name server</span></span>
- <span data-ttu-id="d5ceb-150">SOA: contém o início de uma zona de autoridade</span><span class="sxs-lookup"><span data-stu-id="d5ceb-150">SOA: contains the start of a zone of authority</span></span>
- <span data-ttu-id="d5ceb-151">MX: usado para troca de correio</span><span class="sxs-lookup"><span data-stu-id="d5ceb-151">MX: used for mail exchange</span></span>
- <span data-ttu-id="d5ceb-152">SRV: contém informações sobre o serviço oferecido pelo domínio</span><span class="sxs-lookup"><span data-stu-id="d5ceb-152">SRV: contains information on the service offered by the domain</span></span>

<span data-ttu-id="d5ceb-153">Com exceção dos tipos de registo CNAME e TXT, a aplicação deve fornecer um tampão alinhado de 4 bytes para receber o registo de dados DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-153">With the exception of CNAME and TXT record types, the application must supply a 4-byte aligned buffer to receive the DNS data record.</span></span>

<span data-ttu-id="d5ceb-154">No NetX Duo DNS Client, os dados de gravação são armazenados de forma a fazer uso mais eficiente do espaço tampão.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-154">In NetX Duo DNS Client, record data is stored in such a way to make most efficient use of buffer space.</span></span>

<span data-ttu-id="d5ceb-155">Abaixo é apresentado um exemplo de um tampão de registo de comprimento fixo (registo tipo AAAA):</span><span class="sxs-lookup"><span data-stu-id="d5ceb-155">An example of a record buffer of fixed length (type AAAA record) is shown below:</span></span>

![Tampão de registo de comprimento fixo](media/image2.png)

<span data-ttu-id="d5ceb-157">Para as consultas cujos tipos de registo têm comprimento de dados variável, tais como registos NS cujos nomes de anfitrião têm comprimento variável, o Cliente DNS da NetX Duo guarda os dados da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-157">For those queries whose record types have variable data length, such as NS records whose host names are of variable length, NetX Duo DNS Client saves the data as follows.</span></span> <span data-ttu-id="d5ceb-158">O tampão fornecido na consulta do Cliente DNS é organizado numa área de dados de comprimento fixo e numa área de memória não estruturada.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-158">The buffer supplied in the DNS Client query is organized into an area of fixed length data and an area of unstructured memory.</span></span> <span data-ttu-id="d5ceb-159">A parte superior do tampão de memória é organizada em entradas de registo alinhadas de 4 byte.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-159">The top of the memory buffer is organized into 4-byte aligned record entries.</span></span> <span data-ttu-id="d5ceb-160">Cada entrada de registo contém o endereço IP e um ponteiro para os dados de comprimento variável para esse endereço IP.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-160">Each record entry contains the IP address and a pointer to the variable length data for that IP address.</span></span> <span data-ttu-id="d5ceb-161">Os dados de comprimento variável de cada endereço IP são armazenados na memória de área não estruturada a partir do final do tampão de memória.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-161">The variable length data for each IP address are stored in the unstructured area memory starting at the end of the memory buffer.</span></span> <span data-ttu-id="d5ceb-162">Os dados de comprimento variável para cada entrada de registo sucessivo são guardados na memória da área seguinte adjacente aos dados variáveis de entradas de registo anteriores.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-162">The variable length data for each successive record entry is saved in the next area memory adjacent to the previous record entries variable data.</span></span> <span data-ttu-id="d5ceb-163">Assim, os dados variáveis 'crescem' para a área estruturada da memória que contém as entradas de registo até que não haja memória suficiente para armazenar outra entrada de registo e dados variáveis.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-163">Hence, the variable data ‘grows’ towards the structured area of memory containing the record entries until there is insufficient memory to store another record entry and variable data.</span></span>

<span data-ttu-id="d5ceb-164">Isto é mostrado na figura abaixo:</span><span class="sxs-lookup"><span data-stu-id="d5ceb-164">This is shown in the figure below:</span></span>

![Figura 2](media/image3.png)

<span data-ttu-id="d5ceb-166">O exemplo do armazenamento de dados do nome de domínio DNS (NS) é mostrado acima.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-166">The example of the DNS domain name (NS) data storage is shown above.</span></span>

<span data-ttu-id="d5ceb-167">As consultas do NetX Duo DNS Client utilizando o formato de armazenamento de registo devolvem o número de registos guardados para o tampão de gravação.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-167">NetX Duo DNS Client queries using the record storage format return the number of records saved to the record buffer.</span></span> <span data-ttu-id="d5ceb-168">Esta informação permite que a aplicação extraia registos NS do tampão de registo.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-168">This information enables the application to extract NS records from the record buffer.</span></span>

<span data-ttu-id="d5ceb-169">Um exemplo de uma consulta do Cliente DNS que armazena dados DNS de comprimento variável utilizando este formato de armazenamento de registo é mostrado abaixo:</span><span class="sxs-lookup"><span data-stu-id="d5ceb-169">An example of a DNS Client query that stores variable length DNS data using this record storage format is shown below:</span></span>

```C
UINT  _nx_dns_domain_name_server_get(NX_DNS *dns_ptr, 
                    UCHAR *host_name, VOID *record_buffer, 
                    UINT buffer_size, UINT *record_count, 
                    ULONG wait_option);
```


<span data-ttu-id="d5ceb-170">Mais detalhes estão disponíveis no Capítulo 3, "Descrição dos Serviços ao Cliente do DNS".</span><span class="sxs-lookup"><span data-stu-id="d5ceb-170">More details are available in Chapter 3, “Description of DNS Client Services”.</span></span>

## <a name="dns-cache"></a><span data-ttu-id="d5ceb-171">DNS Cache</span><span class="sxs-lookup"><span data-stu-id="d5ceb-171">DNS Cache</span></span>

<span data-ttu-id="d5ceb-172">Se NX_DNS_CACHE_ENABLE estiver ativado, o Cliente DNS da NetX Duo suporta a funcionalidade DnS Cache.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-172">If NX_DNS_CACHE_ENABLE is enabled, NetX Duo DNS Client supports the DNS Cache feature.</span></span> <span data-ttu-id="d5ceb-173">Depois de criar o Cliente DNS, a aplicação pode ligar para a API *nx_dns_cache_initialize para* definir a Cache DNS especial.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-173">After creating the DNS Client, the application can call the API *nx_dns_cache_initialize()* to set the special DNS Cache.</span></span> <span data-ttu-id="d5ceb-174">Se ativar a funcionalidade DNS Cache, o Cliente DNS encontrará a resposta disponível a partir da Cache DNS antes de começar a enviar consulta DNS, se encontrar a resposta disponível, devolver diretamente a resposta à aplicação, caso contrário o Cliente DNS envia mensagem de consulta para o servidor DNS e aguarda a resposta.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-174">If enable DNS Cache feature, DNS Client will find the available answer from DNS Cache before starts to send DNS query, if find the available answer, directly return the answer to application, otherwise DNS Client sends out query message to DNS server and waits for the reply.</span></span> <span data-ttu-id="d5ceb-175">Quando o Cliente DNS recebe a mensagem de resposta e há cache gratuito disponível, o Cliente DNS devolve a resposta à aplicação e adiciona também a resposta como registo de recursos na cache DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-175">When DNS Client gets the response message and there is free cache available, DNS Client returns the answer to the application and also adds the answer as resource record into DNS cache.</span></span>

<span data-ttu-id="d5ceb-176">Cada resposta uma estrutura de dados *NX_DNS_RR* (Registo de Recursos) na cache.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-176">Each answer a data structure *NX_DNS_RR* (Resource Record) in the cache.</span></span> <span data-ttu-id="d5ceb-177">As cordas (nome de registo de recursos e dados) em Registos são de comprimento variável, pelo que não são armazenadas na estrutura NX_DNS_RR.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-177">Strings (resource record name and data) in Records are variable length, therefore are not stored in the NX_DNS_RR structure.</span></span> <span data-ttu-id="d5ceb-178">O Record contém ponteiros para o local de memória real onde as cordas são armazenadas.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-178">The Record contains pointers to the actual memory location where the strings are stored.</span></span> <span data-ttu-id="d5ceb-179">A mesa de cordas e os Discos partilham a cache.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-179">The string table and the Records share the cache.</span></span> <span data-ttu-id="d5ceb-180">Os registos são armazenados desde o início da cache, e crescem no final da cache.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-180">Records are stored from the beginning of the cache, and grow towards the end of the cache.</span></span> <span data-ttu-id="d5ceb-181">A mesa de cordas começa a partir do fim da cache e cresce para o início da cache.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-181">The string table starts from the end of the cache and grows towards the beginning of the cache.</span></span> <span data-ttu-id="d5ceb-182">Cada corda na mesa de cordas tem um campo de comprimento e um contra-campo.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-182">Each string in the string table has a length field and a counter field.</span></span> <span data-ttu-id="d5ceb-183">Quando uma corda é adicionada à tabela de cordas, se a mesma corda já estiver presente na tabela, o valor do contador é incrementado e nenhuma memória é atribuída para a cadeia.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-183">When a string is added to the string table, if the same string is already present in the table, the counter value is incremented and no memory is allocated for the string.</span></span> <span data-ttu-id="d5ceb-184">A cache é considerada completa se não forem adicionados mais registos de recursos ou novas cordas à cache.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-184">The cache is considered full if no more resource records or new strings can be added to the cache.</span></span>

## <a name="dns-client-limitations"></a><span data-ttu-id="d5ceb-185">Limitações do cliente do DNS</span><span class="sxs-lookup"><span data-stu-id="d5ceb-185">DNS Client Limitations</span></span>

<span data-ttu-id="d5ceb-186">O Cliente DNS suporta um pedido dns de cada vez.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-186">The DNS Client supports one DNS request at a time.</span></span> <span data-ttu-id="d5ceb-187">Os fios que tentam fazer outro pedido de DNS estão temporariamente bloqueados até que o pedido de DNS anterior esteja concluído.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-187">Threads attempting to make another DNS request are temporarily blocked until the previous DNS request is complete.</span></span>

<span data-ttu-id="d5ceb-188">O Cliente DNS da NetX Duo não utiliza dados de respostas autoritárias para encaminhar consultas adicionais de DNS para outros servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="d5ceb-188">The NetX Duo DNS Client does not use data from authoritative answers to forward additional DNS queries to other DNS servers.</span></span>

## <a name="dns-rfcs"></a><span data-ttu-id="d5ceb-189">DNS RFCs</span><span class="sxs-lookup"><span data-stu-id="d5ceb-189">DNS RFCs</span></span>

<span data-ttu-id="d5ceb-190">NetX Duo DNS está em conformidade com os seguintes RFCs:</span><span class="sxs-lookup"><span data-stu-id="d5ceb-190">NetX Duo DNS is compliant with the following RFCs:</span></span>

- <span data-ttu-id="d5ceb-191">NOMES DE DOMÍNIO RFC1034 - CONCEITOS E INSTALAÇÕES</span><span class="sxs-lookup"><span data-stu-id="d5ceb-191">RFC1034 DOMAIN NAMES - CONCEPTS AND FACILITIES</span></span>
- <span data-ttu-id="d5ceb-192">NOMES DE DOMÍNIO RFC1035 - IMPLEMENTAÇÃO E ESPECIFICAÇÃO</span><span class="sxs-lookup"><span data-stu-id="d5ceb-192">RFC1035 DOMAIN NAMES - IMPLEMENTATION AND SPECIFICATION</span></span>
- <span data-ttu-id="d5ceb-193">RFC1480 O Domínio dos EUA</span><span class="sxs-lookup"><span data-stu-id="d5ceb-193">RFC1480 The US Domain</span></span>
- <span data-ttu-id="d5ceb-194">RFC 2782 A DNS RR para especificar a localização dos serviços (DNS SRV)</span><span class="sxs-lookup"><span data-stu-id="d5ceb-194">RFC 2782 A DNS RR for specifying the location of services (DNS SRV)</span></span>
- <span data-ttu-id="d5ceb-195">Extensões DE DNS RFC 3596 para suporte versão IP 6</span><span class="sxs-lookup"><span data-stu-id="d5ceb-195">RFC 3596 DNS Extensions to Support IP Version 6</span></span>