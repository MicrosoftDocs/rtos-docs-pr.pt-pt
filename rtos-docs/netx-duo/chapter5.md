---
title: Capítulo 5 - Azure RTOS NetX Duo Network Drivers
description: Este capítulo contém uma descrição dos controladores de rede para a Azure RTOS NetX Duo.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 305c333bf3fb3f6fe76d661426c196afe25fbd5d
ms.sourcegitcommit: 60ad844b58639d88830f2660ab0c4ff86b92c10f
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 04/07/2021
ms.locfileid: "106549798"
---
# <a name="chapter-5---azure-rtos-netx-duo-network-drivers"></a><span data-ttu-id="72776-103">Capítulo 5 - Azure RTOS NetX Duo Network Drivers</span><span class="sxs-lookup"><span data-stu-id="72776-103">Chapter 5 - Azure RTOS NetX Duo Network Drivers</span></span>

<span data-ttu-id="72776-104">Este capítulo contém uma descrição dos controladores de rede para a Azure RTOS NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="72776-104">This chapter contains a description of network drivers for Azure RTOS NetX Duo.</span></span> <span data-ttu-id="72776-105">A informação apresentada destina-se a ajudar os desenvolvedores a escreverem controladores de rede específicos para a NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="72776-105">The information presented is designed to help developers write application-specific network drivers for NetX Duo.</span></span>

## <a name="driver-introduction"></a><span data-ttu-id="72776-106">Introdução do Condutor</span><span class="sxs-lookup"><span data-stu-id="72776-106">Driver Introduction</span></span>

<span data-ttu-id="72776-107">A estrutura NX_IP contém tudo para gerir uma única instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-107">The NX_IP structure contains everything to manage a single IP instance.</span></span> <span data-ttu-id="72776-108">Isto inclui informações gerais do protocolo TCP/IP, bem como a rotina de entrada do condutor da rede física específica para aplicações.</span><span class="sxs-lookup"><span data-stu-id="72776-108">This includes general TCP/IP protocol information as well as the application-specific physical network driver's entry routine.</span></span> <span data-ttu-id="72776-109">A rotina de entrada do condutor é definida durante o serviço \***nx_ip_create** _ .</span><span class="sxs-lookup"><span data-stu-id="72776-109">The driver's entry routine is defined during the \***nx_ip_create** _ service.</span></span> <span data-ttu-id="72776-110">Podem ser adicionados dispositivos adicionais à instância IP através do serviço _ *_nx_ip_interface_attach_*\* .</span><span class="sxs-lookup"><span data-stu-id="72776-110">Additional devices may be added to the IP instance via the _ *_nx_ip_interface_attach_*\* service.</span></span>

<span data-ttu-id="72776-111">A comunicação entre a NetX Duo e o controlador de rede da aplicação é realizada através da estrutura **de pedido NX_IP_DRIVER.**</span><span class="sxs-lookup"><span data-stu-id="72776-111">Communication between NetX Duo and the application's network driver is accomplished through the **NX_IP_DRIVER** request structure.</span></span> <span data-ttu-id="72776-112">Esta estrutura é mais frequentemente definida localmente na pilha do chamador e é, portanto, libertada após o retorno da função de condutor e chamada.</span><span class="sxs-lookup"><span data-stu-id="72776-112">This structure is most often defined locally on the caller's stack and is therefore released after the driver and calling function return.</span></span> <span data-ttu-id="72776-113">A estrutura é definida da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="72776-113">The structure is defined as follows.</span></span>

```c
typedef struct NX_IP_DRIVER_STRUCT
{
      UINT           nx_ip_driver_command;
      UINT           nx_ip_driver_status;
      ULONG          nx_ip_driver_physical_address_msw;
      ULONG          nx_ip_driver_physical_address_lsw;
      NX_PACKET      *nx_ip_driver_packet;
      ULONG          *nx_ip_driver_return_ptr;
      NX_IP          *nx_ip_driver_ptr;
      NX_INTERFACE   *nx_ip_driver_interface;01
} NX_IP_DRIVER;
```
## <a name="driver-entry"></a><span data-ttu-id="72776-114">Entrada do condutor</span><span class="sxs-lookup"><span data-stu-id="72776-114">Driver Entry</span></span> 

<span data-ttu-id="72776-115">A NetX Duo invoca a função de entrada do controlador de rede para a inicialização do condutor e para o envio de pacotes e para várias operações de controlo e estado, incluindo a inicialização e ativação do dispositivo de rede.</span><span class="sxs-lookup"><span data-stu-id="72776-115">NetX Duo invokes the network driver entry function for driver initialization and for sending packets and for various control and status operations, including initializing and enabling the network device.</span></span> <span data-ttu-id="72776-116">NetX Duo emite comandos ao controlador de rede definindo o campo ***nx_ip_driver_command** _ na estrutura de pedido _ *NX_IP_DRIVER** .</span><span class="sxs-lookup"><span data-stu-id="72776-116">NetX Duo issues commands to the network driver by setting the ***nx_ip_driver_command** _ field in the _ *NX_IP_DRIVER** request structure.</span></span> <span data-ttu-id="72776-117">A função de entrada do controlador tem o seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="72776-117">The driver entry function has the following format:</span></span>

```c
VOID my_driver_entry(NX_IP_DRIVER *request);
```
## <a name="driver-requests"></a><span data-ttu-id="72776-118">Pedidos de motorista</span><span class="sxs-lookup"><span data-stu-id="72776-118">Driver Requests</span></span>

<span data-ttu-id="72776-119">NetX Duo cria o pedido do controlador com um comando específico e invoca a função de entrada do controlador para executar o comando.</span><span class="sxs-lookup"><span data-stu-id="72776-119">NetX Duo creates the driver request with a specific command and invokes the driver entry function to execute the command.</span></span> <span data-ttu-id="72776-120">Como cada controlador de rede tem uma única função de entrada, o NetX Duo faz todos os pedidos através da estrutura de dados de pedido do condutor.</span><span class="sxs-lookup"><span data-stu-id="72776-120">Because each network driver has a single entry function, NetX Duo makes all requests through the driver request data structure.</span></span> <span data-ttu-id="72776-121">O ***nx_ip_driver_command** _ membro da estrutura de dados do pedido do condutor _(*NX_IP_DRIVER\*\*) define o pedido. As informações sobre o estado são comunicadas ao autor da chamada no membro \**_nx_ip_driver_status_*_.</span><span class="sxs-lookup"><span data-stu-id="72776-121">The ***nx_ip_driver_command** _ member of the driver request data structure (_*NX_IP_DRIVER\*\*) defines the request. Status information is reported back to the caller in the member \**_nx_ip_driver_status_*_.</span></span> <span data-ttu-id="72776-122">Se este campo for _\*NX_SUCCESS\*\*, o pedido do condutor foi concluído com sucesso.</span><span class="sxs-lookup"><span data-stu-id="72776-122">If this field is _\*NX_SUCCESS\*\*, the driver request was completed successfully.</span></span>

<span data-ttu-id="72776-123">NetX Duo serializa todo o acesso ao condutor.</span><span class="sxs-lookup"><span data-stu-id="72776-123">NetX Duo serializes all access to the driver.</span></span> <span data-ttu-id="72776-124">Por isso, o controlador não necessita de manusear vários fios assíncronos, chamando a função de entrada.</span><span class="sxs-lookup"><span data-stu-id="72776-124">Therefore, the driver does not need to handle multiple threads asynchronously calling the entry function.</span></span> <span data-ttu-id="72776-125">Note que a função do controlador do dispositivo executa com o mutex IP bloqueado.</span><span class="sxs-lookup"><span data-stu-id="72776-125">Note that the device driver function executes with the IP mutex locked.</span></span> <span data-ttu-id="72776-126">Por conseguinte, a função interna do controlador do dispositivo não deve bloquear-se sozinha.</span><span class="sxs-lookup"><span data-stu-id="72776-126">Therefore the device driver internal function shall not block itself.</span></span>

<span data-ttu-id="72776-127">Normalmente, o controlador do dispositivo também lida com interrupções.</span><span class="sxs-lookup"><span data-stu-id="72776-127">Typically the device driver also handles interrupts.</span></span> <span data-ttu-id="72776-128">Por isso, todas as funções do controlador devem ser interrompidas.</span><span class="sxs-lookup"><span data-stu-id="72776-128">Therefore, all driver functions need to be interrupt-safe.</span></span>

### <a name="driver-initialization"></a><span data-ttu-id="72776-129">Inicialização do condutor</span><span class="sxs-lookup"><span data-stu-id="72776-129">Driver Initialization</span></span>   
<span data-ttu-id="72776-130">Embora o processamento de inicialização do condutor real seja específico da aplicação, geralmente consiste na estrutura de dados e na inicialização de hardware físico.</span><span class="sxs-lookup"><span data-stu-id="72776-130">Although the actual driver initialization processing is application specific, it usually consists of data structure and physical hardware initialization.</span></span> <span data-ttu-id="72776-131">A informação exigida ao NetX Duo para a inicialização do condutor é a Unidade de Transmissão Máxima IP (MTU), que é o número de bytes disponíveis para a carga útil da camada IP, incluindo o cabeçalho IPv4 ou IPv6) e se a interface física necessitar de mapeamento lógico-físico.</span><span class="sxs-lookup"><span data-stu-id="72776-131">The information required from NetX Duo for driver initialization is the IP Maximum Transmission Unit (MTU), which is the number of bytes available to the IP-layer payload, including IPv4 or IPv6 header) and if the physical interface needs logical-to-physical mapping.</span></span> <span data-ttu-id="72776-132">O controlador configura o valor da interface MTU chamando ***nx_ip_interface_mtu_set***.</span><span class="sxs-lookup"><span data-stu-id="72776-132">The driver configures the interface MTU value by calling ***nx_ip_interface_mtu_set***.</span></span>

<span data-ttu-id="72776-133">O controlador do dispositivo precisa de ligar \***nx_ip_interface_address_mapping_configure** _ para informar o NetX Duo se é ou não necessário mapear endereços de interface.</span><span class="sxs-lookup"><span data-stu-id="72776-133">The device driver needs to call \***nx_ip_interface_address_mapping_configure** _ to inform NetX Duo whether or not interface address mapping is required.</span></span> <span data-ttu-id="72776-134">Se for necessário mapeamento de endereços, o controlador é responsável por configurar a interface com endereço MAC válido e fornecer o endereço MAC ao NetX via _\*_nx_ip_interface_physical_address_set_\*\*.</span><span class="sxs-lookup"><span data-stu-id="72776-134">If address mapping is needed, the driver is responsible for configuring the interface with valid MAC address, and supply the MAC address to NetX via _\*_nx_ip_interface_physical_address_set_\*\*.</span></span>

<span data-ttu-id="72776-135">Quando o controlador de rede recebe o pedido de NX_LINK INITIALIZE da NetX Duo, recebe um ponteiro para o bloco de controlo IP como parte do NX_IP_DRIVER bloco de controlo de pedido acima indicado.</span><span class="sxs-lookup"><span data-stu-id="72776-135">When the network driver receives the NX_LINK INITIALIZE request from NetX Duo, it receives a pointer to the IP control block as part of the NX_IP_DRIVER request control block shown above.</span></span>

<span data-ttu-id="72776-136">Após a chamada de aplicação ***nx_ip_create,*** o fio do ajudante IP envia um pedido do controlador com o conjunto de comando para NX_LINK_INITIALIZE ao controlador para inicializar a sua interface de rede física.</span><span class="sxs-lookup"><span data-stu-id="72776-136">After the application calls ***nx_ip_create***, the IP helper thread sends a driver request with the command set to NX_LINK_INITIALIZE to the driver to initialize its physical network interface.</span></span> <span data-ttu-id="72776-137">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de inicialização.</span><span class="sxs-lookup"><span data-stu-id="72776-137">The following NX_IP_DRIVER members are used for the initialize request.</span></span>

| <span data-ttu-id="72776-138">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-138">NX_IP_DRIVER&nbsp;member</span></span> | <span data-ttu-id="72776-139">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-139">Meaning</span></span>    |
| ------------------------- | ----------------------------- |
| <span data-ttu-id="72776-140">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-140">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-141">NX_LINK_INITIALIZE</span><span class="sxs-lookup"><span data-stu-id="72776-141">NX_LINK_INITIALIZE</span></span>    |
| <span data-ttu-id="72776-142">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-142">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-143">Ponteiro para a instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-143">Pointer to the IP instance.</span></span> <span data-ttu-id="72776-144">Este valor deve ser guardado pelo controlador para que a função do controlador possa encontrar a instância IP para operar.</span><span class="sxs-lookup"><span data-stu-id="72776-144">This value should be saved by the driver so that the driver function can find the IP instance to operate on.</span></span>    |
| <span data-ttu-id="72776-145">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-145">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-146">Ponteiro para a estrutura da interface de rede dentro da instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-146">Pointer to the network interface structure within the IP instance.</span></span> <span data-ttu-id="72776-147">Esta informação deve ser guardada pelo condutor.</span><span class="sxs-lookup"><span data-stu-id="72776-147">This information should be saved by the driver.</span></span> <span data-ttu-id="72776-148">Ao receber os pacotes, o condutor utilizará as informações da estrutura da interface ao enviar o pacote para cima da pilha.</span><span class="sxs-lookup"><span data-stu-id="72776-148">On receiving packets, the driver shall use the interface structure information when sending the packet up the stack.</span></span> <span data-ttu-id="72776-149">O índice de interface (índice do dispositivo) pode ser obtido lendo o membro nx_interface_index dentro desta estrutura de dados.</span><span class="sxs-lookup"><span data-stu-id="72776-149">The interface index (device index) can be obtained by reading the member nx_interface_index inside this data structure.</span></span> |
| <span data-ttu-id="72776-150">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-150">nx_ip_driver_status</span></span>    | <span data-ttu-id="72776-151">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-151">Completion status.</span></span> <span data-ttu-id="72776-152">Se o controlador não conseguir inicializar a interface especificada para a instância IP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-152">If the driver is not able to initialize the specified interface to the IP instance, it will return a nonzero error status.</span></span> |


> [!NOTE]  
> <span data-ttu-id="72776-153">*O condutor é na verdade chamado a partir do fio de ajuda ip que foi criado para a instância IP. Por isso, a rotina do condutor deve evitar a realização de operações de bloqueio, ou o fio do ajudante IP pode travar, causando atrasos ilimitados em aplicações que dependem do fio IP*.</span><span class="sxs-lookup"><span data-stu-id="72776-153">*The driver is actually called from the IP helper thread that was created for the IP instance. Therefore the driver routine should avoid performing blocking operations, or the IP helper thread could stall, causing unbounded delays to applications that rely on the IP thread*.</span></span>

### <a name="enable-link"></a><span data-ttu-id="72776-154">Ativar ligação</span><span class="sxs-lookup"><span data-stu-id="72776-154">Enable Link</span></span>   
<span data-ttu-id="72776-155">Em seguida, o fio de ajuda IP permite que a rede física, definindo o comando do controlador para NX_LINK_ENABLE no pedido do condutor e enviando o pedido ao controlador de rede.</span><span class="sxs-lookup"><span data-stu-id="72776-155">Next, the IP helper thread enables the physical network by setting the driver command to NX_LINK_ENABLE in the driver request and sending the request to the network driver.</span></span> <span data-ttu-id="72776-156">Isto acontece pouco depois de o fio do ajudante IP completar o pedido de inicialização.</span><span class="sxs-lookup"><span data-stu-id="72776-156">This happens shortly after the IP helper thread completes the initialization request.</span></span> <span data-ttu-id="72776-157">Ativar o link pode ser tão simples como definir o campo *nx_interface_link_up* no caso da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-157">Enabling the link may be as simple as setting the *nx_interface_link_up* field in the interface instance.</span></span> <span data-ttu-id="72776-158">Mas também pode envolver manipulação do hardware físico.</span><span class="sxs-lookup"><span data-stu-id="72776-158">But it may also involve manipulation of the physical hardware.</span></span> <span data-ttu-id="72776-159">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de ligação de ativação.</span><span class="sxs-lookup"><span data-stu-id="72776-159">The following NX_IP_DRIVER members are used for the enable link request.</span></span>

| <span data-ttu-id="72776-160">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-160">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="72776-161">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-161">Meaning</span></span>                      |
| ------------------------- | ---------------------------- |
| <span data-ttu-id="72776-162">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-162">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-163">NX_LINK_ENABLE</span><span class="sxs-lookup"><span data-stu-id="72776-163">NX_LINK_ENABLE</span></span>   |
| <span data-ttu-id="72776-164">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-164">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-165">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-165">Pointer to IP instance</span></span>  |
| <span data-ttu-id="72776-166">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-166">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-167">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-167">Pointer to the interface instance</span></span> |
| <span data-ttu-id="72776-168">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-168">nx_ip_driver_status</span></span>    | <span data-ttu-id="72776-169">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-169">Completion status.</span></span> <span data-ttu-id="72776-170">Se o controlador não conseguir ativar a interface especificada, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-170">If the driver is not able to enable the specified interface, it will return a non-zero error status.</span></span> |

### <a name="disable-link"></a><span data-ttu-id="72776-171">Ligação de desativação</span><span class="sxs-lookup"><span data-stu-id="72776-171">Disable Link</span></span>   
<span data-ttu-id="72776-172">Este pedido é feito pela NetX Duo durante a supressão de uma instância IP pelo serviço \***nx_ip_delete** _ .</span><span class="sxs-lookup"><span data-stu-id="72776-172">This request is made by NetX Duo during the deletion of an IP instance by the \***nx_ip_delete** _ service.</span></span> <span data-ttu-id="72776-173">Ou uma aplicação pode emitir este comando para desativar temporariamente a ligação para economizar energia.</span><span class="sxs-lookup"><span data-stu-id="72776-173">Or an application may issue this command in order to temporarily disable the link in order to save power.</span></span> <span data-ttu-id="72776-174">Este serviço desativa a interface de rede física na instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-174">This service disables the physical network interface on the IP instance.</span></span> <span data-ttu-id="72776-175">O processamento para desativar a ligação pode ser tão simples como limpar a _bandeira nx_interface_link_up\* no caso da interface. Mas também pode envolver manipulação do hardware físico. Normalmente é uma operação inversa da operação \***Ativar a ligação.**_</span><span class="sxs-lookup"><span data-stu-id="72776-175">The processing to disable the link may be as simple as clearing the _nx_interface_link_up\* flag in the interface instance. But it may also involve manipulation of the physical hardware. Typically it is a reverse operation of the \***Enable Link**_ operation.</span></span> <span data-ttu-id="72776-176">Depois de desativar o link, o pedido de pedido _ *_Ativar_* a operação Link \* para ativar a interface.</span><span class="sxs-lookup"><span data-stu-id="72776-176">After the link is disabled, the application request _ *_Enable Link_*\* operation to enable the interface.</span></span>

<span data-ttu-id="72776-177">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de ligação para desativação.</span><span class="sxs-lookup"><span data-stu-id="72776-177">The following NX_IP_DRIVER members are used for the disable link request.</span></span>

| <span data-ttu-id="72776-178">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-178">NX_IP_DRIVER&nbsp;member</span></span>     | <span data-ttu-id="72776-179">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-179">Meaning</span></span>                      |
| ------------------------- | ---------------------------- |
| <span data-ttu-id="72776-180">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-180">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-181">NX_LINK_DISABLE</span><span class="sxs-lookup"><span data-stu-id="72776-181">NX_LINK_DISABLE</span></span>    |
| <span data-ttu-id="72776-182">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-182">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-183">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-183">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-184">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-184">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-185">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-185">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="72776-186">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-186">nx_ip_driver_status</span></span>    | <span data-ttu-id="72776-187">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-187">Completion status.</span></span> <span data-ttu-id="72776-188">Se o controlador não conseguir desativar a interface especificada na instância IP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-188">If the driver is not able to disable the specified interface in the IP instance, it will return a non-zero error status.</span></span> |

### <a name="uninitialize-link"></a><span data-ttu-id="72776-189">Ligação Uninitialize</span><span class="sxs-lookup"><span data-stu-id="72776-189">Uninitialize Link</span></span>   
<span data-ttu-id="72776-190">Este pedido é feito pela NetX Duo durante a supressão de uma instância IP pelo serviço \***nx_ip_delete** _ .</span><span class="sxs-lookup"><span data-stu-id="72776-190">This request is made by NetX Duo during the deletion of an IP instance by the \***nx_ip_delete** _ service.</span></span> <span data-ttu-id="72776-191">Este pedido não insinializa a interface e liberta todos os recursos criados durante a fase de inicialização.</span><span class="sxs-lookup"><span data-stu-id="72776-191">This request uninitialize the interface, and release any resources created during initialization phase.</span></span> <span data-ttu-id="72776-192">Normalmente é uma operação inversa da operação _ *_Initialize Link_*\* .</span><span class="sxs-lookup"><span data-stu-id="72776-192">Typically it is a reverse operation of the _ *_Initialize Link_*\* operation.</span></span> <span data-ttu-id="72776-193">Depois de a interface não ser inintalizada, o dispositivo não pode ser utilizado até que a interface seja novamente inicializada.</span><span class="sxs-lookup"><span data-stu-id="72776-193">After the interface is uninitalized, the device cannot be used until the interface is initialized again.</span></span>

<span data-ttu-id="72776-194">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de ligação para desativação.</span><span class="sxs-lookup"><span data-stu-id="72776-194">The following NX_IP_DRIVER members are used for the disable link request.</span></span>

| <span data-ttu-id="72776-195">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-195">NX_IP_DRIVER&nbsp;member</span></span>    | <span data-ttu-id="72776-196">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-196">Meaning</span></span>                  |
|------------------------|--------------------------|
| <span data-ttu-id="72776-197">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-197">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-198">NX_LINK_UNINITIALZE</span><span class="sxs-lookup"><span data-stu-id="72776-198">NX_LINK_UNINITIALZE</span></span>      |
| <span data-ttu-id="72776-199">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-199">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-200">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-200">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-201">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-201">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-202">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-202">Pointer to the interface instance</span></span> |
| <span data-ttu-id="72776-203">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-203">nx_ip_driver_status</span></span>    | <span data-ttu-id="72776-204">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-204">Completion status.</span></span> <span data-ttu-id="72776-205">Se o controlador não conseguir desintitializar a interface especificada para a instância IP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-205">If the driver is not able to uninitialize the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="packet-send"></a><span data-ttu-id="72776-206">Envio de pacote</span><span class="sxs-lookup"><span data-stu-id="72776-206">Packet Send</span></span>   
<span data-ttu-id="72776-207">Este pedido é feito durante o processamento interno de envio de IPv4 ou IPv6, que todos os protocolos NetX Duo usam para transmitir pacotes (exceto ARP, RARP).</span><span class="sxs-lookup"><span data-stu-id="72776-207">This request is made during internal IPv4 or IPv6 send processing, which all NetX Duo protocols use to transmit packets (except for ARP, RARP).</span></span> <span data-ttu-id="72776-208">Ao receber o comando de envio do pacote, o *nx_packet_prepend_ptr* aponta para o início do pacote a enviar, que é o início do cabeçalho IPv4 ou IPv6.</span><span class="sxs-lookup"><span data-stu-id="72776-208">On receiving the packet send command, the *nx_packet_prepend_ptr* points to the beginning of the packet to be sent, which is the beginning of the IPv4 or IPv6 header.</span></span> <span data-ttu-id="72776-209">*nx_packet_length* indica o tamanho total (in bytes) dos dados transmitidos.</span><span class="sxs-lookup"><span data-stu-id="72776-209">*nx_packet_length* indicates the total size (in bytes) of the data being transmitted.</span></span> <span data-ttu-id="72776-210">Se *nx_packet_next* for válido, o datagrama IP de saída é armazenado em vários pacotes, o controlador é obrigado a seguir o pacote acorrentado e transmitir todo o quadro.</span><span class="sxs-lookup"><span data-stu-id="72776-210">If *nx_packet_next* is valid, the outgoing IP datagram is stored in multiple packets, the driver is required to follow the chained packet and transmit the entire frame.</span></span> <span data-ttu-id="72776-211">Note que a área de dados válida em cada pacote acorrentado é armazenada entre *nx_packet_prepend_ptr* e *nx_packet_append_ptr*.</span><span class="sxs-lookup"><span data-stu-id="72776-211">Note that valid data area in each chained packet is stored between *nx_packet_prepend_ptr* and *nx_packet_append_ptr*.</span></span>

<span data-ttu-id="72776-212">O condutor é responsável pela construção do cabeçalho físico.</span><span class="sxs-lookup"><span data-stu-id="72776-212">The driver is responsible for constructing physical header.</span></span> <span data-ttu-id="72776-213">Se for necessário um endereço físico para o mapeamento de endereços IP (como o Ethernet), a camada IP já resolveu o endereço MAC.</span><span class="sxs-lookup"><span data-stu-id="72776-213">If physical address to IP address mapping is required (such as Ethernet), the IP layer already resolved the MAC address.</span></span> <span data-ttu-id="72776-214">O endereço MAC de destino é passado a partir da instância IP, armazenado em *nx_ip_driver_physical_address_msw e nx_ip_driver_physical_address_lsw*.</span><span class="sxs-lookup"><span data-stu-id="72776-214">The destination MAC address is passed from the IP instance, stored in *nx_ip_driver_physical_address_msw and nx_ip_driver_physical_address_lsw*.</span></span>

<span data-ttu-id="72776-215">Depois de adicionar o cabeçalho físico, o processamento de envio do pacote chama então a função de saída do condutor para transmitir o pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-215">After adding the physical header, the packet send processing then calls the driver's output function to transmit the packet.</span></span>

<span data-ttu-id="72776-216">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de envio de pacotes.</span><span class="sxs-lookup"><span data-stu-id="72776-216">The following NX_IP_DRIVER members are used for the packet send request.</span></span>

| <span data-ttu-id="72776-217">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-217">NX_IP_DRIVER&nbsp;member</span></span>              | <span data-ttu-id="72776-218">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-218">Meaning</span></span>                               |
| -----------------------------------| --------------------------------------|
| <span data-ttu-id="72776-219">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-219">nx_ip_driver_command</span></span>            | <span data-ttu-id="72776-220">NX_LINK_PACKET_SEND</span><span class="sxs-lookup"><span data-stu-id="72776-220">NX_LINK_PACKET_SEND</span></span>                |
| <span data-ttu-id="72776-221">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-221">nx_ip_driver_ptr</span></span>                | <span data-ttu-id="72776-222">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-222">Pointer to IP instance</span></span>                |
| <span data-ttu-id="72776-223">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="72776-223">nx_ip_driver_packet</span></span>             | <span data-ttu-id="72776-224">Ponteiro para o pacote para enviar</span><span class="sxs-lookup"><span data-stu-id="72776-224">Pointer to the packet to send</span></span>         |
| <span data-ttu-id="72776-225">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-225">nx_ip_driver_interface</span></span>          | <span data-ttu-id="72776-226">Ponteiro para a instância da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-226">Pointer to the interface instance.</span></span>    |
| <span data-ttu-id="72776-227">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="72776-227">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="72776-228">32 bits de endereço físico mais significativos (apenas se necessário mapeamento físico)</span><span class="sxs-lookup"><span data-stu-id="72776-228">Most significant 32-bits of physical address (only if physical mapping needed)</span></span> |
| <span data-ttu-id="72776-229">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-229">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="72776-230">Menos significativos 32 bits de endereço físico (apenas se necessário mapeamento físico)</span><span class="sxs-lookup"><span data-stu-id="72776-230">Least significant 32-bits of physical address (only if physical mapping needed)</span></span> |
| <span data-ttu-id="72776-231">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-231">nx_ip_driver_status</span></span>             | <span data-ttu-id="72776-232">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-232">Completion status.</span></span> <span data-ttu-id="72776-233">Se o controlador não conseguir enviar o pacote, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-233">If the driver is not able to send the packet, it will return a non-zero error status.</span></span> |

### <a name="packet-broadcastipv4-packets-only"></a><span data-ttu-id="72776-234">Emissão de pacotes (apenas pacotes IPv4)</span><span class="sxs-lookup"><span data-stu-id="72776-234">Packet Broadcast(IPv4 packets only)</span></span>  
<span data-ttu-id="72776-235">Este pedido é quase idêntico ao pedido de envio de pacotes.</span><span class="sxs-lookup"><span data-stu-id="72776-235">This request is almost identical to the send packet request.</span></span> <span data-ttu-id="72776-236">A única diferença é que os campos de endereço físico de destino estão definidos para o endereço MAC de transmissão Ethernet.</span><span class="sxs-lookup"><span data-stu-id="72776-236">The only difference is that the destination physical address fields are set to the Ethernet broadcast MAC address.</span></span> <span data-ttu-id="72776-237">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de transmissão de pacotes.</span><span class="sxs-lookup"><span data-stu-id="72776-237">The following NX_IP_DRIVER members are used for the packet broadcast request.</span></span>

| <span data-ttu-id="72776-238">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-238">NX_IP_DRIVER&nbsp;member</span></span>                | <span data-ttu-id="72776-239">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-239">Meaning</span></span>                                                                                                  |
|------------------------------------|----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="72776-240">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-240">nx_ip_driver_command</span></span>               | <span data-ttu-id="72776-241">NX_LINK_PACKET_BROADCAST</span><span class="sxs-lookup"><span data-stu-id="72776-241">NX_LINK_PACKET_BROADCAST</span></span>                                                                                 |
| <span data-ttu-id="72776-242">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-242">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="72776-243">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-243">Pointer to IP instance</span></span>                                                                                   |
| <span data-ttu-id="72776-244">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="72776-244">nx_ip_driver_packet</span></span>                | <span data-ttu-id="72776-245">Ponteiro para o pacote para enviar</span><span class="sxs-lookup"><span data-stu-id="72776-245">Pointer to the packet to send</span></span>                                                                            |
| <span data-ttu-id="72776-246">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="72776-246">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="72776-247">0x0000FFFF (transmissão)</span><span class="sxs-lookup"><span data-stu-id="72776-247">0x0000FFFF (broadcast)</span></span>                                                                                   |
| <span data-ttu-id="72776-248">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-248">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="72776-249">0xFFFFFFFF (transmissão)</span><span class="sxs-lookup"><span data-stu-id="72776-249">0xFFFFFFFF (broadcast)</span></span>                                                                                   |
| <span data-ttu-id="72776-250">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-250">nx_ip_driver_interface</span></span>             | <span data-ttu-id="72776-251">Ponteiro para a instância da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-251">Pointer to the interface instance.</span></span>                                                                       |
| <span data-ttu-id="72776-252">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-252">nx_ip_driver_status</span></span>                | <span data-ttu-id="72776-253">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-253">Completion status.</span></span> <span data-ttu-id="72776-254">Se o controlador não conseguir enviar o pacote, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-254">If the driver is not able to send the packet, it will return a non-zero error status.</span></span> |

### <a name="arp-send"></a><span data-ttu-id="72776-255">Envio ARP</span><span class="sxs-lookup"><span data-stu-id="72776-255">ARP Send</span></span>  
<span data-ttu-id="72776-256">Este pedido também é semelhante ao pedido de envio de pacote IP.</span><span class="sxs-lookup"><span data-stu-id="72776-256">This request is also similar to the IP packet send request.</span></span> <span data-ttu-id="72776-257">A única diferença é que o cabeçalho Ethernet especifica um pacote ARP em vez de um pacote IP, e os campos de endereço físico de destino são definidos para endereço de transmissão MAC.</span><span class="sxs-lookup"><span data-stu-id="72776-257">The only difference is that the Ethernet header specifies an ARP packet instead of an IP packet, and destination physical address fields are set to MAC broadcast address.</span></span> <span data-ttu-id="72776-258">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de envio ARP.</span><span class="sxs-lookup"><span data-stu-id="72776-258">The following NX_IP_DRIVER members are used for the ARP send request.</span></span>

| <span data-ttu-id="72776-259">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-259">NX_IP_DRIVER&nbsp;member</span></span>                | <span data-ttu-id="72776-260">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-260">Meaning</span></span>                                                                                                      |
|------------------------------------|--------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="72776-261">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-261">nx_ip_driver_command</span></span>               | <span data-ttu-id="72776-262">NX_LINK_ARP_SEND</span><span class="sxs-lookup"><span data-stu-id="72776-262">NX_LINK_ARP_SEND</span></span>                                                                                             |
| <span data-ttu-id="72776-263">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-263">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="72776-264">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-264">Pointer to IP instance</span></span>                                                                                       |
| <span data-ttu-id="72776-265">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="72776-265">nx_ip_driver_packet</span></span>                | <span data-ttu-id="72776-266">Ponteiro para o pacote para enviar</span><span class="sxs-lookup"><span data-stu-id="72776-266">Pointer to the packet to send</span></span>                                                                                |
| <span data-ttu-id="72776-267">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="72776-267">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="72776-268">0x0000FFFF (transmissão)</span><span class="sxs-lookup"><span data-stu-id="72776-268">0x0000FFFF (broadcast)</span></span>                                                                                       |
| <span data-ttu-id="72776-269">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-269">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="72776-270">0xFFFFFFFF (transmissão)</span><span class="sxs-lookup"><span data-stu-id="72776-270">0xFFFFFFFF (broadcast)</span></span>                                                                                       |
| <span data-ttu-id="72776-271">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-271">nx_ip_driver_interface</span></span>             | <span data-ttu-id="72776-272">Ponteiro para a instância da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-272">Pointer to the interface instance.</span></span>                                                                           |
| <span data-ttu-id="72776-273">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-273">nx_ip_driver_status</span></span>                | <span data-ttu-id="72776-274">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-274">Completion status.</span></span> <span data-ttu-id="72776-275">Se o controlador não conseguir enviar o pacote ARP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-275">If the driver is not able to send the ARP packet, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-276">*Se não for necessário mapeamento físico, a implementação deste pedido não é necessária*.</span><span class="sxs-lookup"><span data-stu-id="72776-276">*If physical mapping is not needed, implementation of this request is not required*.</span></span>

<span data-ttu-id="72776-277">*Embora a ARP tenha sido substituída pelo Protocolo de Descoberta de Vizinhos e pelo Protocolo de Descoberta do Router no IPv6, os controladores da rede Ethernet ainda devem ser compatíveis com pares IPv4 e routers. Por isso, os condutores ainda devem manusear pacotes ARP*.</span><span class="sxs-lookup"><span data-stu-id="72776-277">*Although ARP has been replaced with the Neighbor Discovery Protocol and the Router Discovery Protocol in IPv6, Ethernet network drivers must still be compatible with IPv4 peers and routers. Therefore, drivers must still handle ARP packets*.</span></span>

### <a name="arp-response-send"></a><span data-ttu-id="72776-278">Envio de resposta ARP</span><span class="sxs-lookup"><span data-stu-id="72776-278">ARP Response Send</span></span>  
<span data-ttu-id="72776-279">Este pedido é quase idêntico ao pedido de envio de pacotes ARP.</span><span class="sxs-lookup"><span data-stu-id="72776-279">This request is almost identical to the ARP send packet request.</span></span> <span data-ttu-id="72776-280">A única diferença é que os campos de endereços físicos de destino são passados a partir da instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-280">The only difference is the destination physical address fields are passed from the IP instance.</span></span> <span data-ttu-id="72776-281">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de envio de resposta ARP.</span><span class="sxs-lookup"><span data-stu-id="72776-281">The following NX_IP_DRIVER members are used for the ARP response send request.</span></span>

| <span data-ttu-id="72776-282">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-282">NX_IP_DRIVER&nbsp;member</span></span>                  | <span data-ttu-id="72776-283">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-283">Meaning</span></span>                                  |
| -------------------------------------- | -----------------------------------------|
| <span data-ttu-id="72776-284">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-284">nx_ip_driver_command</span></span>                | <span data-ttu-id="72776-285">NX_LINK_ARP_RESPONSE_SEND</span><span class="sxs-lookup"><span data-stu-id="72776-285">NX_LINK_ARP_RESPONSE_SEND</span></span>            |
| <span data-ttu-id="72776-286">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-286">nx_ip_driver_ptr</span></span>                    | <span data-ttu-id="72776-287">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-287">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-288">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="72776-288">nx_ip_driver_packet</span></span>                 | <span data-ttu-id="72776-289">Ponteiro para o pacote para enviar</span><span class="sxs-lookup"><span data-stu-id="72776-289">Pointer to the packet to send</span></span>          |
| <span data-ttu-id="72776-290">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="72776-290">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="72776-291">Mais significativo 32 bits de endereço físico</span><span class="sxs-lookup"><span data-stu-id="72776-291">Most significant 32-bits of physical address</span></span> |
| <span data-ttu-id="72776-292">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-292">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="72776-293">Menos significativo 32 bits de endereço físico</span><span class="sxs-lookup"><span data-stu-id="72776-293">Least significant 32-bits of physical address</span></span> |
| <span data-ttu-id="72776-294">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-294">nx_ip_driver_interface</span></span>              | <span data-ttu-id="72776-295">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-295">Pointer to the interface instance</span></span> |
| <span data-ttu-id="72776-296">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-296">nx_ip_driver_status</span></span>                 | <span data-ttu-id="72776-297">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-297">Completion status.</span></span> <span data-ttu-id="72776-298">Se o controlador não conseguir enviar o pacote ARP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-298">If the driver is not able to send the ARP packet, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-299">*Se não for necessário mapeamento físico, a implementação deste pedido não é necessária*.</span><span class="sxs-lookup"><span data-stu-id="72776-299">*If physical mapping is not needed, implementation of this request is not required*.</span></span>

### <a name="rarp-send"></a><span data-ttu-id="72776-300">RARP Enviar</span><span class="sxs-lookup"><span data-stu-id="72776-300">RARP Send</span></span>   
<span data-ttu-id="72776-301">Este pedido é quase idêntico ao pedido de envio de pacotes ARP.</span><span class="sxs-lookup"><span data-stu-id="72776-301">This request is almost identical to the ARP send packet request.</span></span> <span data-ttu-id="72776-302">As únicas diferenças são o tipo de cabeçalho de pacote e os campos de endereço físico não são necessários porque o destino físico é sempre um endereço de transmissão.</span><span class="sxs-lookup"><span data-stu-id="72776-302">The only differences are the type of packet header and the physical address fields are not required because the physical destination is always a broadcast address.</span></span>

<span data-ttu-id="72776-303">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de envio da RARP.</span><span class="sxs-lookup"><span data-stu-id="72776-303">The following NX_IP_DRIVER members are used for the RARP send request.</span></span>

| <span data-ttu-id="72776-304">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-304">NX_IP_DRIVER&nbsp;member</span></span>                | <span data-ttu-id="72776-305">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-305">Meaning</span></span>                                                                                                       |
|------------------------------------|---------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="72776-306">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-306">nx_ip_driver_command</span></span>               | <span data-ttu-id="72776-307">NX_LINK_RARP_SEND</span><span class="sxs-lookup"><span data-stu-id="72776-307">NX_LINK_RARP_SEND</span></span>                                                                                             |
| <span data-ttu-id="72776-308">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-308">nx_ip_driver_ptr</span></span>                   | <span data-ttu-id="72776-309">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-309">Pointer to IP instance</span></span>                                                                                        |
| <span data-ttu-id="72776-310">nx_ip_driver_packet</span><span class="sxs-lookup"><span data-stu-id="72776-310">nx_ip_driver_packet</span></span>                | <span data-ttu-id="72776-311">Ponteiro para o pacote para enviar</span><span class="sxs-lookup"><span data-stu-id="72776-311">Pointer to the packet to send</span></span>                                                                                 |
| <span data-ttu-id="72776-312">nx_ip_driver_physical_address_ms w</span><span class="sxs-lookup"><span data-stu-id="72776-312">nx_ip_driver_physical_address_ms w</span></span> | <span data-ttu-id="72776-313">0x0000FFFF (transmissão)</span><span class="sxs-lookup"><span data-stu-id="72776-313">0x0000FFFF (broadcast)</span></span>                                                                                        |
| <span data-ttu-id="72776-314">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-314">nx_ip_driver_physical_address_lsw</span></span>  | <span data-ttu-id="72776-315">0xFFFFFFFF (transmissão)</span><span class="sxs-lookup"><span data-stu-id="72776-315">0xFFFFFFFF (broadcast)</span></span>                                                                                        |
| <span data-ttu-id="72776-316">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-316">nx_ip_driver_interface</span></span>             | <span data-ttu-id="72776-317">Ponteiro para a instância da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-317">Pointer to the interface instance.</span></span>                                                                            |
| <span data-ttu-id="72776-318">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-318">nx_ip_driver_status</span></span>                | <span data-ttu-id="72776-319">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-319">Completion status.</span></span> <span data-ttu-id="72776-320">Se o controlador não conseguir enviar o pacote RARP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-320">If the driver is not able to send the RARP packet, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-321">*As aplicações que requerem o serviço RARP devem implementar este comando*.</span><span class="sxs-lookup"><span data-stu-id="72776-321">*Applications that require RARP service must implement this command*.</span></span>

### <a name="multicast-group-join"></a><span data-ttu-id="72776-322">Grupo Multicast Junta-se</span><span class="sxs-lookup"><span data-stu-id="72776-322">Multicast Group Join</span></span>   
<span data-ttu-id="72776-323">Este pedido é feito com o serviço ***nx_igmp_multicast_interface join** _ e _*_nx_ipv4_multicast_interface_join_*_ em IPv4, _ *_nxd_ipv6_multicast_interface_join_** serviço no IPv6, e várias operações exigidas pelo IPv6.</span><span class="sxs-lookup"><span data-stu-id="72776-323">This request is made with the ***nx_igmp_multicast_interface join** _ and _*_nx_ipv4_multicast_interface_join_*_ service in IPv4, _ *_nxd_ipv6_multicast_interface_join_** service in IPv6, and various operation required by IPv6.</span></span> <span data-ttu-id="72776-324">O controlador de rede pega no endereço de grupo multicast fornecido e configura os meios físicos para aceitar pacotes de entrada a partir desse endereço de grupo multicast.</span><span class="sxs-lookup"><span data-stu-id="72776-324">The network driver takes the supplied multicast group address and sets up the physical media to accept incoming packets from that multicast group address.</span></span> <span data-ttu-id="72776-325">Note que para os condutores que não suportam filtro multicast, a lógica de receção do condutor pode ter de estar em modo promíscuo.</span><span class="sxs-lookup"><span data-stu-id="72776-325">Note that for drivers that don't support multicast filter, the driver receive logic may have to be in promiscuous mode.</span></span> <span data-ttu-id="72776-326">Neste caso, o condutor poderá ter de filtrar os quadros de entrada com base no endereço MAC de destino, reduzindo assim a quantidade de tráfego passado para a instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-326">In this case, the driver may need to filter incoming frames based on destination MAC address, thus reducing the amount of traffic passed into the IP instance.</span></span> <span data-ttu-id="72776-327">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de associação do grupo multicast.</span><span class="sxs-lookup"><span data-stu-id="72776-327">The following NX_IP_DRIVER members are used for the multicast group join request.</span></span>

| <span data-ttu-id="72776-328">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-328">NX_IP_DRIVER&nbsp;member</span></span>                  | <span data-ttu-id="72776-329">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-329">Meaning</span></span>                                 |
| -------------------------------------- | --------------------------------------- |
| <span data-ttu-id="72776-330">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-330">nx_ip_driver_command</span></span>                | <span data-ttu-id="72776-331">NX_LINK_MULTICAST_JOIN</span><span class="sxs-lookup"><span data-stu-id="72776-331">NX_LINK_MULTICAST_JOIN</span></span>               |
| <span data-ttu-id="72776-332">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-332">nx_ip_driver_ptr</span></span>                    | <span data-ttu-id="72776-333">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-333">Pointer to IP instance</span></span>  |
| <span data-ttu-id="72776-334">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="72776-334">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="72776-335">Mais significativo 32 bits de endereço físico multicast</span><span class="sxs-lookup"><span data-stu-id="72776-335">Most significant 32-bits of physical multicast address</span></span> |
| <span data-ttu-id="72776-336">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-336">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="72776-337">Menos significativo 32 bits de endereço físico multicast</span><span class="sxs-lookup"><span data-stu-id="72776-337">Least significant 32-bits of physical multicast address</span></span> |
| <span data-ttu-id="72776-338">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-338">nx_ip_driver_interface</span></span>              | <span data-ttu-id="72776-339">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-339">Pointer to the interface instance</span></span> |
| <span data-ttu-id="72776-340">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-340">nx_ip_driver_status</span></span>                 | <span data-ttu-id="72776-341">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-341">Completion status.</span></span> <span data-ttu-id="72776-342">Se o condutor não conseguir aderir ao grupo multicast, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-342">If the driver is not able to join the multicast group, it will return a non-zero error status.</span></span> |

> [!NOTE]  
> <span data-ttu-id="72776-343">*As aplicações IPv6 exigirão que o multicast seja implementado no controlador para protocolos baseados no ICMPv6, como a configuração de endereços. No entanto, para aplicações IPv4, a implementação deste pedido não é necessária se não forem necessárias capacidades multicast*.</span><span class="sxs-lookup"><span data-stu-id="72776-343">*IPv6 applications will require multicast to be implemented in the driver for ICMPv6 based protocols such as address configuration. However, for IPv4 applications, implementation of this request is not necessary if multicast capabilities are not required*.</span></span>

> [!IMPORTANT]  
> <span data-ttu-id="72776-344">*Se o IPv6 não estiver ativado e não forem necessárias capacidades multicast pelo IPv4, a implementação deste pedido não é necessária*.</span><span class="sxs-lookup"><span data-stu-id="72776-344">*If IPv6 is not enabled, and multicast capabilities are not required by IPv4, implementation of this request is not required*.</span></span>

### <a name="multicast-group-leave"></a><span data-ttu-id="72776-345">Licença de grupo multicast</span><span class="sxs-lookup"><span data-stu-id="72776-345">Multicast Group Leave</span></span>  
<span data-ttu-id="72776-346">Este pedido é invocado chamando explicitamente os serviços ***nx_igmp_multicast_interface_leave** _ ou _*_nx_ipv4_multicast_interface_leave_*_ em IPv4, _ *_nxd_ipv6_multicast_interface_leave_** serviço no IPv6, ou por várias operações internas da NetX Duo necessárias para o IPv6.</span><span class="sxs-lookup"><span data-stu-id="72776-346">This request is invoked by explicitly calling the ***nx_igmp_multicast_interface_leave** _ or _*_nx_ipv4_multicast_interface_leave_*_ services in IPv4, _ *_nxd_ipv6_multicast_interface_leave_** service in IPv6, or by various internal NetX Duo operations required for IPv6.</span></span> <span data-ttu-id="72776-347">O controlador remove o endereço multicast Ethernet fornecido da lista multicast.</span><span class="sxs-lookup"><span data-stu-id="72776-347">The driver removes the supplied Ethernet multicast address from the multicast list.</span></span> <span data-ttu-id="72776-348">Depois de um anfitrião ter deixado um grupo multicast, os pacotes na rede com este endereço multicast Ethernet já não são recebidos por esta instância IP.</span><span class="sxs-lookup"><span data-stu-id="72776-348">After a host has left a multicast group, packets on the network with this Ethernet multicast address are no longer received by this IP instance.</span></span> <span data-ttu-id="72776-349">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de licença de grupo multicast.</span><span class="sxs-lookup"><span data-stu-id="72776-349">The following NX_IP_DRIVER members are used for the multicast group leave request.</span></span>

| <span data-ttu-id="72776-350">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-350">NX_IP_DRIVER&nbsp;member</span></span>              | <span data-ttu-id="72776-351">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-351">Meaning</span></span>                              |
| -----------------------------------| -------------------------------------|
| <span data-ttu-id="72776-352">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-352">nx_ip_driver_command</span></span>            | <span data-ttu-id="72776-353">NX_LINK_MULTICAST_LEAVE</span><span class="sxs-lookup"><span data-stu-id="72776-353">NX_LINK_MULTICAST_LEAVE</span></span>           |
| <span data-ttu-id="72776-354">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-354">nx_ip_driver_ptr</span></span>                | <span data-ttu-id="72776-355">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-355">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-356">nx_ip_driver_physical_address_msw</span><span class="sxs-lookup"><span data-stu-id="72776-356">nx_ip_driver_physical_address_msw</span></span> | <span data-ttu-id="72776-357">Mais significativo 32 bits de endereço físico multicast</span><span class="sxs-lookup"><span data-stu-id="72776-357">Most significant 32 bits of physical multicast address</span></span> |
| <span data-ttu-id="72776-358">nx_ip_driver_physical_address_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-358">nx_ip_driver_physical_address_lsw</span></span> | <span data-ttu-id="72776-359">Menos significativos 32 bits de endereço físico multicast</span><span class="sxs-lookup"><span data-stu-id="72776-359">Least significant 32 bits of physical multicast address</span></span> |
| <span data-ttu-id="72776-360">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-360">nx_ip_driver_interface</span></span>              | <span data-ttu-id="72776-361">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-361">Pointer to the interface instance</span></span> |
| <span data-ttu-id="72776-362">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-362">nx_ip_driver_status</span></span>                 | <span data-ttu-id="72776-363">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-363">Completion status.</span></span> <span data-ttu-id="72776-364">Se o condutor não conseguir sair do grupo multicast, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-364">If the driver is not able to leave the multicast group, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-365">*Se não forem necessárias capacidades multicast por IPv4 ou IPv6, a implementação deste pedido não é necessária*.</span><span class="sxs-lookup"><span data-stu-id="72776-365">*If multicast capabilities are not required by either IPv4 or IPv6, implementation of this request is not required*.</span></span>

### <a name="attach-interface"></a><span data-ttu-id="72776-366">Interface anexa</span><span class="sxs-lookup"><span data-stu-id="72776-366">Attach Interface</span></span>  
<span data-ttu-id="72776-367">Este pedido é invocado do Duo NetX ao controlador do dispositivo, permitindo ao condutor associar a instância do condutor à instância IP correspondente e à instância de interface física dentro do IP.</span><span class="sxs-lookup"><span data-stu-id="72776-367">This request is invoked from the NetX Duo to the device driver, allowing the driver to associate the driver instance with the corresponding IP instance and the physical interface instance within the IP.</span></span> <span data-ttu-id="72776-368">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de interface anexa.</span><span class="sxs-lookup"><span data-stu-id="72776-368">The following NX_IP_DRIVER members are used for the attach interface request.</span></span>

| <span data-ttu-id="72776-369">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-369">NX_IP_DRIVER&nbsp;member</span></span>    | <span data-ttu-id="72776-370">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-370">Meaning</span></span>                  |
|------------------------|--------------------------|
| <span data-ttu-id="72776-371">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-371">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-372">NX_LINK_INTERFACE_ATTACH</span><span class="sxs-lookup"><span data-stu-id="72776-372">NX_LINK_INTERFACE_ATTACH</span></span> |
| <span data-ttu-id="72776-373">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-373">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-374">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-374">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-375">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-375">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-376">Ponteiro para a instância da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-376">Pointer to the interface instance.</span></span>|
| <span data-ttu-id="72776-377">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-377">nx_ip_driver_status</span></span>    | <span data-ttu-id="72776-378">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-378">Completion status.</span></span> <span data-ttu-id="72776-379">Se o controlador não conseguir separar a interface especificada da instância IP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-379">If the driver is not able to detach the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="detach-interface"></a><span data-ttu-id="72776-380">Interface de descolexo</span><span class="sxs-lookup"><span data-stu-id="72776-380">Detach Interface</span></span>    
<span data-ttu-id="72776-381">Este pedido é invocado pela NetX Duo ao controlador do dispositivo, permitindo ao condutor dissociar a instância do condutor com a instância IP correspondente e a instância de interface física dentro do IP.</span><span class="sxs-lookup"><span data-stu-id="72776-381">This request is invoked by NetX Duo to the device driver, allowing the driver to disassociate the driver instance with the corresponding IP instance and the physical interface instance within the IP.</span></span> <span data-ttu-id="72776-382">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de interface anexa.</span><span class="sxs-lookup"><span data-stu-id="72776-382">The following NX_IP_DRIVER members are used for the attach interface request.</span></span>

| <span data-ttu-id="72776-383">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-383">NX_IP_DRIVER&nbsp;member</span></span>    | <span data-ttu-id="72776-384">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-384">Meaning</span></span>                                                                                                                                    |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="72776-385">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-385">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-386">NX_LINK_INTERFACE_DETACH</span><span class="sxs-lookup"><span data-stu-id="72776-386">NX_LINK_INTERFACE_DETACH</span></span>                                                                                                                   |
| <span data-ttu-id="72776-387">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-387">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-388">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-388">Pointer to IP instance</span></span>                                                                                                                     |
| <span data-ttu-id="72776-389">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-389">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-390">Ponteiro para a instância da interface.</span><span class="sxs-lookup"><span data-stu-id="72776-390">Pointer to the interface instance.</span></span>                                                                                                         |
| <span data-ttu-id="72776-391">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-391">nx_ip_driver_status</span></span>    | <span data-ttu-id="72776-392">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-392">Completion status.</span></span> <span data-ttu-id="72776-393">Se o controlador não conseguir ligar a interface especificada à instância IP, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-393">If the driver is not able to attach the specified interface to the IP instance, it will return a non-zero error status.</span></span> |

### <a name="get-link-status"></a><span data-ttu-id="72776-394">Obtenha o estado do link</span><span class="sxs-lookup"><span data-stu-id="72776-394">Get Link Status</span></span>    
<span data-ttu-id="72776-395">A aplicação pode consultar o estado da ligação de interface de rede utilizando o serviço ***netX*** Duo nx_ip_interface_status_check serviço para qualquer interface no anfitrião.</span><span class="sxs-lookup"><span data-stu-id="72776-395">The application can query the network interface link status using the NetX Duo service ***nx_ip_interface_status_check*** service for any interface on the host.</span></span> <span data-ttu-id="72776-396">Consulte o Capítulo 4, "Descrição dos Serviços NetX Duo" na página 149, para obter mais detalhes sobre estes serviços.</span><span class="sxs-lookup"><span data-stu-id="72776-396">See Chapter 4, "Description of NetX Duo Services" on page 149, for more details on these services.</span></span>

<span data-ttu-id="72776-397">O estado do link está contido no campo *nx_interface_link_up* na estrutura NX_INTERFACE apontada por *nx_ip_driver_interface* ponteiro.</span><span class="sxs-lookup"><span data-stu-id="72776-397">The link status is contained in the *nx_interface_link_up* field in the NX_INTERFACE structure pointed to by *nx_ip_driver_interface* pointer.</span></span> <span data-ttu-id="72776-398">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de estado de ligação.</span><span class="sxs-lookup"><span data-stu-id="72776-398">The following NX_IP_DRIVER members are used for the link status request.</span></span>

| <span data-ttu-id="72776-399">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-399">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="72776-400">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-400">Meaning</span></span>                  |
| --------------------------- | -------------------------|
| <span data-ttu-id="72776-401">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-401">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-402">NX_LINK_GET_STATUS</span><span class="sxs-lookup"><span data-stu-id="72776-402">NX_LINK_GET_STATUS</span></span>    |
| <span data-ttu-id="72776-403">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-403">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-404">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-404">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-405">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-405">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-406">Ponteiro para o destino para colocar o estado.</span><span class="sxs-lookup"><span data-stu-id="72776-406">Pointer to the destination to place the status.</span></span> |
| <span data-ttu-id="72776-407">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-407">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-408">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-408">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="72776-409">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-409">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-410">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-410">Completion status.</span></span> <span data-ttu-id="72776-411">Se o controlador não conseguir obter um estado específico, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-411">If the driver is not able to get specific status, it will return a non-zero error status.</span></span> |

> [!NOTE]  
> <span data-ttu-id="72776-412">\***nx_ip_status_check** _ ainda está disponível para verificar o estado da interface primária.</span><span class="sxs-lookup"><span data-stu-id="72776-412">\***nx_ip_status_check** _ is still available for checking the status of the primary interface.</span></span> <span data-ttu-id="72776-413">No entanto, os desenvolvedores de aplicações são encorajados a usar o serviço específico da interface: _ *_nx_ip_interface_status_check._*\*</span><span class="sxs-lookup"><span data-stu-id="72776-413">However, application developers are encouraged to use the interface specific service: _ *_nx_ip_interface_status_check._*\*</span></span>

### <a name="get-link-speed"></a><span data-ttu-id="72776-414">Obtenha velocidade de ligação</span><span class="sxs-lookup"><span data-stu-id="72776-414">Get Link Speed</span></span>  
<span data-ttu-id="72776-415">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-415">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-416">O condutor armazena a velocidade da linha do link no destino fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-416">The driver stores the link's line speed in the supplied destination.</span></span> <span data-ttu-id="72776-417">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de velocidade da linha de ligação.</span><span class="sxs-lookup"><span data-stu-id="72776-417">The following NX_IP_DRIVER members are used for the link line speed request.</span></span>

| <span data-ttu-id="72776-418">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-418">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="72776-419">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-419">Meaning</span></span>                   |
| ------------------------| ------------------------- |
| <span data-ttu-id="72776-420">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-420">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-421">NX_LINK_GET_SPEED</span><span class="sxs-lookup"><span data-stu-id="72776-421">NX_LINK_GET_SPEED</span></span>          |
| <span data-ttu-id="72776-422">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-422">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-423">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-423">Pointer to IP instance</span></span>                                                                                         |
| <span data-ttu-id="72776-424">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-424">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-425">Ponteiro para o destino para colocar a velocidade da linha</span><span class="sxs-lookup"><span data-stu-id="72776-425">Pointer to the destination to place the line speed</span></span>                                                             |
| <span data-ttu-id="72776-426">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-426">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-427">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-427">Pointer to the interface instance</span></span>                                                                              |
| <span data-ttu-id="72776-428">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-428">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-429">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-429">Completion status.</span></span> <span data-ttu-id="72776-430">Se o condutor não conseguir obter informações de velocidade, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-430">If the driver is not able to get speed information, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-431">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-431">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-duplex-type"></a><span data-ttu-id="72776-432">Obter Tipo Duplex</span><span class="sxs-lookup"><span data-stu-id="72776-432">Get Duplex Type</span></span>   
<span data-ttu-id="72776-433">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-433">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-434">O condutor armazena o tipo duplex do link no destino fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-434">The driver stores the link's duplex type in the supplied destination.</span></span> <span data-ttu-id="72776-435">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido do tipo duplex.</span><span class="sxs-lookup"><span data-stu-id="72776-435">The following NX_IP_DRIVER members are used for the duplex type request.</span></span>

| <span data-ttu-id="72776-436">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-436">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="72776-437">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-437">Meaning</span></span>                                                                                                    |
| --------------------------- | -------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="72776-438">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-438">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-439">NX_LINK_GET_DUPLEX_TYPE</span><span class="sxs-lookup"><span data-stu-id="72776-439">NX_LINK_GET_DUPLEX_TYPE</span></span>                                                                                    |
| <span data-ttu-id="72776-440">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-440">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-441">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-441">Pointer to IP instance</span></span>                                                                                         |
| <span data-ttu-id="72776-442">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-442">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-443">Ponteiro para o destino para colocar o tipo duplex</span><span class="sxs-lookup"><span data-stu-id="72776-443">Pointer to the destination to place the duplex type</span></span>                                                            |
| <span data-ttu-id="72776-444">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-444">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-445">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-445">Pointer to the interface instance</span></span>                                                                              |
| <span data-ttu-id="72776-446">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-446">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-447">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-447">Completion status.</span></span> <span data-ttu-id="72776-448">Se o controlador não conseguir obter informações duplex, irá retornar um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-448">If the driver is not able to get duplex information, it will return a nonzero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-449">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-449">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-error-count"></a><span data-ttu-id="72776-450">Obtenha a contagem de erros</span><span class="sxs-lookup"><span data-stu-id="72776-450">Get Error Count</span></span>   
<span data-ttu-id="72776-451">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-451">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-452">O condutor armazena a contagem de erros do link no destino fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-452">The driver stores the link's error count in the supplied destination.</span></span> <span data-ttu-id="72776-453">Para suportar esta funcionalidade, o controlador necessita de rastrear os erros de funcionamento.</span><span class="sxs-lookup"><span data-stu-id="72776-453">To support this feature, the driver needs to track operation errors.</span></span> <span data-ttu-id="72776-454">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de contagem de erros de ligação.</span><span class="sxs-lookup"><span data-stu-id="72776-454">The following NX_IP_DRIVER members are used for the link error count request.</span></span>

| <span data-ttu-id="72776-455">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-455">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="72776-456">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-456">Meaning</span></span>                   |
| --------------------------- | -------------------------------|
| <span data-ttu-id="72776-457">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-457">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-458">NX_LINK_GET_ERROR_COUNT</span><span class="sxs-lookup"><span data-stu-id="72776-458">NX_LINK_GET_ERROR_COUNT</span></span>   |
| <span data-ttu-id="72776-459">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-459">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-460">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-460">Pointer to IP instance</span></span>   |
| <span data-ttu-id="72776-461">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-461">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-462">Ponteiro para o destino para colocar a contagem de erros</span><span class="sxs-lookup"><span data-stu-id="72776-462">Pointer to the destination to place the error count</span></span> |
| <span data-ttu-id="72776-463">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-463">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-464">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-464">Pointer to the interface instance</span></span>|
| <span data-ttu-id="72776-465">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-465">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-466">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-466">Completion status.</span></span> <span data-ttu-id="72776-467">Se o controlador não conseguir obter a contagem de erros, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-467">If the driver is not able to get error count, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="72776-468">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-468">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-receive-packet-count"></a><span data-ttu-id="72776-469">Receber Contagem de Pacotes</span><span class="sxs-lookup"><span data-stu-id="72776-469">Get Receive Packet Count</span></span>    
<span data-ttu-id="72776-470">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-470">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-471">O condutor armazena a contagem de pacotes de receção do link no destino fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-471">The driver stores the link's receive packet count in the supplied destination.</span></span> <span data-ttu-id="72776-472">Para suportar esta funcionalidade, o controlador precisa de acompanhar o número de pacotes recebidos.</span><span class="sxs-lookup"><span data-stu-id="72776-472">To support this feature, the driver needs to keep track of the number of packets received.</span></span> <span data-ttu-id="72776-473">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de contagem de pacotes de ligação.</span><span class="sxs-lookup"><span data-stu-id="72776-473">The following NX_IP_DRIVER members are used for the link receive packet count request.</span></span>

| <span data-ttu-id="72776-474">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-474">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="72776-475">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-475">Meaning</span></span>                        |
| --------------------------- | -------------------------------|
| <span data-ttu-id="72776-476">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-476">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-477">NX_LINK_GET_RX_COUNT</span><span class="sxs-lookup"><span data-stu-id="72776-477">NX_LINK_GET_RX_COUNT</span></span>      |
| <span data-ttu-id="72776-478">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-478">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-479">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-479">Pointer to IP instance</span></span>  |
| <span data-ttu-id="72776-480">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-480">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-481">Ponteiro para o destino para colocar a contagem de pacotes de receção</span><span class="sxs-lookup"><span data-stu-id="72776-481">Pointer to the destination to place the receive packet count</span></span>   |
| <span data-ttu-id="72776-482">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-482">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-483">Ponteiro para a interface de rede física</span><span class="sxs-lookup"><span data-stu-id="72776-483">Pointer to the physical network interface</span></span>  |
| <span data-ttu-id="72776-484">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-484">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-485">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-485">Completion status.</span></span> <span data-ttu-id="72776-486">Se o condutor não conseguir receber a contagem, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-486">If the driver is not able to get receive count, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-487">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-487">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-transmit-packet-count"></a><span data-ttu-id="72776-488">Obtenha a contagem de pacotes de transmissão</span><span class="sxs-lookup"><span data-stu-id="72776-488">Get Transmit Packet Count</span></span>   
<span data-ttu-id="72776-489">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-489">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-490">O condutor armazena a contagem de pacotes de transmissão do link no destino fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-490">The driver stores the link's transmit packet count in the supplied destination.</span></span> <span data-ttu-id="72776-491">Para suportar esta funcionalidade, o controlador necessita de acompanhar cada pacote que transmite em cada interface.</span><span class="sxs-lookup"><span data-stu-id="72776-491">To support this feature, the driver needs to keep track of each packet it transmits on each interface.</span></span> <span data-ttu-id="72776-492">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de contagem de pacotes de transmissão de ligação.</span><span class="sxs-lookup"><span data-stu-id="72776-492">The following  NX_IP_DRIVER members are used for the link transmit packet count request.</span></span>

| <span data-ttu-id="72776-493">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-493">NX_IP_DRIVER&nbsp;member</span></span>   | <span data-ttu-id="72776-494">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-494">Meaning</span></span>                   |
| ----------------------- | ------------------------- |
| <span data-ttu-id="72776-495">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-495">nx_ip_driver_command</span></span> | <span data-ttu-id="72776-496">NX_LINK_GET_TX_COUNT</span><span class="sxs-lookup"><span data-stu-id="72776-496">NX_LINK_GET_TX_COUNT</span></span>  |
| <span data-ttu-id="72776-497">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-497">nx_ip_driver_ptr</span></span>     | <span data-ttu-id="72776-498">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-498">Pointer to IP instance</span></span>    |
| <span data-ttu-id="72776-499">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-499">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-500">Ponteiro para o destino para colocar a contagem de pacotes de transmissão</span><span class="sxs-lookup"><span data-stu-id="72776-500">Pointer to the destination to place the transmit packet count</span></span>  |
| <span data-ttu-id="72776-501">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-501">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-502">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-502">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="72776-503">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-503">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-504">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-504">Completion status.</span></span> <span data-ttu-id="72776-505">Se o controlador não conseguir obter a contagem de transmissão, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-505">If the driver is not able to get transmit count, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-506">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-506">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="get-allocation-errors"></a><span data-ttu-id="72776-507">Obter erros de atribuição</span><span class="sxs-lookup"><span data-stu-id="72776-507">Get Allocation Errors</span></span>   
<span data-ttu-id="72776-508">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-508">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-509">O condutor armazena a contagem de erros de atribuição de pacotes do link no destino fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-509">The driver stores the link's packet pool allocation error count in the supplied destination.</span></span> <span data-ttu-id="72776-510">Os membros seguintes NX_IP_DRIVER são utilizados para o pedido de contagem de erros de atribuição de ligações.</span><span class="sxs-lookup"><span data-stu-id="72776-510">The following NX_IP_DRIVER members are used for the link allocation error count request.</span></span>

| <span data-ttu-id="72776-511">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-511">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="72776-512">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-512">Meaning</span></span>                       |
| --------------------------- | ----------------------------- |
| <span data-ttu-id="72776-513">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-513">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-514">NX_LINK_GET_ALLOC_ERRORS</span><span class="sxs-lookup"><span data-stu-id="72776-514">NX_LINK_GET_ALLOC_ERRORS</span></span>  |
| <span data-ttu-id="72776-515">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-515">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-516">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-516">Pointer to IP instance</span></span>     |
| <span data-ttu-id="72776-517">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-517">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-518">Ponteiro para o destino para colocar a contagem de erros de atribuição</span><span class="sxs-lookup"><span data-stu-id="72776-518">Pointer to the destination to place the allocation error count</span></span>  |
| <span data-ttu-id="72776-519">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-519">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-520">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-520">Pointer to the interface instance</span></span>  |
| <span data-ttu-id="72776-521">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-521">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-522">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-522">Completion status.</span></span> <span data-ttu-id="72776-523">Se o condutor não conseguir obter erros de atribuição, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-523">If the driver is not able to get allocation errors, it will return a non-zero error status.</span></span> |

> [!IMPORTANT]  
> <span data-ttu-id="72776-524">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-524">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="driver-deferred-processing"></a><span data-ttu-id="72776-525">Processamento diferido do condutor</span><span class="sxs-lookup"><span data-stu-id="72776-525">Driver Deferred Processing</span></span>    
<span data-ttu-id="72776-526">Este pedido é feito a partir do fio do ajudante IP em resposta ao condutor que chama a _\* **rotina de nx_ip_driver_deferred_processing**_ de um isr de transmissão ou receção.</span><span class="sxs-lookup"><span data-stu-id="72776-526">This request is made from the IP helper thread in response to the driver calling the _\***nx_ip_driver_deferred_processing**_ routine from a transmit or receive ISR.</span></span> <span data-ttu-id="72776-527">Isto permite ao controlador ISR adiar o pacote receber e transmitir o processamento para o fio do ajudante IP e assim reduzir a quantidade para processar no ISR.</span><span class="sxs-lookup"><span data-stu-id="72776-527">This allows the driver ISR to defer the packet receive and transmit processing to the IP helper thread and thus reduce the amount to process in the ISR.</span></span> <span data-ttu-id="72776-528">O campo _nx_interface_additional_link_info\* na estrutura NX_INTERFACE apontada por *nx_ip_driver_interface* pode ser utilizado pelo condutor para armazenar informações sobre o evento de processamento diferido a partir do contexto do fio do ajudante IP.</span><span class="sxs-lookup"><span data-stu-id="72776-528">The _nx_interface_additional_link_info\* field in the NX_INTERFACE structure pointed to by *nx_ip_driver_interface* may be used by the driver to store information about the deferred processing event from the IP helper thread context.</span></span> <span data-ttu-id="72776-529">Os seguintes membros NX_IP_DRIVER são utilizados para o evento de processamento diferido.</span><span class="sxs-lookup"><span data-stu-id="72776-529">The following  NX_IP_DRIVER members are used for the deferred processing event.</span></span>

| <span data-ttu-id="72776-530">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-530">NX_IP_DRIVER&nbsp;member</span></span>     | <span data-ttu-id="72776-531">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-531">Meaning</span></span>                           |
| ------------------------- | --------------------------------- |
| <span data-ttu-id="72776-532">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-532">nx_ip_driver_command</span></span>   | <span data-ttu-id="72776-533">NX_LINK_DEFERRED_PROCESSING</span><span class="sxs-lookup"><span data-stu-id="72776-533">NX_LINK_DEFERRED_PROCESSING</span></span>    |
| <span data-ttu-id="72776-534">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-534">nx_ip_driver_ptr</span></span>       | <span data-ttu-id="72776-535">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-535">Pointer to IP instance</span></span>            |
| <span data-ttu-id="72776-536">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-536">nx_ip_driver_interface</span></span> | <span data-ttu-id="72776-537">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-537">Pointer to the interface instance</span></span> |

### <a name="set-physical-address"></a><span data-ttu-id="72776-538">Definir endereço físico</span><span class="sxs-lookup"><span data-stu-id="72776-538">Set Physical Address</span></span>  
<span data-ttu-id="72776-539">Este pedido é feito a partir do serviço \***nx_ip_interface_physical_address_set** _ .</span><span class="sxs-lookup"><span data-stu-id="72776-539">This request is made from within the \***nx_ip_interface_physical_address_set** _ service.</span></span> <span data-ttu-id="72776-540">Este serviço permite que uma aplicação altere o endereço físico da interface no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="72776-540">This service allows an application to change the interface physical address at run time.</span></span> <span data-ttu-id="72776-541">Ao receber este comando, o controlador é obrigado a reconfigure o endereço de hardware da interface de rede para o endereço físico fornecido.</span><span class="sxs-lookup"><span data-stu-id="72776-541">On receiving this command, the driver is required to re-configure the hardware address of the network interface to the supplied physical address.</span></span> <span data-ttu-id="72776-542">Uma vez que a instância IP já tem o novo endereço, não há necessidade de chamar o serviço _ *_nx_ip_interface_address_set_*\* deste comando.</span><span class="sxs-lookup"><span data-stu-id="72776-542">Since the IP instance already has the new address, there is no need to call the _ *_nx_ip_interface_address_set_*\* service from this command.</span></span>

<span data-ttu-id="72776-543">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de comando do utilizador.</span><span class="sxs-lookup"><span data-stu-id="72776-543">The following NX_IP_DRIVER members are used for the user command request.</span></span>

| <span data-ttu-id="72776-544">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-544">NX_IP_DRIVER&nbsp;member</span></span>      | <span data-ttu-id="72776-545">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-545">Meaning</span></span>                      |
| -------------------------- | ---------------------------- |
| <span data-ttu-id="72776-546">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-546">nx_ip_driver_command</span></span>    | <span data-ttu-id="72776-547">NX_LINK_SET_PHYSICAL_ADDRESS</span><span class="sxs-lookup"><span data-stu-id="72776-547">NX_LINK_SET_PHYSICAL_ADDRESS</span></span>  |
| <span data-ttu-id="72776-548">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-548">nx_ip_driver_ptr</span></span>        | <span data-ttu-id="72776-549">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-549">Pointer to IP instance</span></span>  |
| <span data-ttu-id="72776-550">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-550">nx_ip_driver_interface</span></span>  | <span data-ttu-id="72776-551">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-551">Pointer to the interface instance</span></span>   |
| <span data-ttu-id="72776-552">nx_ip_driver_physical_ad dress_msw</span><span class="sxs-lookup"><span data-stu-id="72776-552">nx_ip_driver_physical_ad dress_msw</span></span> | <span data-ttu-id="72776-553">32 bits mais significativos do novo endereço físico</span><span class="sxs-lookup"><span data-stu-id="72776-553">Most significant 32-bits of the new physical address</span></span>  |
| <span data-ttu-id="72776-554">nx_ip_driver_physical_ad dress_lsw</span><span class="sxs-lookup"><span data-stu-id="72776-554">nx_ip_driver_physical_ad dress_lsw</span></span> | <span data-ttu-id="72776-555">Menos significativos 32 bits do novo endereço físico</span><span class="sxs-lookup"><span data-stu-id="72776-555">Least significant 32-bits of the new physical address</span></span>  |
| <span data-ttu-id="72776-556">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-556">nx_ip_driver_status</span></span>                  | <span data-ttu-id="72776-557">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-557">Completion status.</span></span> <span data-ttu-id="72776-558">Se o controlador não conseguir reconfigurar o endereço físico, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-558">If the driver is not able to reconfigure the physical address, it will return a non-zero error status.</span></span> |

### <a name="user-commands"></a><span data-ttu-id="72776-559">Comandos do Utilizador</span><span class="sxs-lookup"><span data-stu-id="72776-559">User Commands</span></span>    
<span data-ttu-id="72776-560">Este pedido é feito a partir do serviço ***nx_ip_driver_direct_command.***</span><span class="sxs-lookup"><span data-stu-id="72776-560">This request is made from within the ***nx_ip_driver_direct_command*** service.</span></span> <span data-ttu-id="72776-561">O controlador processa os comandos específicos do utilizador da aplicação.</span><span class="sxs-lookup"><span data-stu-id="72776-561">The driver processes the application specific user commands.</span></span> <span data-ttu-id="72776-562">Os seguintes membros NX_IP_DRIVER são utilizados para o pedido de comando do utilizador.</span><span class="sxs-lookup"><span data-stu-id="72776-562">The following NX_IP_DRIVER members are used for the user command request.</span></span>

| <span data-ttu-id="72776-563">NX_IP_DRIVER &nbsp; membro</span><span class="sxs-lookup"><span data-stu-id="72776-563">NX_IP_DRIVER&nbsp;member</span></span>       | <span data-ttu-id="72776-564">Significado</span><span class="sxs-lookup"><span data-stu-id="72776-564">Meaning</span></span>                       |
| --------------------------- | ----------------------------- |
| <span data-ttu-id="72776-565">nx_ip_driver_command</span><span class="sxs-lookup"><span data-stu-id="72776-565">nx_ip_driver_command</span></span>     | <span data-ttu-id="72776-566">NX_LINK_USER_COMMAND</span><span class="sxs-lookup"><span data-stu-id="72776-566">NX_LINK_USER_COMMAND</span></span>       |
| <span data-ttu-id="72776-567">nx_ip_driver_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-567">nx_ip_driver_ptr</span></span>         | <span data-ttu-id="72776-568">Indicação para a instância IP</span><span class="sxs-lookup"><span data-stu-id="72776-568">Pointer to IP instance</span></span>        |
| <span data-ttu-id="72776-569">nx_ip_driver_return_ptr</span><span class="sxs-lookup"><span data-stu-id="72776-569">nx_ip_driver_return_ptr</span></span> | <span data-ttu-id="72776-570">Utilizador definido</span><span class="sxs-lookup"><span data-stu-id="72776-570">User defined</span></span>       |
| <span data-ttu-id="72776-571">nx_ip_driver_interface</span><span class="sxs-lookup"><span data-stu-id="72776-571">nx_ip_driver_interface</span></span>   | <span data-ttu-id="72776-572">Ponteiro para a instância da interface</span><span class="sxs-lookup"><span data-stu-id="72776-572">Pointer to the interface instance</span></span>    |
| <span data-ttu-id="72776-573">nx_ip_driver_status</span><span class="sxs-lookup"><span data-stu-id="72776-573">nx_ip_driver_status</span></span>      | <span data-ttu-id="72776-574">Estado de conclusão.</span><span class="sxs-lookup"><span data-stu-id="72776-574">Completion status.</span></span> <span data-ttu-id="72776-575">Se o controlador não conseguir executar comandos de utilizador, retornará um estado de erro não zero.</span><span class="sxs-lookup"><span data-stu-id="72776-575">If the driver is not able to execute user commands, it will return a non-zero error status.</span></span> |

> [!IMPORTANT] 
> <span data-ttu-id="72776-576">*Este pedido não é utilizado internamente pela NetX Duo pelo que a sua implementação é opcional.*</span><span class="sxs-lookup"><span data-stu-id="72776-576">*This request is not used internally by NetX Duo so its implementation is optional*.</span></span>

### <a name="unimplemented-commands"></a><span data-ttu-id="72776-577">Comandos não implacáveis</span><span class="sxs-lookup"><span data-stu-id="72776-577">Unimplemented Commands</span></span>  
<span data-ttu-id="72776-578">Os comandos não simplificados pelo controlador de rede devem ter o campo de devolução definido para NX_UNHANDLED_COMMAND.</span><span class="sxs-lookup"><span data-stu-id="72776-578">Commands unimplemented by the network driver must have the return status field set to NX_UNHANDLED_COMMAND.</span></span>

## <a name="driver-capability"></a><span data-ttu-id="72776-579">Capacidade do condutor</span><span class="sxs-lookup"><span data-stu-id="72776-579">Driver Capability</span></span>

<span data-ttu-id="72776-580">Algumas interfaces de rede oferecem funcionalidades de descarregamento de checksum.</span><span class="sxs-lookup"><span data-stu-id="72776-580">Some network interfaces offer checksum offload features.</span></span> <span data-ttu-id="72776-581">Os controladores de dispositivos podem aproveitar as acelerações de hardware para libertar o tempo de CPU de executar vários cálculos de checkum.</span><span class="sxs-lookup"><span data-stu-id="72776-581">Device drivers may take advantage of the hardware accelerations to free up CPU time from running various checksum computations.</span></span>

<span data-ttu-id="72776-582">Dependendo do nível de suporte de verificação de hardware do hardware do hardware, o controlador do dispositivo precisa de informar a instância IP de que funcionalidade de hardware está ativada.</span><span class="sxs-lookup"><span data-stu-id="72776-582">Depending the level of hardware checksum support from the hardware, the device driver needs to inform the IP instance which hardware feature is enabled.</span></span> <span data-ttu-id="72776-583">Desta forma, a instância IP está ciente da funcionalidade de hardware e descarrega o máximo de cálculo possível para o hardware.</span><span class="sxs-lookup"><span data-stu-id="72776-583">This way, the IP instance is aware of the hardware feature, and offload as much computation to the hardware as possible.</span></span> <span data-ttu-id="72776-584">O controlador deve utilizar o ***nx_ip_interface_capability_set*** API para definir todas as funcionalidades que a interface física é capaz de manusear.</span><span class="sxs-lookup"><span data-stu-id="72776-584">The driver should use the API ***nx_ip_interface_capability_set*** to set all the features the physical interface is able to handle.</span></span>

<span data-ttu-id="72776-585">As seguintes funcionalidades podem ser utilizadas:</span><span class="sxs-lookup"><span data-stu-id="72776-585">The following features can be used:</span></span>

- <span data-ttu-id="72776-586">NX_INTERFACE_CAPABILITY_IPV4_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-586">NX_INTERFACE_CAPABILITY_IPV4_TX_CHECKSUM</span></span>
- <span data-ttu-id="72776-587">NX_INTERFACE_CAPABILITY_IPV4_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-587">NX_INTERFACE_CAPABILITY_IPV4_RX_CHECKSUM</span></span>
- <span data-ttu-id="72776-588">NX_INTERFACE_CAPABILITY_TCP_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-588">NX_INTERFACE_CAPABILITY_TCP_TX_CHECKSUM</span></span>
- <span data-ttu-id="72776-589">NX_INTERFACE_CAPABILITY_TCP_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-589">NX_INTERFACE_CAPABILITY_TCP_RX_CHECKSUM</span></span>
- <span data-ttu-id="72776-590">NX_INTERFACE_CAPABILITY_UDP_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-590">NX_INTERFACE_CAPABILITY_UDP_TX_CHECKSUM</span></span>
- <span data-ttu-id="72776-591">NX_INTERFACE_CAPABILITY_UDP_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-591">NX_INTERFACE_CAPABILITY_UDP_RX_CHECKSUM</span></span>
- <span data-ttu-id="72776-592">NX_INTERFACE_CAPABILITY_ICMPV4_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-592">NX_INTERFACE_CAPABILITY_ICMPV4_TX_CHECKSUM</span></span>
- <span data-ttu-id="72776-593">NX_INTERFACE_CAPABILITY_ICMPV4_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-593">NX_INTERFACE_CAPABILITY_ICMPV4_RX_CHECKSUM</span></span>
- <span data-ttu-id="72776-594">NX_INTERFACE_CAPABILITY_ICMPV6_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-594">NX_INTERFACE_CAPABILITY_ICMPV6_TX_CHECKSUM</span></span>
- <span data-ttu-id="72776-595">NX_INTERFACE_CAPABILITY_ICMPV6_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-595">NX_INTERFACE_CAPABILITY_ICMPV6_RX_CHECKSUM</span></span>
- <span data-ttu-id="72776-596">NX_INTERFACE_CAPABILITY_IGMP_TX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-596">NX_INTERFACE_CAPABILITY_IGMP_TX_CHECKSUM</span></span>
- <span data-ttu-id="72776-597">NX_INTERFACE_CAPABILITY_IGMP_RX_CHECKSUM</span><span class="sxs-lookup"><span data-stu-id="72776-597">NX_INTERFACE_CAPABILITY_IGMP_RX_CHECKSUM</span></span>

<span data-ttu-id="72776-598">Para um cálculo de checkum que possa ser realizado em hardware, o controlador deve configurar corretamente o hardware ou os descritores de tampão para que a parte de verificação de um pacote de saída possa ser gerada e inserida no cabeçalho pelo hardware.</span><span class="sxs-lookup"><span data-stu-id="72776-598">For a checksum computation that can be performed in hardware, the driver must set up the hardware or the buffer descriptors correctly so the checksum for an out-going packet can be generated and inserted into the header by the hardware.</span></span> <span data-ttu-id="72776-599">Ao receber um pacote, a lógica de verificação de hardware deve ser capaz de verificar o valor da parte de verificação.</span><span class="sxs-lookup"><span data-stu-id="72776-599">On receiving a packet, the hardware checksum logic should be able to verify the checksum value.</span></span> <span data-ttu-id="72776-600">Se o valor da quantidade de cheques estiver incorreto, a moldura recebida deve ser descartada.</span><span class="sxs-lookup"><span data-stu-id="72776-600">If the checksum value is incorrect, the received frame should be discarded.</span></span>

<span data-ttu-id="72776-601">Mesmo com a capacidade de realizar a computação de checksum em hardware, a instância IP ainda mantém a capacidade de checkum.</span><span class="sxs-lookup"><span data-stu-id="72776-601">Even with the capability of performing checksum computation in hardware, the IP instance still maintains the checksum capability.</span></span> <span data-ttu-id="72776-602">Em certos cenários, por exemplo, um datagrama de UDP que passa pela proteção IPsec, o checkum da UDP deve ser calculado em software antes de passar o quadro da UDP para baixo da pilha.</span><span class="sxs-lookup"><span data-stu-id="72776-602">In certain scenarios, for example a UDP datagram going through IPsec protection, the UDP checksum must be computed in software before passing the UDP frame down the stack.</span></span> <span data-ttu-id="72776-603">A maioria das funcionalidades de verificação de hardware não suporta o cálculo de checkum para um segmento de dados protegidos pelo IPsec.</span><span class="sxs-lookup"><span data-stu-id="72776-603">Most hardware checksum feature does not support checksum computation for a segment of data protected by IPsec.</span></span> <span data-ttu-id="72776-604">Para um quadro UDP ou ICMP que precisa de ser fragmentado, o checkum UDP ou ICMP precisa de ser calculado em software.</span><span class="sxs-lookup"><span data-stu-id="72776-604">For a UDP or ICMP frame that needs to be fragmented, the UDP or ICMP checksum needs to be computed in software.</span></span> <span data-ttu-id="72776-605">A maior parte da lógica de verificação de hardware não lida com o caso em que os dados são divididos em vários quadros.</span><span class="sxs-lookup"><span data-stu-id="72776-605">Most hardware checksum logic does not handle the case where the data is split into multiple frames.</span></span>

## <a name="driver-output"></a><span data-ttu-id="72776-606">Saída do condutor</span><span class="sxs-lookup"><span data-stu-id="72776-606">Driver Output</span></span>  

<span data-ttu-id="72776-607">Todos os pedidos de transmissão de pacotes previamente mencionados requerem uma função de saída implementada no controlador.</span><span class="sxs-lookup"><span data-stu-id="72776-607">All previously mentioned packet transmit requests require an output function implemented in the driver.</span></span> <span data-ttu-id="72776-608">A lógica de transmissão específica é específica do hardware, mas geralmente consiste em verificar a capacidade de hardware para enviar o pacote imediatamente.</span><span class="sxs-lookup"><span data-stu-id="72776-608">Specific transmit logic is hardware specific, but it usually consists of checking for hardware capacity to send the packet immediately.</span></span> <span data-ttu-id="72776-609">Se possível, a carga útil do pacote (e cargas adicionais na cadeia de pacotes) são carregadas num ou mais tampões de transmissão de hardware e é iniciada uma operação de transmissão.</span><span class="sxs-lookup"><span data-stu-id="72776-609">If possible, the packet payload (and additional payloads in the packet  chain) are loaded into one or more of the hardware transmit buffers and a transmit operation is initiated.</span></span> <span data-ttu-id="72776-610">Se o pacote não encaixar nos amortecedores de transmissão disponíveis, o pacote deve ser em fila e ser transmitido quando os amortecedores de transmissão ficarem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="72776-610">If the packet won't fit in the available transmit buffers, the packet should be queued, and be transmitted when the transmission buffers become available.</span></span>

<span data-ttu-id="72776-611">A fila de transmissão recomendada é uma lista ligada ao canto, com ponteiros de cabeça e cauda.</span><span class="sxs-lookup"><span data-stu-id="72776-611">The recommended transmit queue is a singly linked list, having both head and tail pointers.</span></span> <span data-ttu-id="72776-612">Novos pacotes são adicionados ao final da fila, mantendo o pacote mais antigo na frente.</span><span class="sxs-lookup"><span data-stu-id="72776-612">New packets are added to the end of the queue, keeping the oldest packet at the front.</span></span> <span data-ttu-id="72776-613">O *campo nx_packet_queue_next* é usado como o próximo link do pacote na fila.</span><span class="sxs-lookup"><span data-stu-id="72776-613">The *nx_packet_queue_next* field is used as the packet's next link in the queue.</span></span> <span data-ttu-id="72776-614">O condutor define os ponteiros da cabeça e da cauda da fila de transmissão.</span><span class="sxs-lookup"><span data-stu-id="72776-614">The driver defines the head and tail pointers of the transmit queue.</span></span>

> [!CAUTION]  
> <span data-ttu-id="72776-615">*Uma vez que esta fila é acedida a partir de linhas e porções de interrupção do condutor, a proteção de interrupção deve ser colocada em torno das manipulações da fila*.</span><span class="sxs-lookup"><span data-stu-id="72776-615">*Because this queue is accessed from thread and interrupt portions of the driver, interrupt protection must be placed around the queue manipulations*.</span></span>

<span data-ttu-id="72776-616">A maioria das implementações de hardware físico geram uma interrupção após a conclusão do pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-616">Most physical hardware implementations generate an interrupt upon packet transmit completion.</span></span> <span data-ttu-id="72776-617">Quando o condutor recebe tal interrupção, normalmente liberta os recursos associados ao pacote que acaba de ser transmitido.</span><span class="sxs-lookup"><span data-stu-id="72776-617">When the driver receives such an interrupt, it typically releases the resources associated with the packet just being transmitted.</span></span> <span data-ttu-id="72776-618">Caso a lógica de transmissão leia os dados diretamente do tampão NX_PACKET, o controlador deve utilizar o serviço ***de nx_packet_transmit_release*** para libertar o pacote associado à interrupção completa do transmissor para o conjunto de pacotes disponíveis.</span><span class="sxs-lookup"><span data-stu-id="72776-618">In case the transmit logic reads data directly from the NX_PACKET buffer, the driver should use the ***nx_packet_transmit_release*** service to release the packet associated with the transmit complete interrupt back to the available packet pool.</span></span> <span data-ttu-id="72776-619">Em seguida, o condutor examina a fila de transmissão para pacotes adicionais à espera de serem enviados.</span><span class="sxs-lookup"><span data-stu-id="72776-619">Next, the driver examines the transmit queue for additional packets waiting to be sent.</span></span> <span data-ttu-id="72776-620">Como muitos dos pacotes de transmissão em fila que se encaixam no(s) buffer(s) de hardware são desaltados e carregados nos tampão.</span><span class="sxs-lookup"><span data-stu-id="72776-620">As many of the queued transmit packets that fit into the hardware transmit buffer(s) are de-queued and loaded into the buffers.</span></span> <span data-ttu-id="72776-621">Isto é seguido pelo início de outra operação de envio.</span><span class="sxs-lookup"><span data-stu-id="72776-621">This is followed by initiation of another send operation.</span></span>

<span data-ttu-id="72776-622">Assim que os dados do NX_PACKET foram transferidos para o emissor FIFO (ou caso um condutor suporte a uma operação de cópia zero, os dados em NX_PACKET foram transmitidos), o condutor deve mover a *nx_packet_prepend_ptr* para o início do cabeçalho IP antes de ligar ***nx_packet_transmit_release.** _ Lembre-se de ajustar _nx_packet_length* em conformidade.</span><span class="sxs-lookup"><span data-stu-id="72776-622">As soon as the data in the NX_PACKET has been moved into the transmitter FIFO (or in case a driver supports zero-copy operation, the data in NX_PACKET has been transmitted), the driver must move the *nx_packet_prepend_ptr* to the beginning of the IP header before calling ***nx_packet_transmit_release.** _ Remember to adjust _nx_packet_length* field accordingly.</span></span> <span data-ttu-id="72776-623">Se uma moldura IP for composta por vários pacotes, apenas a cabeça da cadeia de pacotes precisa de ser libertada.</span><span class="sxs-lookup"><span data-stu-id="72776-623">If an IP frame is made up of multiple packets, only the head of the packet chain needs to be released.</span></span>

## <a name="driver-input"></a><span data-ttu-id="72776-624">Entrada do condutor</span><span class="sxs-lookup"><span data-stu-id="72776-624">Driver Input</span></span>

<span data-ttu-id="72776-625">Após a receção de uma interrupção de pacote recebida, o controlador de rede recupera o pacote dos amortecedores de hardware físico e constrói um pacote NetX Duo válido.</span><span class="sxs-lookup"><span data-stu-id="72776-625">Upon reception of a received packet interrupt, the network driver retrieves the packet from the physical hardware receive buffers and builds a valid NetX Duo packet.</span></span> <span data-ttu-id="72776-626">A construção de um pacote NetX Duo válido envolve a criação do campo de comprimento apropriado e acorrentar vários pacotes se o tamanho do pacote de entrada for maior do que uma carga útil de um único pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-626">Building a valid NetX Duo packet involves setting up the appropriate length field and chaining together multiple packets if the incoming packet's size is greater than a single packet payload.</span></span> <span data-ttu-id="72776-627">Uma vez devidamente construído, o *prepend_ptr* é movido após o cabeçalho da camada física e o pacote de receção é enviado para NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="72776-627">Once properly built, the *prepend_ptr* is moved after the physical layer header and the receive packet is dispatched to NetX Duo.</span></span>

<span data-ttu-id="72776-628">NetX Duo assume que os cabeçalhos IP (IPv4 e IPv6) e ARP estão alinhados num limite **ULONG.**</span><span class="sxs-lookup"><span data-stu-id="72776-628">NetX Duo assumes that the IP (IPv4 and IPv6) and ARP headers are aligned on a **ULONG** boundary.</span></span> <span data-ttu-id="72776-629">O controlador NetX Duo deve, portanto, assegurar este alinhamento.</span><span class="sxs-lookup"><span data-stu-id="72776-629">The NetX Duo driver must, therefore, ensure this alignment.</span></span> <span data-ttu-id="72776-630">Nos ambientes Ethernet isto é feito iniciando o cabeçalho Ethernet dois bytes desde o início do pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-630">In Ethernet environments this is done by starting the Ethernet header two bytes from the beginning of the packet.</span></span> <span data-ttu-id="72776-631">Quando o *nx_packet_prepend_ptr* é movido para além do cabeçalho Ethernet, o cabeçalho IP subjacente (IPv4 e IPv6) ou cabeça de ARP é alinhado em 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="72776-631">When the *nx_packet_prepend_ptr* is moved beyond the Ethernet header, the underlying IP (IPv4 and IPv6) or ARP header is 4-byte aligned.</span></span>

> [!WARNING] 
> <span data-ttu-id="72776-632">*Consulte a secção "Cabeçalhos Ethernet" abaixo para obter diferenças importantes entre os cabeçalhos IPv6 e IPv6 Ethernet*.</span><span class="sxs-lookup"><span data-stu-id="72776-632">*See the section "Ethernet Headers" below for important differences between IPv6 and IPv6 Ethernet headers*.</span></span>

<span data-ttu-id="72776-633">Existem várias funções de pacote de receção disponíveis no NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="72776-633">There are several receive packet functions available in NetX Duo.</span></span> <span data-ttu-id="72776-634">Se o pacote recebido for um pacote ARP, _\* **nx_arp_packet_deferred_receive**_ é chamado.</span><span class="sxs-lookup"><span data-stu-id="72776-634">If the received packet is an ARP packet, _\***nx_arp_packet_deferred_receive**_ is called.</span></span> <span data-ttu-id="72776-635">Se o pacote recebido for um pacote RARP, _ _*_nx_rarp_packet_deferred_receive_*_ é chamado.</span><span class="sxs-lookup"><span data-stu-id="72776-635">If the received packet is an RARP packet, _ _*_nx_rarp_packet_deferred_receive_*_ is called.</span></span> <span data-ttu-id="72776-636">Existem várias opções para lidar com pacotes IP de entrada.</span><span class="sxs-lookup"><span data-stu-id="72776-636">There are several options for handling incoming IP packets.</span></span> <span data-ttu-id="72776-637">Para o manuseamento mais rápido dos pacotes IP, é chamado _ _*_nx_ip_packet_receive._*_</span><span class="sxs-lookup"><span data-stu-id="72776-637">For the fastest handling of IP packets, _ _*_nx_ip_packet_receive_*_ is called.</span></span> <span data-ttu-id="72776-638">Esta abordagem tem a menor sobrecarga, mas requer mais processamento no manipulador de serviço de interrupção de receção do condutor (ISR).</span><span class="sxs-lookup"><span data-stu-id="72776-638">This approach has the least overhead, but requires more processing in the driver's receive interrupt service handler (ISR).</span></span> <span data-ttu-id="72776-639">Para um processamento mínimo de ISR __ *_nx_ip_packet_deferred_receive_*\* é chamado.</span><span class="sxs-lookup"><span data-stu-id="72776-639">For minimal ISR processing __ *_nx_ip_packet_deferred_receive_*\* is called.</span></span>

<span data-ttu-id="72776-640">Após a construção do novo pacote de receção, os amortecedores de receção de hardware físico são configurados para receber mais dados.</span><span class="sxs-lookup"><span data-stu-id="72776-640">After the new receive packet is properly built, the physical hardware's receive buffers are setup to receive more data.</span></span> <span data-ttu-id="72776-641">Isto pode exigir a atribuição de pacotes NetX Duo e a colocação do endereço de carga útil no tampão de receção de hardware ou pode simplesmente ser alterado para alterar uma definição no tampão de receção de hardware.</span><span class="sxs-lookup"><span data-stu-id="72776-641">This might require allocating NetX Duo packets and placing the payload address in the hardware receive buffer or it may simply amount to changing a setting in the hardware receive buffer.</span></span> <span data-ttu-id="72776-642">Para minimizar as possibilidades de superação, é importante que os buffers de receção do hardware tenham tampão disponíveis o mais rapidamente possível após a receção de um pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-642">To minimize overrun possibilities, it is important that the hardware's receive buffers have available buffers as soon as possible after a packet is received.</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="72776-643">*Os amortecedores de receção inicial são configurados durante a inicialização do condutor*.</span><span class="sxs-lookup"><span data-stu-id="72776-643">*The initial receive buffers are setup during driver initialization*.</span></span>

### <a name="deferred-receive-packet-handling"></a><span data-ttu-id="72776-644">Tratamento de pacotes diferidos</span><span class="sxs-lookup"><span data-stu-id="72776-644">Deferred Receive Packet Handling</span></span>  
<span data-ttu-id="72776-645">O controlador pode adiar o processamento de pacotes para o fio de ajuda do NetX Duo IP.</span><span class="sxs-lookup"><span data-stu-id="72776-645">The driver may defer receive packet processing to the NetX Duo IP helper thread.</span></span> <span data-ttu-id="72776-646">Para algumas aplicações, isto pode ser necessário para minimizar o processamento do ISR, bem como pacotes abandonados.</span><span class="sxs-lookup"><span data-stu-id="72776-646">For some applications this may be necessary to minimize ISR processing as well as dropped packets.</span></span> 

<span data-ttu-id="72776-647">Para utilizar o manuseamento de pacotes diferidos, a biblioteca NetX Duo tem primeiro de ser compilada com \***NX_DRIVER_DEFERRED_PROCESSING** _ definido.</span><span class="sxs-lookup"><span data-stu-id="72776-647">To use deferred packet handling, the NetX Duo library must first be compiled with \***NX_DRIVER_DEFERRED_PROCESSING** _ defined.</span></span> <span data-ttu-id="72776-648">Isto adiciona a lógica do pacote diferido ao fio de ajuda do NetX Duo IP.</span><span class="sxs-lookup"><span data-stu-id="72776-648">This adds the deferred packet logic to the NetX Duo IP helper thread.</span></span> <span data-ttu-id="72776-649">Em seguida, ao receber um pacote de dados, o condutor deve chamar __nx_ip_packet_deferred_receive():\*</span><span class="sxs-lookup"><span data-stu-id="72776-649">Next, on receiving a data packet, the driver must call __nx_ip_packet_deferred_receive():\*</span></span>

```c
_nx_ip_packet_deferred_receive(ip_ptr, packet_ptr);
```
<span data-ttu-id="72776-650">A função de receção diferida coloca o pacote de receção representado por *packet_ptr* numa FIFO (lista ligada) e notifica o fio do ajudante IP.</span><span class="sxs-lookup"><span data-stu-id="72776-650">The deferred receive function places the receive packet represented by *packet_ptr* on a FIFO (linked list) and notifies the IP helper thread.</span></span> <span data-ttu-id="72776-651">Após a execução, o ajudante ip chama repetidamente a função de manuseamento diferido para processar cada pacote diferido.</span><span class="sxs-lookup"><span data-stu-id="72776-651">After executing, the IP helper repetitively calls the deferred handling function to process each deferred packet.</span></span> <span data-ttu-id="72776-652">O processamento de manipulador diferido inclui normalmente a remoção do cabeçalho de camada física do pacote (geralmente Ethernet) e o envio para uma destas funções de receção NetX Duo:</span><span class="sxs-lookup"><span data-stu-id="72776-652">The deferred handler processing typically includes removing the packet's physical layer header (usually Ethernet) and dispatching it to one of these NetX Duo receive functions:</span></span>

- <span data-ttu-id="72776-653">***_nx_ip_packet_receive***</span><span class="sxs-lookup"><span data-stu-id="72776-653">***_nx_ip_packet_receive***</span></span>
- <span data-ttu-id="72776-654">***_nx_arp_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="72776-654">***_nx_arp_packet_deferred_receive***</span></span>
- <span data-ttu-id="72776-655">***_nx_rarp_packet_deferred_receive***</span><span class="sxs-lookup"><span data-stu-id="72776-655">***_nx_rarp_packet_deferred_receive***</span></span>

## <a name="ethernet-headers"></a><span data-ttu-id="72776-656">Cabeçalhos Ethernet</span><span class="sxs-lookup"><span data-stu-id="72776-656">Ethernet Headers</span></span> 

<span data-ttu-id="72776-657">Uma das diferenças mais significativas entre iPv6 e IPv4 para cabeçalhos Ethernet é a definição do tipo de fotograma.</span><span class="sxs-lookup"><span data-stu-id="72776-657">One of the most significant differences between IPv6 and IPv4 for Ethernet Headers is the frame type setting.</span></span> <span data-ttu-id="72776-658">Ao enviar pacotes, o controlador Ethernet é responsável pela definição do tipo de fotograma Ethernet em pacotes de saída.</span><span class="sxs-lookup"><span data-stu-id="72776-658">When sending out packets, the Ethernet driver is responsible for setting the Ethernet frame type in outgoing packets.</span></span> <span data-ttu-id="72776-659">Para os pacotes IPv6, o tipo de armação deve ser 0x86DD; para os pacotes IPv4, o tipo de fotograma deve ser 0x0800.</span><span class="sxs-lookup"><span data-stu-id="72776-659">For IPv6 packets, the frame type should be 0x86DD; for IPv4 packets, the frame type should be 0x0800.</span></span>

<span data-ttu-id="72776-660">O seguinte segmento de código ilustra este processo:</span><span class="sxs-lookup"><span data-stu-id="72776-660">The following code segment illustrates this process:</span></span>

```c
NX_PACKET *packet_ptr;
packet_ptr = driver_req_ptr -> nx_ip_driver_packet;
if (packet_ptr -> nx_packet_ip_version == NX_IP_VERSION_V4)
{

   /* Set Ethernet frame type to IPv4 /*
   ethernet_frame_ptr -> frame_type = 0x0800;

   /* Swap endian-ness for little endian targets.*/
   NX_CHANGE_USHORT_ENDIAN(ethernet_frame_ptr -> frame_type);
}
else if (packet_ptr -> nx_packet_ip_version == NX_IP_VERSION_V6)
{

   /* Set Ethernet frame type to IPv6. /*
   ethernet_frame_ptr -> frame_type = 0x86DD;

   /* Swap endian-ness for little endian targets.*/
   NX_CHANGE_USHORT_ENDIAN(ethernet_frame_ptr -> frame_type);
}
else
{

   /* Unknown IP version. Free the packet we will not send. */
   nx_packet_transmit_release(packet_ptr);
}
```
<span data-ttu-id="72776-661">Da mesma forma, para os pacotes de entrada, o controlador Ethernet deve determinar o tipo de pacote do tipo de fotograma Ethernet.</span><span class="sxs-lookup"><span data-stu-id="72776-661">Similarly, for incoming packets, the Ethernet driver should determine the packet type from the Ethernet frame type.</span></span> <span data-ttu-id="72776-662">Deve ser implementado para aceitar os tipos de moldura IPv6 (0x86DD), IPv4 (0x0800), ARP (0x0806) e RARP (0x8035).</span><span class="sxs-lookup"><span data-stu-id="72776-662">It should be implemented to accept IPv6 (0x86DD), IPv4 (0x0800), ARP (0x0806), and RARP (0x8035) frame types.</span></span>

## <a name="example-ram-ethernet-network-driver"></a><span data-ttu-id="72776-663">Exemplo RAM Ethernet Network Driver</span><span class="sxs-lookup"><span data-stu-id="72776-663">Example RAM Ethernet Network Driver</span></span>

<span data-ttu-id="72776-664">O sistema de demonstração NetX Duo é entregue com um pequeno controlador de rede baseado em RAM, definido no ficheiro ***nx_ram_network_driver.c.***</span><span class="sxs-lookup"><span data-stu-id="72776-664">The NetX Duo demonstration system is delivered with a small RAM-based network driver, defined in the file ***nx_ram_network_driver.c.***</span></span> <span data-ttu-id="72776-665">Este controlador assume que as instâncias IP estão todas na mesma rede e simplesmente atribui endereços de hardware virtuais (endereços MAC) a cada instância do dispositivo à medida que são criadas.</span><span class="sxs-lookup"><span data-stu-id="72776-665">This driver assumes the IP instances are all on the same network and simply assigns virtual hardware addresses (MAC addresses) to each device instance as they are created.</span></span> <span data-ttu-id="72776-666">Este ficheiro fornece um bom exemplo da estrutura básica dos controladores de rede física NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="72776-666">This file provides a good example of the basic structure of NetX Duo physical network drivers.</span></span> <span data-ttu-id="72776-667">Os utilizadores podem desenvolver os seus próprios controladores de rede utilizando a estrutura do condutor apresentada neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="72776-667">Users may develop their own network drivers using the driver framework presented in this example.</span></span>

<span data-ttu-id="72776-668">A função de entrada do controlador de rede é \***_nx_ram_network_driver(),** _ que é passada para a instância IP criar chamada.</span><span class="sxs-lookup"><span data-stu-id="72776-668">The entry function of the network driver is \***_nx_ram_network_driver(),** _ which is passed to the IP instance create call.</span></span> <span data-ttu-id="72776-669">As funções de entrada para interfaces de rede adicionais podem ser passadas para o serviço _nx_ip_interface_attach()\*</span><span class="sxs-lookup"><span data-stu-id="72776-669">Entry functions for additional network interfaces can be passed into the _nx_ip_interface_attach()\* service.</span></span> <span data-ttu-id="72776-670">Após o funcionamento da instância IP, a função de entrada do controlador é invocada para inicializar e ativar o dispositivo (consulte a caixa **NX_LINK_INITIALIZE** e **NX_LINK_ENABLE).**</span><span class="sxs-lookup"><span data-stu-id="72776-670">After the IP instance starts to run, the driver entry function is invoked to initialize and enable the device (refer to the case **NX_LINK_INITIALIZE** and **NX_LINK_ENABLE**).</span></span> <span data-ttu-id="72776-671">Após a **emissão do** comando NX_LINK_ENABLE, o dispositivo deve estar pronto para transmitir e receber pacotes.</span><span class="sxs-lookup"><span data-stu-id="72776-671">After the **NX_LINK_ENABLE** command is issued, the device should be ready to transmit and receive packets.</span></span> 

<span data-ttu-id="72776-672">A instância IP transmite pacotes de rede através de um destes comandos:</span><span class="sxs-lookup"><span data-stu-id="72776-672">The IP instance transmits network packets via one of these commands:</span></span>

| <span data-ttu-id="72776-673">Comando</span><span class="sxs-lookup"><span data-stu-id="72776-673">Command</span></span>                         |  <span data-ttu-id="72776-674">Descrição</span><span class="sxs-lookup"><span data-stu-id="72776-674">Description</span></span>                                                   |
| ------------------------------- | -------------------------------------------------------------- |
| <span data-ttu-id="72776-675">***NX_LINK_PACKET_SEND***</span><span class="sxs-lookup"><span data-stu-id="72776-675">***NX_LINK_PACKET_SEND***</span></span>    | <span data-ttu-id="72776-676">Um pacote IPv4 ou IPv6 está a ser transmitido,</span><span class="sxs-lookup"><span data-stu-id="72776-676">An IPv4 or IPv6 packet is being transmitted,</span></span>                   |
| <span data-ttu-id="72776-677">***NX_LINK_ARP_SEND***</span><span class="sxs-lookup"><span data-stu-id="72776-677">***NX_LINK_ARP_SEND***</span></span>       | <span data-ttu-id="72776-678">Está a ser transmitido um pedido ARP ou um pacote de resposta ARP,</span><span class="sxs-lookup"><span data-stu-id="72776-678">An ARP request or ARP response packet is being transmitted,</span></span>    |
| <span data-ttu-id="72776-679">***NX_LINK_ARP_RARP_SEND***</span><span class="sxs-lookup"><span data-stu-id="72776-679">***NX_LINK_ARP_RARP_SEND***</span></span> | <span data-ttu-id="72776-680">Está a ser transmitido um pacote de pedido ou resposta reverso da ARP,</span><span class="sxs-lookup"><span data-stu-id="72776-680">A Reverse ARP request or response packet is being transmitted,</span></span> |

<span data-ttu-id="72776-681">No processamento destes comandos, o controlador de rede precisa de preparar o cabeçalho de quadro Ethernet apropriado e, em seguida, enviá-lo para o hardware subjacente para transmissão.</span><span class="sxs-lookup"><span data-stu-id="72776-681">On processing these commands, the network driver needs to prepend the appropriate Ethernet frame header, and then send it to the underlying hardware for transmission.</span></span> <span data-ttu-id="72776-682">Durante o processo de transmissão, o controlador de rede tem a propriedade exclusiva da área tampão do pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-682">During the transmission process, the network driver has the exclusive ownership of the packet buffer area.</span></span> <span data-ttu-id="72776-683">Assim que os dados estiverem a ser transmitidos (ou uma vez que os dados tenham sido copiados para o tampão de transferência interno do controlador), o controlador de rede é responsável pela libertação do amortecedor de pacotes, movendo primeiro o ponteiro pré-final para além do cabeçalho Ethernet para o cabeçalho IP (e ajuste o comprimento do pacote em conformidade), e, em seguida, chamando o serviço ***de nx_packet_transmit_release()*** para libertar o pacote.</span><span class="sxs-lookup"><span data-stu-id="72776-683">Therefore once the data is being transmitted (or once the data has been copied into the driver internal transfer buffer), the network driver is responsible for releasing the packet buffer by first moving the prepend pointer past the Ethernet header to the IP header (and adjust packet length accordingly), and then by calling the ***nx_packet_transmit_release()*** service to release the packet.</span></span> <span data-ttu-id="72776-684">Não libertar o pacote após a transmissão de dados fará com que os pacotes vazem.</span><span class="sxs-lookup"><span data-stu-id="72776-684">Not releasing the packet after data transmission will cause packets to leak.</span></span>

<span data-ttu-id="72776-685">O controlador do dispositivo de rede é também responsável pelo tratamento dos pacotes de dados recebidos.</span><span class="sxs-lookup"><span data-stu-id="72776-685">The network device driver is also responsible for handling incoming data packets.</span></span> <span data-ttu-id="72776-686">No exemplo do condutor da RAM, o pacote recebido é processado pela função ***_nx_ram_network_driver_receive()***.</span><span class="sxs-lookup"><span data-stu-id="72776-686">In the RAM driver example, the received packet is processed by the function ***_nx_ram_network_driver_receive()***.</span></span> <span data-ttu-id="72776-687">Uma vez que o dispositivo recebe uma moldura Ethernet, o controlador é responsável por armazenar os dados na estrutura NX_PACKET.</span><span class="sxs-lookup"><span data-stu-id="72776-687">Once the device receives an Ethernet frame, the driver is responsible for storing the data in  NX_PACKET structure.</span></span> <span data-ttu-id="72776-688">Note que o NetX Duo assume que o cabeçalho IP começa a partir de um endereço alinhado de 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="72776-688">Note that NetX Duo assumes the IP header starts from 4-byte aligned address.</span></span> <span data-ttu-id="72776-689">Uma vez que o comprimento do cabeçalho Ethernet é de 14bytes, o controlador precisa de armazenar o arranque do cabeçalho Ethernet no endereço alinhado de 2 bytes para garantir que o cabeçalho IP começa com um endereço alinhado de 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="72776-689">Since the length of Ethernet header is 14byte, the driver needs to store the starting of the Ethernet header at 2-byte aligned address to guarantee that the IP header starts at 4-byte aligned address.</span></span>