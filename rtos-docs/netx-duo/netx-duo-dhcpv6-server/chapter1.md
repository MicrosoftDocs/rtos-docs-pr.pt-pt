---
title: Capítulo 1 - Introdução ao servidor Azure RTOS NetX Duo DHCPv6
description: Este documento explicará em detalhe como o NetX Duo DHCPv6 Server atribui endereços IPv6 aos Clientes DHCPv6.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6cf7baa91b1804876b97b1d75d1872d1120ad028
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826042"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-server"></a><span data-ttu-id="2f62b-103">Capítulo 1 - Introdução ao servidor Azure RTOS NetX Duo DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2f62b-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 server</span></span>

<span data-ttu-id="2f62b-104">Nas redes IPv6, o DHCPv6 é necessário para que os Clientes obtenham endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-104">In IPv6 networks, DHCPv6is required for Clients to obtain IPv6 addresses.</span></span> <span data-ttu-id="2f62b-105">Não substitui o DHCP, que se limita ao IPv4, que não oferece endereços IPv4.</span><span class="sxs-lookup"><span data-stu-id="2f62b-105">It does not replace DHCP which is limited to IPv4in that it does not offer IPv4 addresses.</span></span> <span data-ttu-id="2f62b-106">O DHCPv6 tem características semelhantes ao DHCP, bem como muitas melhorias.</span><span class="sxs-lookup"><span data-stu-id="2f62b-106">DHCPv6 has similar features to DHCP as well as many enhancements.</span></span> <span data-ttu-id="2f62b-107">Um Cliente que não utilize ou não possa utilizar o endereço apátrida IPv6 pode usar o DHCPv6 para ser atribuído um endereço IPv6 global único a partir de um Servidor DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-107">A Client who does not or cannot use IPv6 stateless address auto-configuration can use DHCPv6 to be assigned a unique global IPv6 address from a DHCPv6 Server.</span></span>

<span data-ttu-id="2f62b-108">A NetX Duo foi desenvolvida para apoiar aplicações baseadas em rede IPv6 e protocolos de rede como o DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-108">NetX Duo was developed to support IPv6 network based applications and network protocols such as DHCPv6.</span></span> <span data-ttu-id="2f62b-109">Este documento explicará em detalhe como o NetX Duo DHCPv6 Server atribui endereços IPv6 aos Clientes DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-109">This document will explain in detail how the NetX Duo DHCPv6 Server assigns IPv6 addresses to DHCPv6 Clients.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="2f62b-110">Comunicação DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2f62b-110">DHCPv6 Communication</span></span>

<span data-ttu-id="2f62b-111">**Estrutura de mensagem DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2f62b-111">**DHCPv6 Message structure**</span></span>

<span data-ttu-id="2f62b-112">O conteúdo da mensagem é basicamente um cabeçalho de mensagem seguido por um ou mais blocos de opções (geralmente mais).</span><span class="sxs-lookup"><span data-stu-id="2f62b-112">Message content is basically a message header followed by one or more (usually more) option blocks.</span></span> <span data-ttu-id="2f62b-113">Abaixo está a estrutura básica onde cada bloco representa um byte:</span><span class="sxs-lookup"><span data-stu-id="2f62b-113">Below is the basic structure where each block represents one byte:</span></span>

![Diagrama mostrando a mensagem DHCPv6 e a estrutura do bloco de opções.](media/image2.jpg)

<span data-ttu-id="2f62b-115">**Figura 1. Estrutura de bloco de mensagem DHCPv6 e opções**</span><span class="sxs-lookup"><span data-stu-id="2f62b-115">**Figure 1. DHCPv6 message and option block structure**</span></span>

<span data-ttu-id="2f62b-116">O campo de Msg-Type de 1 byte indica o tipo de mensagem DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-116">The 1-byte Msg-Type field indicates the type of DHCPv6 message.</span></span> <span data-ttu-id="2f62b-117">O campo de ID de transação de 3 bytes é definido pelo Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-117">The 3-byte Transaction-ID field is set by the Client.</span></span> <span data-ttu-id="2f62b-118">Pode por qualquer sequência de caracteres, mas deve ser única para cada mensagem do Cliente para o Servidor (conservada através de mensagens duplicadas enviadas pelo Cliente).</span><span class="sxs-lookup"><span data-stu-id="2f62b-118">It can by any sequence of characters but must be unique for each Client message to the Server (conserved across duplicate messages sent by the Client).</span></span> <span data-ttu-id="2f62b-119">O Servidor utiliza esse ID de transação para cada resposta ao Cliente para permitir ao Cliente combinar mensagens do Servidor no caso de pacotes que sejam atrasados ou deixados cair na rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-119">The Server uses that Transaction-ID for each response to the Client to enable the Client to match up Server messages in the event of packets that are delayed or dropped on the network.</span></span> <span data-ttu-id="2f62b-120">Seguindo o campo de ID de transação, estão uma ou mais opções DHCPv6 usadas para indicar o que o Cliente está a solicitar.</span><span class="sxs-lookup"><span data-stu-id="2f62b-120">Following the Transaction-ID field, are one or more DHCPv6 options used to indicate what the Client is requesting.</span></span>

<span data-ttu-id="2f62b-121">A estrutura de opção DHCPv6 é composta por um código de opção, um campo de comprimento de opção, que não inclui os campos de comprimento ou código, e, finalmente, os dados de opção em si, que é um ou mais campos de código de opção byte 2 para os dados que o Cliente está solicitando.</span><span class="sxs-lookup"><span data-stu-id="2f62b-121">The DHCPv6 option structure is composed of an option code, an option length field, which does not include the length or code fields, and finally the option data itself which is one or more 2 byte option code fields for the data the Client is requesting.</span></span>

<span data-ttu-id="2f62b-122">Alguns blocos de opções têm opções aninhadas.</span><span class="sxs-lookup"><span data-stu-id="2f62b-122">Some option blocks have nested options.</span></span> <span data-ttu-id="2f62b-123">Por exemplo, uma opção *de Associação de Identidade para Endereço Não Temporário (IANA)* contém uma ou mais opções da Associação de Identidade *(IA)* para solicitar endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-123">For example, an *Identity Association for Non Temporary Address (IANA)* option contains one or more *Identity Association (IA)* options to request IPv6 addresses.</span></span> <span data-ttu-id="2f62b-124">A opção *IANA* devolvida na mensagem resposta do servidor contém a mesma opção *IA(s)* com o endereço IPv6 e os tempos de locação concedidos pelo Servidor, bem como uma opção de *Estado* indicando se existe um erro com o pedido de endereço do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-124">The *IANA* option returned in the Server Reply message contains the same *IA* option(s) with the IPv6 address and lease times granted by the Server, as well as a *Status* option indicating if there is an error with the Client address request.</span></span>

<span data-ttu-id="2f62b-125">Uma lista de todos os blocos de opções e a sua descrição é fornecida no **apêndice A**.</span><span class="sxs-lookup"><span data-stu-id="2f62b-125">A list of all option blocks and their description is provided in **Appendix A**.</span></span>

<span data-ttu-id="2f62b-126">**Tipos de mensagens DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2f62b-126">**DHCPv6 Message Types**</span></span>

<span data-ttu-id="2f62b-127">Embora o DHCPv6 melhore consideravelmente a funcionalidade do DHCP, utiliza o mesmo número de mensagens que o DHCP e suporta as mesmas opções de fornecedor que o DHCP.</span><span class="sxs-lookup"><span data-stu-id="2f62b-127">Although DHCPv6 greatly enhances the functionality of DHCP, it uses the same number of messages as DHCP and supports the same vendor options as DHCP.</span></span> <span data-ttu-id="2f62b-128">A lista de mensagens DHCPv6 é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="2f62b-128">The list of DHCPv6 messages are as follows:</span></span>

- <span data-ttu-id="2f62b-129">SOLICT (1) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-129">SOLICT (1) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-130">PUBLICIDADE (2) (enviado por Servidor)</span><span class="sxs-lookup"><span data-stu-id="2f62b-130">ADVERTISE (2) (sent by Server)</span></span>
- <span data-ttu-id="2f62b-131">PEDIDO (3) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-131">REQUEST (3) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-132">RESPOSTA (7) (enviado por Servidor)</span><span class="sxs-lookup"><span data-stu-id="2f62b-132">REPLY (7) (sent by Server)</span></span>
- <span data-ttu-id="2f62b-133">CONFIRMA (4) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-133">CONFIRM (4) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-134">RENOVAÇÃO (5) (enviada pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-134">RENEW (5) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-135">REBIND (6) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-135">REBIND (6) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-136">LIBERAÇÃO (8) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-136">RELEASE (8) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-137">DECLINO (9) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-137">DECLINE (9) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-138">INFORM_REQUEST (11) (enviado pelo Cliente)</span><span class="sxs-lookup"><span data-stu-id="2f62b-138">INFORM_REQUEST (11) (sent by Client)</span></span>
- <span data-ttu-id="2f62b-139">RECONFIGURE\* (10) (enviado por Servidor)</span><span class="sxs-lookup"><span data-stu-id="2f62b-139">RECONFIGURE\* (10) (sent by Server)</span></span>

<span data-ttu-id="2f62b-140">\*RECONFIGURE não é suportado pelo NetX Duo DHCPv6 Server.</span><span class="sxs-lookup"><span data-stu-id="2f62b-140">\*RECONFIGURE is not supported by the NetX Duo DHCPv6 Server.</span></span>

<span data-ttu-id="2f62b-141">A sequência básica de pedido DHCPv6, com o equivalente tipo de mensagem DHCPv4 em parênteses, é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="2f62b-141">The basic DHCPv6 request sequence, with the equivalent DHCPv4 message type in parenthesis, is as follows:</span></span>

<span data-ttu-id="2f62b-142">Cliente ***Solicit** _ (_Discovery)\*\*\*Anúncio*\* do Servidor (\* Oferta )***Pedido** de Cliente (Pedido\*\*) **Resposta** do servidor (DHCPAck*)\*</span><span class="sxs-lookup"><span data-stu-id="2f62b-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span></span>

<span data-ttu-id="2f62b-143">**Renovação** do Cliente (mesmo) **Resposta** do Servidor *(DHCPAck)*</span><span class="sxs-lookup"><span data-stu-id="2f62b-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span></span>

## <a name="dhcpv6-message-validation"></a><span data-ttu-id="2f62b-144">Validação de mensagens DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2f62b-144">DHCPv6 Message Validation</span></span>

<span data-ttu-id="2f62b-145">ID de transação: O Cliente deve gerar um ID de transação para cada mensagem que envia para o Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-145">Transaction ID: The Client must generate a transaction ID for each message it sends to the Server.</span></span> <span data-ttu-id="2f62b-146">O Servidor DHCPv6 rejeitará qualquer mensagem do Cliente que não corresponda a este ID de transação.</span><span class="sxs-lookup"><span data-stu-id="2f62b-146">The DHCPv6 Server will reject any message from the Client not matching this transaction ID.</span></span> <span data-ttu-id="2f62b-147">O Servidor, por sua vez, deve utilizar o mesmo ID de transação nas suas respostas de volta ao Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-147">The Server in turn must use the same transaction ID in its responses back to the Client.</span></span>

<span data-ttu-id="2f62b-148">**Identificadores exclusivos DHCPv6 (DUIDs)**</span><span class="sxs-lookup"><span data-stu-id="2f62b-148">**DHCPv6 unique Identifiers (DUIDs)**</span></span>

<span data-ttu-id="2f62b-149">Todas as mensagens do Servidor também devem incluir um identificador único DHCPv6 (DUID) em cada mensagem ou o Cliente DHCPv6 não deve aceitar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="2f62b-149">All Server messages must also include a DHCPv6 unique Identifier (DUID) in each message or the DHCPv6 Client should not accept the message.</span></span> <span data-ttu-id="2f62b-150">Um DuID de Camada de Ligação (LL) é um bloco de controlo que contém endereço MAC do cliente, tipo de hardware e tipo DUID.</span><span class="sxs-lookup"><span data-stu-id="2f62b-150">A Link Layer (LL) DUID is a control block containing client MAC address, hardware type, and DUID type.</span></span> <span data-ttu-id="2f62b-151">Um DUID de tempo de ligação (LLT) contém ainda um campo de tempo que diminui as chances de o DUID não ser único na rede de anfitriões.</span><span class="sxs-lookup"><span data-stu-id="2f62b-151">A Link Layer Time (LLT) DUID additionally contains a time field which decreases the chances the DUID will not be unique on the host network.</span></span> <span data-ttu-id="2f62b-152">Por esta razão, o RFC 3315 recomenda DUIDs LLT em vez de DUIDs LL.</span><span class="sxs-lookup"><span data-stu-id="2f62b-152">For that reason RFC 3315 recommends LLT DUIDs over LL DUIDs.</span></span> <span data-ttu-id="2f62b-153">Se a aplicação do anfitrião não criar o seu próprio valor de tempo único, o NetX Duo DHCPv6 fornecerá um padrão.</span><span class="sxs-lookup"><span data-stu-id="2f62b-153">If the host application does not create its own unique time value, NetX Duo DHCPv6 will provide a default one.</span></span> <span data-ttu-id="2f62b-154">O terceiro tipo de DUID é o DUID da Enterprise (Fornecedor designado) que contém um ID da Empresa registado (como registado no IANA) e dados privados que são variáveis em tipo e comprimento, por exemplo, com base no tamanho da memória, tipo de sistema operativo de outra configuração de hardware.</span><span class="sxs-lookup"><span data-stu-id="2f62b-154">The third type of DUID is the Enterprise (Vendor assigned) DUID which contains a registered Enterprise ID (as in registered with IANA) and private data that is variable in type and length e.g. based on memory size, operating system type of other hardware configuration.</span></span> <span data-ttu-id="2f62b-155">Consulte a lista de Opções de Configuração em outros lugares deste documento para configurar os valores de ID atribuídos e privados do fornecedor do Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-155">See the list of Configuration Options elsewhere in this document for setting up the Server vendor assigned and private ID values.</span></span>

<span data-ttu-id="2f62b-156">O Cliente também deve incluir o seu DUID nas suas mensagens para o Servidor, exceto para INFORM_REQUEST, ou o Servidor irá rejeitá-los.</span><span class="sxs-lookup"><span data-stu-id="2f62b-156">The Client must also include its DUID in its messages to the Server except for INFORM_REQUEST, or the Server will reject them.</span></span>

<span data-ttu-id="2f62b-157">**Sessões de servidor de clientes DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="2f62b-157">**DHCPv6 Client Server Sessions**</span></span>

<span data-ttu-id="2f62b-158">DhCPv6 Clientes e Servidores trocam mensagens sobre a UDP.</span><span class="sxs-lookup"><span data-stu-id="2f62b-158">DHCPv6 Clients and Servers exchange messages over UDP.</span></span> <span data-ttu-id="2f62b-159">O Cliente utiliza a porta 546 para enviar e receber mensagens DHCPv6 e o Servidor utiliza a porta 547.</span><span class="sxs-lookup"><span data-stu-id="2f62b-159">The Client uses port 546 to send and receive DHCPv6 messages and the Server uses port 547.</span></span> <span data-ttu-id="2f62b-160">O Cliente utiliza inicialmente o seu endereço link-local para transmitir e receber mensagens DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-160">The Client initially uses its link-local address for transmitting and receiving DHCPv6 messages.</span></span> <span data-ttu-id="2f62b-161">Envia todas as mensagens para os servidores DHCPv6 utilizando um endereço multicast reservado e com alcance de ligação conhecido como o endereço multicast *All_DHCP_Relay_Agents_and_Servers* *(FF02:01:02)*.</span><span class="sxs-lookup"><span data-stu-id="2f62b-161">It sends all messages to DHCPv6 servers using a reserved, link-scoped multicast address known as the *All_DHCP_Relay_Agents_and_Servers* multicast address *(FF02::01:02)*.</span></span>

<span data-ttu-id="2f62b-162">Pedidos de atribuição de endereços ForIPv6, o Servidor DHCPv6 ouve mensagens *Solicit* enviadas para o endereço *All_DHCP_Relay_Agents_and_Servers.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-162">ForIPv6 address assignment requests, the DHCPv6 Server listens for *Solicit* messages sent to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="2f62b-163">No pedido *de Solicitação,* o Cliente pode solicitar a atribuição de um endereço IPv6 específico ou deixar o Servidor escolher um.</span><span class="sxs-lookup"><span data-stu-id="2f62b-163">In the *Solicit* request, the Client can request the assignment of specific IPv6 address or let the Server choose one.</span></span> <span data-ttu-id="2f62b-164">Também pode solicitar outras informações de configuração de rede a partir do Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-164">It can also request other network configuration information from the Server.</span></span>

<span data-ttu-id="2f62b-165">Se o DHCPv6Server extrair uma mensagem *solicitável* válida e puder atribuir um endereço IPv6 ao Cliente, responde com uma mensagem *de Anúncio* contendo o endereço IPv6 que concederá ao Cliente, o tempo de locação de endereços IPv6 e qualquer informação adicional solicitada pelo Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-165">If the DHCPv6Server extracts a valid *Solicit* message and can assign an IPv6 address to the Client, it responds with an *Advertise* message containing the IPv6 address it will grant to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="2f62b-166">Se o Cliente aceitar a oferta do Servidor, responde com uma mensagem *de Pedido,* informando o Servidor de que aceitará o endereço IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-166">If the Client accepts the Server offer it responds with a *Request* message letting the Server know it will accept the IPv6 address.</span></span> <span data-ttu-id="2f62b-167">O Servidor confirma que o Cliente está ligado ao endereço IPv6 com uma mensagem *de Resposta.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-167">The Server confirms the Client is bound to the IPv6 address with a *Reply* message.</span></span>

<span data-ttu-id="2f62b-168">Se a mensagem DHCPv6 do Cliente for inválida, o Servidor descartará a mensagem silenciosamente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-168">If the Client DHCPv6 message is invalid, the Server will discard the message silently.</span></span> <span data-ttu-id="2f62b-169">Se o Servidor não conseguir conceder o pedido, enviará uma mensagem *de resposta* com uma indicação do problema no campo de estado da opção IP address IANA.</span><span class="sxs-lookup"><span data-stu-id="2f62b-169">If the Server is unable to grant the request it will send a *Reply* message with an indication of the problem in the status field of the IP address IANA option.</span></span> <span data-ttu-id="2f62b-170">Se forem recebidos pedidos duplicados do Cliente, o Servidor reensifica a resposta anterior do DHCPv6, assumindo que o Cliente simplesmente não recebeu o pacote.</span><span class="sxs-lookup"><span data-stu-id="2f62b-170">If duplicate Client requests are received the Server resends its previous DHCPv6 response, assuming the Client simply did not receive the packet.</span></span>

<span data-ttu-id="2f62b-171">Cabe ao Cliente verificar se o endereço IPv6 atribuído a partir do Servidor não é atribuído a outro anfitrião no sistema utilizando vários protocolos IPv6, como duplicado de deteção de endereços.</span><span class="sxs-lookup"><span data-stu-id="2f62b-171">It is up to the Client to verify that its assigned IPv6 address from the Server is not assigned to another host on the system by using various IPv6 protocols such as Duplicate Address Detection.</span></span> <span data-ttu-id="2f62b-172">Se o endereço não for único, o Cliente enviará ao Servidor uma mensagem *De declínio.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-172">If the address is not unique, the Client will send the Server a *Decline* message.</span></span> <span data-ttu-id="2f62b-173">O Servidor atualiza a sua tabela de locação IP com esta informação, registando que o endereço já está atribuído.</span><span class="sxs-lookup"><span data-stu-id="2f62b-173">The Server updates its IP lease table with this information, recording that the address is already assigned.</span></span> <span data-ttu-id="2f62b-174">Entretanto, o Cliente deve reiniciar o processo de pedido dhcpv6 com outra mensagem *Solicit.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-174">Meanwhile the Client must restart the DHCPv6 request process with another *Solicit* message.</span></span>

<span data-ttu-id="2f62b-175">Além de um endereço IPv6, um Cliente provavelmente também precisará de conhecer o servidor DNS e possivelmente outras informações de rede, como o nome de domínio da rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-175">In addition to an IPv6 address, a Client will likely also need to know the DNS server and possibly other network information such as the network domain name.</span></span> <span data-ttu-id="2f62b-176">O DHCPv6 fornece os meios para solicitar estas informações utilizando quer a utilização de Pedidos de Opção nas mensagens *Solicite* e *Solicite,* quer separadamente em mensagens *de Pedido de Informação.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-176">DHCPv6 provides the means to request this information using either the use of Option Requests in the *Solicit* and *Request* messages, or separately in *Information Request* messages.</span></span> <span data-ttu-id="2f62b-177">As opções DHCPv6 são explicadas mais tarde neste capítulo.</span><span class="sxs-lookup"><span data-stu-id="2f62b-177">DHCPv6 options are explained later in this chapter.</span></span>

<span data-ttu-id="2f62b-178">**Duração do arrendamento IPv6**</span><span class="sxs-lookup"><span data-stu-id="2f62b-178">**IPv6 Lease Duration**</span></span>

<span data-ttu-id="2f62b-179">Quando o Servidor concede um endereço IPv6 a um Cliente, também atribui a duração do arrendamento (vitalícia)na opção IANA para quando recomenda ao Cliente que comece a renovar (T1) ou a reencambinar (T2) o seu endereço IPv6 utilizando mensagens *Renovar* e *Rebind.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-179">When the Server grants an IPv6 address to a Client, it also assigns the lease duration (lifetime)in the IANA option for when it recommends the Client to start renewing (T1) or rebinding (T2) its IPv6 address using *Renew* and *Rebind* messages.</span></span> <span data-ttu-id="2f62b-180">A diferença entre os dois é que o Cliente direciona a mensagem *Renovar* para o Servidor, incluindo o Servidor DUID no pedido *de Renovação.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-180">The difference between the two is the Client directs the *Renew* message to the Server by including the Server DUID in the *Renew* request.</span></span> <span data-ttu-id="2f62b-181">No entanto, não especifica nenhum servidor e, portanto, não inclui um DUID do Servidor, na mensagem *Rebind* para o endereço *All_DHCP_Relay_Agents_and_Servers.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-181">However, it does not specify any server, and hence does not include a Server DUID, in the *Rebind* message to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="2f62b-182">A opção IA que contém o endereço real IPv6 que o Servidor concede ao Cliente também contém as vidas preferidas e válidas quando o endereço IPv6 alugado se torna precotado ou obsoleto (inválido), respectivamente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-182">The IA option which contains the actual IPv6 address the Server grants the Client also contains the preferred and valid lifetimes when the leased IPv6 address becomes deprecated or obsolete (invalid), respectively.</span></span>

<span data-ttu-id="2f62b-183">O NetX Duo DHCPv6 Server mantém um tempo limite de sessão para cada Cliente acompanhar o tempo entre as mensagens do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-183">The NetX Duo DHCPv6 Server maintains a session timeout for each Client to track the time between Client messages.</span></span> <span data-ttu-id="2f62b-184">Isto é necessário no caso de um anfitrião do Cliente perder conectividade ou a rede a descer.</span><span class="sxs-lookup"><span data-stu-id="2f62b-184">This is necessary in the event of a Client host losing connectivity or the network doing down.</span></span> <span data-ttu-id="2f62b-185">Quando o tempo limite de sessão expira, presume-se que o Cliente já não está interessado ou pode fazer pedidos DHCPv6 do Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-185">When the session timeout expires, it is assumed the Client is either no longer interested or able to make DHCPv6 requests of the Server.</span></span> <span data-ttu-id="2f62b-186">O Servidor elimina o registo do Cliente e devolve qualquer endereço IPv6 atribuído provisoriamente ao pool disponível.</span><span class="sxs-lookup"><span data-stu-id="2f62b-186">The Server deletes the Client record and returns any tentatively assigned IPv6 address back to the available pool.</span></span> <span data-ttu-id="2f62b-187">A espera de tempo de sessão é uma opção configurável para o utilizador.</span><span class="sxs-lookup"><span data-stu-id="2f62b-187">The session timeout wait is a user configurable option.</span></span>

<span data-ttu-id="2f62b-188">Se o Cliente pretender lançar o seu endereço IPv6, ou descobrir que o endereço IPv6 que lhe foi atribuído pelo Servidor DHCPv6 já está a ser utilizado, envia uma mensagem *de Lançamento* ou *Declínio,* respectivamente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-188">If the Client wishes to release its IPv6 address, or discovers that the IPv6 address assigned to it by the DHCPv6 Server is already in use, it send a *Release* or *Decline* message respectively.</span></span> <span data-ttu-id="2f62b-189">No caso de uma mensagem de *desbloqueio,* o Servidor devolve o estado do endereço IPv6 ao pool disponível.</span><span class="sxs-lookup"><span data-stu-id="2f62b-189">In the case of a *Release* message, the Server returns that IPv6 address status back to the available pool.</span></span> <span data-ttu-id="2f62b-190">No caso da mensagem *Declínio,* atualiza a sua tabela de locação IP para indicar que este endereço IPv6 não está disponível (propriedade de outra entidade em outros pontos da rede).</span><span class="sxs-lookup"><span data-stu-id="2f62b-190">In the case of the *Decline* message, it updates its IP lease table to indicate this IPv6 address is not available (owned by another entity elsewhere on the network).</span></span>

<span data-ttu-id="2f62b-191">**Dados de Arrendamento IPv6 e Registo de Clientes**</span><span class="sxs-lookup"><span data-stu-id="2f62b-191">**IPv6 Lease and Client Record Data**</span></span>

<span data-ttu-id="2f62b-192">Quando o Servidor DHCPv6 começa a aceitar pedidos de Cliente, mantém uma lista de Clientes ativos que estão a solicitar ou que foram atribuídos endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-192">When the DHCPv6 Server starts accepting Client requests it maintains a list of active Clients who are requesting or have been assigned IPv6 addresses.</span></span> <span data-ttu-id="2f62b-193">O Servidor verifica a expiração do arrendamento IP através de um temporizador de locação que atualiza periodicamente a duração do aluguer do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-193">The Server checks for IP lease expiration by means of a lease timer that periodically updates the Client lease duration.</span></span> <span data-ttu-id="2f62b-194">Quando a duração exceder a duração útil válida, o Servidor limpa o registo do Cliente e devolve o seu endereço IPv6 de volta ao pool disponível.</span><span class="sxs-lookup"><span data-stu-id="2f62b-194">When the duration exceeds the valid lifetime, the Server clears the Client record and returns its IPv6 address back to the available pool.</span></span> <span data-ttu-id="2f62b-195">Cabe ao Cliente iniciar o processo de renovação/reencadernação antes que isso aconteça!</span><span class="sxs-lookup"><span data-stu-id="2f62b-195">It is up to the Client to start the renewal/rebinding process before this happens!</span></span>

<span data-ttu-id="2f62b-196">A tabela de registos de clientes do NetX Duo DHCPv6 Server contém informações para identificar clientes e informações 'estatais' para validar pedidos de clientes DHCPv6 e atribuir ou reatribuir endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-196">The NetX Duo DHCPv6 Server client record table contains information to identify Clients, and ‘state’ information for validating DHCPv6 Client requests and assigning or re-assigning IPv6 addresses.</span></span> <span data-ttu-id="2f62b-197">Tais informações incluem:</span><span class="sxs-lookup"><span data-stu-id="2f62b-197">Such information includes:</span></span>

- <span data-ttu-id="2f62b-198">O Client DHCPv6 Unique Identifier (DUID) que define exclusivamente cada anfitrião do Cliente numa rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-198">The Client DHCPv6 Unique Identifier (DUID) which uniquely defines each Client host on a network.</span></span> <span data-ttu-id="2f62b-199">O Cliente deve sempre utilizar este mesmo DUID para todas as suas mensagens DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-199">The Client must always use this same DUID for all its DHCPv6 messages.</span></span>

- <span data-ttu-id="2f62b-200">A Associação de Identidade do Cliente para Endereços Não Temporários (IANA) e a Associação de Identidade IPv6 endereço IPv6 (IA) que definem cumulativamente os parâmetros de atribuição de endereços IPv6 do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-200">The Client Identity Association for Non Temporary Addresses (IANA) and Identity Association IPv6 address (IA) cumulatively which define the Client IPv6 address assignment parameters.</span></span>

- <span data-ttu-id="2f62b-201">Pedidos de opção do cliente (servidor DNS, nome de domínio, etc).</span><span class="sxs-lookup"><span data-stu-id="2f62b-201">Client option requests (DNS server, domain name, etc).</span></span>

- <span data-ttu-id="2f62b-202">O endereço de origem do Cliente IPv6 (se definido) e endereço de destino (se não multicast) do seu mais recente pedido DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-202">The Client IPv6 source address (if set) and destination address (if not multicast) of its most recent DHCPv6 request.</span></span>

- <span data-ttu-id="2f62b-203">O mais recente tipo de mensagem do Cliente e o 'estado' do DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-203">The Client’s most recent message type and DHCPv6 ‘state’.</span></span>

## <a name="netx-duo-dhcpv6-server-requirements-and-constraints"></a><span data-ttu-id="2f62b-204">Requisitos e constrangimentos do servidor NetX Duo DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2f62b-204">NetX Duo DHCPv6 Server Requirements and Constraints</span></span>

<span data-ttu-id="2f62b-205">A API do Servidor DHPV6 netX requer ThreadX 5.1 ou mais tarde e NetX Duo 5.5 ou mais tarde.</span><span class="sxs-lookup"><span data-stu-id="2f62b-205">The NetX Duo DHCPv6 Server API requires ThreadX 5.1 or later, and NetX Duo 5.5 or later.</span></span>

<span data-ttu-id="2f62b-206">**Requisitos**</span><span class="sxs-lookup"><span data-stu-id="2f62b-206">**Requirements**</span></span>

<span data-ttu-id="2f62b-207">***Configuração de tarefas ip thread***</span><span class="sxs-lookup"><span data-stu-id="2f62b-207">***IP Thread Task Setup***</span></span>

<span data-ttu-id="2f62b-208">O NetX Duo DHCPv6 Server requer a criação de uma instância IP para o envio e receção de mensagens para o DHCPv6 na sua ligação de rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-208">The NetX Duo DHCPv6 Server requires a creation of an IP instance for sending and receiving messages to DHCPv6 on its network link.</span></span> <span data-ttu-id="2f62b-209">Isto é feito usando o serviço *nx_ip_create.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-209">This is done using the *nx_ip_create* service.</span></span> <span data-ttu-id="2f62b-210">O próprio Servidor DHCPv6 duo NetX deve ser criado.</span><span class="sxs-lookup"><span data-stu-id="2f62b-210">The NetX Duo DHCPv6 Server itself must be created.</span></span> <span data-ttu-id="2f62b-211">Isto é feito usando o serviço *nx_dhcpv6_server_create.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-211">This is done using the *nx_dhcpv6_server_create* service.</span></span>

<span data-ttu-id="2f62b-212">DHCPv6 utiliza NetX Duo, ICMPv6 e UDP.</span><span class="sxs-lookup"><span data-stu-id="2f62b-212">DHCPv6 utilizes NetX Duo, ICMPv6 and UDP.</span></span> <span data-ttu-id="2f62b-213">Portanto, o IPv6 deve ser ativado primeiro antes de utilizar o SERVIDOR DHCPv6, ligando para os seguintes serviços NetX Duo:</span><span class="sxs-lookup"><span data-stu-id="2f62b-213">Therefore IPv6 must first be enabled prior to using DHCPv6 Server by calling the following NetX Duo services:</span></span>

- <span data-ttu-id="2f62b-214">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="2f62b-214">*nx_udp_enable*</span></span>
- <span data-ttu-id="2f62b-215">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="2f62b-215">*nxd_ipv6_enable*</span></span>
- <span data-ttu-id="2f62b-216">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="2f62b-216">*nxd_icmp_enable*</span></span>

<span data-ttu-id="2f62b-217">Além disso, antes de o Servidor DHCPv6 poder ser iniciado, tem uma série de tarefas de configuração para executar:</span><span class="sxs-lookup"><span data-stu-id="2f62b-217">Further, before the DHCPv6 Server can be started, it has a number of set up tasks to perform:</span></span>

- <span data-ttu-id="2f62b-218">Crie e valide os seus endereços globais de ligação local e IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-218">Create and validate its link local and IPv6 global addresses.</span></span> <span data-ttu-id="2f62b-219">A validação do endereço é realizada automaticamente pelo NetX Duo utilizando a Deteção de Endereços Duplicado se estiver ativada.</span><span class="sxs-lookup"><span data-stu-id="2f62b-219">Address validation is performed automatically by NetX Duo using Duplicate Address Detection if it is enabled.</span></span> <span data-ttu-id="2f62b-220">Consulte o Manual do *Utilizador NetX Duo* para obter mais informações sobre a validação de endereços IP locais e globais.</span><span class="sxs-lookup"><span data-stu-id="2f62b-220">See the *NetX Duo User Manual* for details on link local and global IP address validation.</span></span>

- <span data-ttu-id="2f62b-221">Dedibrar o índice de interface de rede para a sua interface DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-221">Set the network interface index for its DHCPv6 interface.</span></span>

- <span data-ttu-id="2f62b-222">Crie um intervalo de endereços IP para endereços IPv6 atribuíveis.</span><span class="sxs-lookup"><span data-stu-id="2f62b-222">Create an IP address range for assignable IPv6 addresses.</span></span> <span data-ttu-id="2f62b-223">Ou, se os dados existirem de uma sessão anterior do Servidor DHCPv6, a tabela de locação IPv6 e os registos dos clientes dessa sessão devem ser enviados da memória não volátil para o Servidor DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-223">Or, if data exists from a previous Server DHCPv6 session, IPv6 lease table and client records from that session must be uploaded from non volatile memory to the DHCPv6 Server.</span></span> <span data-ttu-id="2f62b-224">O pequeno sistema de exemplos em outros lugares deste documento irá demonstrar os serviços do Servidor DHCPv6 para a realização deste requisito.</span><span class="sxs-lookup"><span data-stu-id="2f62b-224">The small example system elsewhere in this document will demonstrate the DHCPv6 Server services for accomplishing this requirement.</span></span>

- <span data-ttu-id="2f62b-225">Desaprote o servidor DUID.</span><span class="sxs-lookup"><span data-stu-id="2f62b-225">Set the Server DUID.</span></span> <span data-ttu-id="2f62b-226">Se o Servidor criou o seu DUID numa sessão anterior, deve utilizar os mesmos dados para criar o mesmo DUID para mensagens aos seus Clientes.</span><span class="sxs-lookup"><span data-stu-id="2f62b-226">If the Server has created its DUID in a previous session it must use the same data to create the same DUID for messages to its Clients.</span></span> <span data-ttu-id="2f62b-227">O pequeno sistema de exemplos noutros locais deste documento demonstrará como este requisito é cumprido.</span><span class="sxs-lookup"><span data-stu-id="2f62b-227">The small example system elsewhere in this document will demonstrate how this requirement is accomplished.</span></span>

<span data-ttu-id="2f62b-228">Neste ponto, o Servidor DHCPv6 está pronto para ser executado.</span><span class="sxs-lookup"><span data-stu-id="2f62b-228">At this point the DHCPv6 Server is ready to run.</span></span> <span data-ttu-id="2f62b-229">Internamente, o NetX Duo DHCPv6 Server criará uma tomada UDP ligada à porta 547 e começa a ouvir os pedidos do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-229">Internally the NetX Duo DHCPv6 Server will create a UDP socket bound to port 547, and starts listening for Client requests.</span></span>

<span data-ttu-id="2f62b-230">***Requisitos de piscina de pacotes***</span><span class="sxs-lookup"><span data-stu-id="2f62b-230">***Packet Pool Requirements***</span></span>

<span data-ttu-id="2f62b-231">O NetX Duo DHCPv6 Server requer um pacote de pacotes para o envio de mensagens DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-231">NetX Duo DHCPv6 Server requires a packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="2f62b-232">O tamanho do pacote em termos de carga útil de pacotes e número de pacotes disponíveis é configurável pelo utilizador, e depende do volume antecipado de mensagens DHCPv6 e outras transmissões que a aplicação do anfitrião irá enviar.</span><span class="sxs-lookup"><span data-stu-id="2f62b-232">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the host application will be sending.</span></span>

<span data-ttu-id="2f62b-233">Uma mensagem típica de DHCPv6 é de cerca de 200-300 bytes, dependendo do número de opções adicionais solicitadas pelo Cliente, e informações disponíveis no Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-233">A typical DHCPv6 message is about 200-300 bytes depending on the number of additional options requested by the Client, and information available from the Server.</span></span>

<span data-ttu-id="2f62b-234">***Definição da interface do Servidor DHCPv6***</span><span class="sxs-lookup"><span data-stu-id="2f62b-234">***Setting the DHCPv6 Server interface***</span></span>

<span data-ttu-id="2f62b-235">O Servidor DHCPv6 desrespuca da interface de rede primária, uma vez que a interface aceitará os pedidos do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-235">The DHCPv6 Server defaults to the primary network interface as the interface it will accept Client requests on.</span></span> <span data-ttu-id="2f62b-236">No entanto, a aplicação do anfitrião deve ainda definir o índice de endereço global que utilizou para criar o endereço global do Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-236">However, the host application must still set the global address index which it used to create the Server global address.</span></span> <span data-ttu-id="2f62b-237">O índice de interface DHCPv6 e o índice global de endereços são definidos usando o serviço *nx_dhcpv6_server_interface_set.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-237">The DHCPv6 interface index and global address index are set using the *nx_dhcpv6_server_interface_set* service.</span></span> <span data-ttu-id="2f62b-238">Isto também é demonstrado no "pequeno exemplo" deste documento.</span><span class="sxs-lookup"><span data-stu-id="2f62b-238">This is also demonstrated in the “small example” in this document.</span></span>

<span data-ttu-id="2f62b-239">***Salvar DHCPv6 DUID através de Reboots de Servidor***</span><span class="sxs-lookup"><span data-stu-id="2f62b-239">***Saving DHCPv6 DUID across Server Reboots***</span></span>

<span data-ttu-id="2f62b-240">O protocolo DHCPv6 requer que o Servidor utilize o mesmo DUID em várias reinicializações.</span><span class="sxs-lookup"><span data-stu-id="2f62b-240">The DHCPv6 protocol requires the Server to use the same DUID across multiple reboots.</span></span> <span data-ttu-id="2f62b-241">Os dados utilizados para criar o DUID devem, portanto, ser armazenados e recuperados da memória nãovolárceda para este requisito.</span><span class="sxs-lookup"><span data-stu-id="2f62b-241">Any data used to create the DUID must therefore be stored and retrieved from nonvolatile memory for this requirement.</span></span> <span data-ttu-id="2f62b-242">Para os anfitriões que usam o Link Layer Plus Time DUID que requer acesso a um relógio em tempo real.</span><span class="sxs-lookup"><span data-stu-id="2f62b-242">For hosts that use the Link Layer Plus Time DUID which requires access to a real time clock.</span></span> <span data-ttu-id="2f62b-243">A aplicação de anfitrião NetX Duo DHCPv6 deve incluir o acesso de dados em tempo real para gerar um valor temporal para a criação inicial do Servidor DUID e armazenar esses dados para reutilização em sessões subsequentes do Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-243">The NetX Duo DHCPv6 host application should include real time data access for generating a time value for the initial Server DUID creation, and store that data for reuse on subsequent Server sessions.</span></span> <span data-ttu-id="2f62b-244">O *nx_dhcpv6_set_server_duid* então toma os dados DUID como seus argumentos, bem como opções de configuração dependendo do tipo DUID, para produzir (ou reproduzir) o seu próprio DUID.</span><span class="sxs-lookup"><span data-stu-id="2f62b-244">The *nx_dhcpv6_set_server_duid* then takes DUID data as its arguments, as well as configuration options depending on DUID type, to produce (or reproduce) its own DUID.</span></span>

<span data-ttu-id="2f62b-245">***Criação de lista de endereços IPv6 atribuível***</span><span class="sxs-lookup"><span data-stu-id="2f62b-245">***Assignable IPv6 Address List Creation***</span></span>

<span data-ttu-id="2f62b-246">Após a criação do Servidor DHCPv6, a aplicação do anfitrião do Servidor deve criar uma gama de endereços globais IPv6 atribuíveis se não existirem dados da lista de endereços IP previamente armazenados.</span><span class="sxs-lookup"><span data-stu-id="2f62b-246">After creation of the DHCPv6 Server, the Server host application must create a range of assignable IPv6 global addresses if there is no previously stored IP address list data.</span></span> <span data-ttu-id="2f62b-247">Isto é feito usando o serviço *nx_dhcpv6_create_ip_address_range* que toma como entrada um endereço IPv6 inicial e final.</span><span class="sxs-lookup"><span data-stu-id="2f62b-247">This is done using the *nx_dhcpv6_create_ip_address_range* service which takes as input a starting and ending IPv6 address.</span></span>

<span data-ttu-id="2f62b-248">***Guardar endereços e dados atribuíveis dhcpv6 e dados do cliente***</span><span class="sxs-lookup"><span data-stu-id="2f62b-248">***Saving DHCPv6 Assignable Address and Client data***</span></span>

<span data-ttu-id="2f62b-249">O protocolo DHCPv6 requer que o Servidor DHCPv6 guarde os dados de endereço do seu Cliente e IPv6 no armazenamento nãovolículo em caso de reinicialização do servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-249">The DHCPv6 protocol requires that the DHCPv6 Server save its Client and IPv6 address data in nonvolatile storage in the event of rebooting the server.</span></span> <span data-ttu-id="2f62b-250">O NetX Duo DHCPv6 Server dispõe de várias API para o upload e descarregamento de dados de endereços do Cliente e do IPv6 de e para o Servidor DHCPv6, respectivamente:</span><span class="sxs-lookup"><span data-stu-id="2f62b-250">The NetX Duo DHCPv6 Server has several API for uploading and downloading Client and IPv6 address data to and from the DHCPv6 Server, respectively:</span></span>

<span data-ttu-id="2f62b-251">*nx_dhcpv6_add_client_record*</span><span class="sxs-lookup"><span data-stu-id="2f62b-251">*nx_dhcpv6_add_client_record*</span></span>

<span data-ttu-id="2f62b-252">*nx_dhcpv6_add_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="2f62b-252">*nx_dhcpv6_add_ip_address_lease*</span></span>

<span data-ttu-id="2f62b-253">*nx_dhcpv6_retrieve_client_record*</span><span class="sxs-lookup"><span data-stu-id="2f62b-253">*nx_dhcpv6_retrieve_client_record*</span></span>

<span data-ttu-id="2f62b-254">*nx_dhcpv6_retrieve_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="2f62b-254">*nx_dhcpv6_retrieve_ip_address_lease*</span></span>

<span data-ttu-id="2f62b-255">O upload dos dados para o Servidor tem de ser feito antes de reiniciar o Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-255">Uploading data to the Server must be done before restarting the Server.</span></span> <span data-ttu-id="2f62b-256">O download dos dados só deve ser feito depois de o Servidor DHCPv6 ser interrompido (ou suspenso).</span><span class="sxs-lookup"><span data-stu-id="2f62b-256">Downloading the data should be done only after the DHCPv6 Server is stopped (or suspended).</span></span> <span data-ttu-id="2f62b-257">Os serviços para o fazer são descritos em pormenor mais tarde neste documento.</span><span class="sxs-lookup"><span data-stu-id="2f62b-257">The services for doing so are described in detail later in this document.</span></span> <span data-ttu-id="2f62b-258">No entanto, o NetX Duo DHCPv6 fornece não define um acesso ao armazenamento nãovoláctico.</span><span class="sxs-lookup"><span data-stu-id="2f62b-258">However, the NetX Duo DHCPv6 provides does not define an access to nonvolatile storage.</span></span> <span data-ttu-id="2f62b-259">Isto deve ser tratado pela aplicação do anfitrião.</span><span class="sxs-lookup"><span data-stu-id="2f62b-259">This must be handled by the host application.</span></span> <span data-ttu-id="2f62b-260">O pequeno exemplo demonstra como a aplicação do anfitrião faz isto.</span><span class="sxs-lookup"><span data-stu-id="2f62b-260">The small example demonstrates how the host application does this.</span></span>

<span data-ttu-id="2f62b-261">***Identificador Exclusivo do Servidor DHCP (DUID)***</span><span class="sxs-lookup"><span data-stu-id="2f62b-261">***Server DHCP Unique Identifier (DUID)***</span></span>

<span data-ttu-id="2f62b-262">O Servidor DUID define exclusivamente o anfitrião do Servidor DHCPv6 na rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-262">The Server DUID uniquely defines the DHCPv6 Server host on the network.</span></span> <span data-ttu-id="2f62b-263">Se um Servidor não tiver criado previamente o seu DUID, pode utilizar o *nx_dhcpv6_server_set_duid* para criar um.</span><span class="sxs-lookup"><span data-stu-id="2f62b-263">If a Server has not previously created its DUID, it can use the *nx_dhcpv6_server_set_duid* to create one.</span></span> <span data-ttu-id="2f62b-264">De acordo com o RFC 3315, o Servidor DHCPv6 deve guardar este DUID para memória nãovoláctica para poder recuperá-lo após o reboot do Servidor.</span><span class="sxs-lookup"><span data-stu-id="2f62b-264">As per RFC 3315, the DHCPv6 Server must save this DUID to nonvolatile memory to be able to retrieve it after Server reboots.</span></span> <span data-ttu-id="2f62b-265">O Servidor DHCPv6 suporta os tipos DUID da Camada de Ligação, do Tempo da Camada de Ligação e da Empresa (Fornecedor designado).</span><span class="sxs-lookup"><span data-stu-id="2f62b-265">The DHCPv6 Server supports the Link Layer, Link Layer Time and Enterprise (Vendor assigned) DUID types.</span></span> <span data-ttu-id="2f62b-266">Note que o Cliente deve enviar diretamente o tipo de Fornecedor DUID.</span><span class="sxs-lookup"><span data-stu-id="2f62b-266">Note that the Client must send in the Vendor type DUID directly.</span></span> <span data-ttu-id="2f62b-267">A opção para DUIDs do tipo fornecedor (17) não é suportada diretamente pelo Servidor DHPv6 do Duo NetX.</span><span class="sxs-lookup"><span data-stu-id="2f62b-267">The option for Vendor type DUIDs (17) is not directly supported by the NetX Duo DHPv6 Server.</span></span>

<span data-ttu-id="2f62b-268">A aplicação do anfitrião do servidor DHCPv6 tem valores predefinidos para a atribuição de endereços IPv6, incluindo o tempo de locação.</span><span class="sxs-lookup"><span data-stu-id="2f62b-268">The DHCPv6 Server host application has default values for IPv6 address assignment including lease timeout.</span></span> <span data-ttu-id="2f62b-269">Consulte opções configurais mais tarde neste documento para saber como definir estas opções.</span><span class="sxs-lookup"><span data-stu-id="2f62b-269">See Configurable Options later in this document for how to set these options.</span></span> <span data-ttu-id="2f62b-270">:</span><span class="sxs-lookup"><span data-stu-id="2f62b-270">:</span></span>

<span data-ttu-id="2f62b-271">O bloco de controlo *IANA* contém os campos T1 e T2.</span><span class="sxs-lookup"><span data-stu-id="2f62b-271">The *IANA* control block contains the T1 and T2 fields.</span></span> <span data-ttu-id="2f62b-272">O bloco *IA* no bloco de controlo *IANA* contém os campos de vida preferidos e válidos.</span><span class="sxs-lookup"><span data-stu-id="2f62b-272">The *IA* block in the *IANA* control block contains the preferred and valid lifetime fields.</span></span> <span data-ttu-id="2f62b-273">A aplicação de anfitrião tem opções configuráveis definidas em outros lugares deste documento para definir estas opções.</span><span class="sxs-lookup"><span data-stu-id="2f62b-273">The host application has configurable options defined elsewhere in this document for setting these options.</span></span> <span data-ttu-id="2f62b-274">São atribuídos a todos os pedidos de endereço do Cliente IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-274">They are assigned to all Client IPv6 address requests.</span></span>

<span data-ttu-id="2f62b-275">Estes parâmetros de locação IP DHCPv6 são definidos abaixo.</span><span class="sxs-lookup"><span data-stu-id="2f62b-275">These DHCPv6 IP lease parameters are defined below.</span></span>

<span data-ttu-id="2f62b-276">T1 – tempo em segundos quando o Cliente deve começar a renovar o seu endereço IPv6 do Servidor que o atribuiu.</span><span class="sxs-lookup"><span data-stu-id="2f62b-276">T1 – time in seconds when the Client must start renewing its IPv6 address from the Server that assigned it.</span></span>

<span data-ttu-id="2f62b-277">T2 – tempo em segundos quando o Cliente deve começar a religar o endereço IPv6, se a renovação falhar, com qualquer Servidor na sua ligação.</span><span class="sxs-lookup"><span data-stu-id="2f62b-277">T2 – time in seconds when the Client must start rebinding the IPv6 address, if renewal failed, with any Server on its link.</span></span>

<span data-ttu-id="2f62b-278">Vida útil preferida – tempo em segundos quando o endereço cliente for depreciado se o Cliente não o tiver renovado ou recuperado.</span><span class="sxs-lookup"><span data-stu-id="2f62b-278">Preferred lifetime – time in seconds when the Client address becomes deprecated if the Client has not renewed or rebound it.</span></span> <span data-ttu-id="2f62b-279">O Cliente ainda pode usar este endereço.</span><span class="sxs-lookup"><span data-stu-id="2f62b-279">The Client can still use this address.</span></span>

<span data-ttu-id="2f62b-280">Vida útil válida – tempo em segundos quando o endereço IP do Cliente estiver expirado e NÃO DEVE utilizar este endereço nas suas transmissões de rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-280">Valid lifetime – time in seconds when the Client IP address is expired and MUST not use this address in its network transmissions.</span></span>

<span data-ttu-id="2f62b-281">O RFC recomenda T1 e T2 vezes que sejam 0,5 e 0,8, respectivamente, da vida útil preferida na opção Cliente *IANA.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-281">The RFC recommends T1 and T2 times that are 0.5 and 0.8, respectively, of the preferred lifetime in the Client *IANA* option.</span></span> <span data-ttu-id="2f62b-282">Se o Servidor não tiver preferência, deverá definir estes tempos para zero.</span><span class="sxs-lookup"><span data-stu-id="2f62b-282">If the Server has no preference, it should set these times to zero.</span></span> <span data-ttu-id="2f62b-283">Se uma resposta do Servidor contiver T1 e T2 vezes definidas para zero, está a permitir que o Cliente desemalte as suas próprias T1 e T2 vezes.</span><span class="sxs-lookup"><span data-stu-id="2f62b-283">If a Server reply contains T1 and T2 times set to zero, it is letting the Client set its own T1 and T2 times.</span></span>

<span data-ttu-id="2f62b-284">**Restrições**</span><span class="sxs-lookup"><span data-stu-id="2f62b-284">**Constraints**</span></span>

<span data-ttu-id="2f62b-285">O NetX Duo DHCPv6 Server não suporta as seguintes opções DHCPv6:</span><span class="sxs-lookup"><span data-stu-id="2f62b-285">NetX Duo DHCPv6 Server does not support the following DHCPv6 options:</span></span>

  - <span data-ttu-id="2f62b-286">Opção De Compromisso Rápido que otimiza o processo de pedido de endereço DHCPv6 apenas para a troca de mensagens Solicit and Answer</span><span class="sxs-lookup"><span data-stu-id="2f62b-286">Rapid Commit option which optimizes the DHCPv6 address request process to just the Solicit and Reply message exchange</span></span>

  - <span data-ttu-id="2f62b-287">Reconfigurar a opção que permite ao Servidor pode iniciar alterações ao estado do endereço IP do Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-287">Reconfigure option which allows the Server can initiate changes to the Client’s IP address status.</span></span>

  - <span data-ttu-id="2f62b-288">Opção Unicast; todas as mensagens do Cliente devem ser enviadas para o *All_DHCP_Relay_Agents_and_Servers* endereço multicast e não diretamente para o Servidor DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-288">Unicast option; all Client messages must be sent to the *All_DHCP_Relay_Agents_and_Servers* multicast address rather than to the DHCPv6 Server directly.</span></span>

  - <span data-ttu-id="2f62b-289">Associação de Identidade para a Opção Endereços Temporários (IA_TA)que é um endereço IP temporário concedido a um Cliente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-289">Identity Association for the Temporary Addresses(IA_TA)option which is a temporary IP address granted to a Client.</span></span>

  - <span data-ttu-id="2f62b-290">Opções de IPv6 (endereços IPv6) por Pedido de Cliente</span><span class="sxs-lookup"><span data-stu-id="2f62b-290">Multiple IA (IPv6 addresses) options per Client Request</span></span>

  - <span data-ttu-id="2f62b-291">O anfitrião de retransmissão entre o Cliente DHCPv6 e o Servidor, por exemplo, o Cliente e o Servidor devem estar na mesma rede.</span><span class="sxs-lookup"><span data-stu-id="2f62b-291">Relay host between DHCPv6 Client and Server e.g. Client and Server must be on the same network.</span></span>

  - <span data-ttu-id="2f62b-292">IPSec e Autenticação não são suportados em mensagens DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-292">IPSec and Authentication are not supported in DHCPv6 messaging.</span></span> <span data-ttu-id="2f62b-293">No entanto, a instância IP pode ser ativada ipSec dependendo da versão do NetX Duo em uso.</span><span class="sxs-lookup"><span data-stu-id="2f62b-293">However, the IP instance may be IPSec enabled depending on the version of NetX Duo in use.</span></span>

  - <span data-ttu-id="2f62b-294">O NetX Duo DHCPv6 Server suporta diretamente apenas o pedido de opção do servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="2f62b-294">The NetX Duo DHCPv6 Server directly supports only the DNS server option request.</span></span> <span data-ttu-id="2f62b-295">Isto pode mudar em futuras versões.</span><span class="sxs-lookup"><span data-stu-id="2f62b-295">This may change in future releases.</span></span>

  - <span data-ttu-id="2f62b-296">A opção de delegação prefixo não é apoiada.</span><span class="sxs-lookup"><span data-stu-id="2f62b-296">The Prefix Delegation option is not supported.</span></span>

  - <span data-ttu-id="2f62b-297">Autenticação de mensagens DHCPv6 embora IPSec possa ser ativada no ambiente NetX Duo subjacente.</span><span class="sxs-lookup"><span data-stu-id="2f62b-297">Authentication of DHCPv6 messages although IPSec can be enabled in the underlying NetX Duo environment.</span></span> <span data-ttu-id="2f62b-298">Nem o NetX Duo DHCPv6 Server suporta ligações de retransmissão aos Clientes.</span><span class="sxs-lookup"><span data-stu-id="2f62b-298">Neither does the NetX Duo DHCPv6 Server support relay connections to the Clients.</span></span> <span data-ttu-id="2f62b-299">Presume-se que todos os pedidos do Cliente são originários de anfitriões na rede server.</span><span class="sxs-lookup"><span data-stu-id="2f62b-299">It is assumed all Client requests originate from hosts on the Server network.</span></span>

## <a name="netx-duo-dhcpv6-server-callback-functions"></a><span data-ttu-id="2f62b-300">Funções de callback do servidor NetX Duo DHCPv6</span><span class="sxs-lookup"><span data-stu-id="2f62b-300">NetX Duo DHCPv6 Server Callback Functions</span></span>

<span data-ttu-id="2f62b-301">*nx_dhcpv6_IP_address_declined_handler*</span><span class="sxs-lookup"><span data-stu-id="2f62b-301">*nx_dhcpv6_IP_address_declined_handler*</span></span>

<span data-ttu-id="2f62b-302">Quando o Cliente DHCPv6 envia uma mensagem de Declínio, o Servidor DHCPV6 da NetX Marca o endereço como não disponível nas suas tabelas de endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="2f62b-302">When the DHCPv6 Client sends a Decline message, the NetX Duo DHCPv6 Server marks the address as not available in its IPv6 address tables.</span></span> <span data-ttu-id="2f62b-303">Para ter a capacidade de personalizar o tratamento do Servidor desta mensagem, é fornecida a *nx_dhcpv6_IP_address_declined_handler* *.*</span><span class="sxs-lookup"><span data-stu-id="2f62b-303">To have the ability to customize the Server handling of this message, the *nx_dhcpv6_IP_address_declined_handler* is provided *.*</span></span> <span data-ttu-id="2f62b-304">No entanto, esta chamada não está atualmente implementada.</span><span class="sxs-lookup"><span data-stu-id="2f62b-304">However, this callback is not currently implemented.</span></span>

<span data-ttu-id="2f62b-305">*nx_dhcpv6_server_option_request_handler*</span><span class="sxs-lookup"><span data-stu-id="2f62b-305">*nx_dhcpv6_server_option_request_handler*</span></span>

<span data-ttu-id="2f62b-306">Quando a mensagem do Cliente DHCPv6 contém dados de pedido de opção, o NetX Duo DHCPv6 Server reencaminho cada código de opção de pedido de opção para esta chamada de utilizador, se definido.</span><span class="sxs-lookup"><span data-stu-id="2f62b-306">When the DHCPv6 Client message contains option request data, the NetX Duo DHCPv6 Server forwards each option request option code to this user callback, if defined.</span></span> <span data-ttu-id="2f62b-307">Isto dá ao NetX Duo Server a capacidade de permitir que o utilizador definiu o revés preencha os dados.</span><span class="sxs-lookup"><span data-stu-id="2f62b-307">This gives the NetX Duo Server the capability to let the user defined callback fill in the data.</span></span> <span data-ttu-id="2f62b-308">No entanto, esta funcionalidade não está atualmente implementada.</span><span class="sxs-lookup"><span data-stu-id="2f62b-308">However this functionality is not currently implemented.</span></span>

## <a name="supported-dhcpv6-rfcs"></a><span data-ttu-id="2f62b-309">DHCPv6 RFCs apoiados</span><span class="sxs-lookup"><span data-stu-id="2f62b-309">Supported DHCPv6 RFCs</span></span>

<span data-ttu-id="2f62b-310">NetX Duo DHCPv6 está em conformidade com RFC3315, RFC3646 e RFCs relacionados.</span><span class="sxs-lookup"><span data-stu-id="2f62b-310">NetX Duo DHCPv6 is compliant with RFC3315, RFC3646, and related RFCs.</span></span>