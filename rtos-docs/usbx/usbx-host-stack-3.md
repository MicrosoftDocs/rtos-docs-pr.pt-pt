---
title: Capítulo 3 - Componentes funcionais da pilha de anfitriões USBX
description: Este capítulo contém uma descrição da pilha usb incorporada USBX de uma perspetiva funcional.
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 17b8d884dd2c71d60e91f5fcec40c360060f4fe8
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104828369"
---
# <a name="chapter-3---functional-components-of-usbx-host-stack"></a><span data-ttu-id="5cfd3-103">Capítulo 3 - Componentes funcionais da pilha de anfitriões USBX</span><span class="sxs-lookup"><span data-stu-id="5cfd3-103">Chapter 3 - Functional Components of USBX Host Stack</span></span>

<span data-ttu-id="5cfd3-104">Este capítulo contém uma descrição da pilha usb incorporada USBX de uma perspetiva funcional.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-104">This chapter contains a description of the high performance USBX embedded USB host stack from a functional perspective.</span></span>

## <a name="execution-overview"></a><span data-ttu-id="5cfd3-105">Visão geral da execução</span><span class="sxs-lookup"><span data-stu-id="5cfd3-105">Execution Overview</span></span>

<span data-ttu-id="5cfd3-106">USBX é composto por vários componentes:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-106">USBX is composed of several components:</span></span>

- <span data-ttu-id="5cfd3-107">Inicialização</span><span class="sxs-lookup"><span data-stu-id="5cfd3-107">Initialization</span></span>
- <span data-ttu-id="5cfd3-108">Chamadas de interface de aplicação</span><span class="sxs-lookup"><span data-stu-id="5cfd3-108">Application interface calls</span></span>
- <span data-ttu-id="5cfd3-109">Centro de Raiz</span><span class="sxs-lookup"><span data-stu-id="5cfd3-109">Root Hub</span></span>
- <span data-ttu-id="5cfd3-110">Classe Hub</span><span class="sxs-lookup"><span data-stu-id="5cfd3-110">Hub Class</span></span>
- <span data-ttu-id="5cfd3-111">Aulas de acolhimento</span><span class="sxs-lookup"><span data-stu-id="5cfd3-111">Host Classes</span></span>
- <span data-ttu-id="5cfd3-112">Pilha de anfitriões USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-112">USB Host Stack</span></span>
- <span data-ttu-id="5cfd3-113">Controlador anfitrião</span><span class="sxs-lookup"><span data-stu-id="5cfd3-113">Host controller</span></span>

<span data-ttu-id="5cfd3-114">O diagrama seguinte ilustra a pilha de anfitriões USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-114">The following diagram illustrates the USBX host stack.</span></span>

![Pilha de anfitriões USBX](./media/usbx-host-stack/usbx-host-stack.png)

### <a name="initialization"></a><span data-ttu-id="5cfd3-116">Inicialização</span><span class="sxs-lookup"><span data-stu-id="5cfd3-116">Initialization</span></span>

<span data-ttu-id="5cfd3-117">Para ativar o USBX, a função ***ux_system_initialize*** deve ser chamada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-117">In order to activate USBX, the function ***ux_system_initialize*** must be called.</span></span> <span data-ttu-id="5cfd3-118">Esta função inicializa os recursos de memória do USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-118">This function initializes the memory resources of USBX.</span></span>

<span data-ttu-id="5cfd3-119">Para ativar as instalações de anfitrião USBX, a função ***ux_host_stack_initialize*** deve ser chamada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-119">In order to activate USBX host facilities, the function ***ux_host_stack_initialize*** must be called.</span></span> <span data-ttu-id="5cfd3-120">Esta função, por sua vez, rubricará todos os recursos utilizados pela pilha de anfitriões USBX, tais como fios ThreadX, mutexes e semáforos.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-120">This function will in turn initialize all the resources used by the USBX host stack such as ThreadX threads, mutexes, and semaphores.</span></span>

<span data-ttu-id="5cfd3-121">Cabe à inicialização da aplicação ativar pelo menos um controlador usb e uma ou mais classes USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-121">It is up to the application initialization to activate at least one USB host controller and one or more USB classes.</span></span> <span data-ttu-id="5cfd3-122">Quando as classes estiverem registadas na stack e a função de inicialização do controlador de anfitrião tiver sido chamada, o autocarro está ativo e a descoberta do dispositivo pode começar.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-122">When the classes have been registered to the stack and the host controller(s) initialization function has been called the bus is active and device discovery can start.</span></span> <span data-ttu-id="5cfd3-123">Se o eixo raiz do controlador hospedeiro detetar um dispositivo ligado, o fio de enumeração USB, encarregado da topologia USB, acordará e procederá à enumeração do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-123">If the root hub of the host controller detects an attached device, the USB enumeration thread, in charge of the USB topology, will be wake up and proceed to enumerate the device(s).</span></span>

<span data-ttu-id="5cfd3-124">É possível, devido à natureza do hub raiz e dos hubs a jusante, que todos os dispositivos USB ligados possam não ter sido completamente configurados quando a função de inicialização do controlador do hospedeiro regressar.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-124">It is possible, due to the nature of the root hub and downstream hubs, that all attached USB devices may not have been configured completely when the host controller initialization function returns.</span></span> <span data-ttu-id="5cfd3-125">Pode levar vários segundos para enumerar todos os dispositivos USB, especialmente se houver um ou mais hubs entre o hub raiz e os dispositivos USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-125">It can take several seconds to enumerate all USB devices, especially if there are one or more hubs between the root hub and USB devices.</span></span>

### <a name="application-interface-calls"></a><span data-ttu-id="5cfd3-126">Chamadas de Interface de Aplicação</span><span class="sxs-lookup"><span data-stu-id="5cfd3-126">Application Interface Calls</span></span>

<span data-ttu-id="5cfd3-127">Há dois níveis de APIs em USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-127">There are two levels of APIs in USBX.</span></span>

- <span data-ttu-id="5cfd3-128">APIs de pilha de anfitriões USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-128">USB Host Stack APIs</span></span>
- <span data-ttu-id="5cfd3-129">APIs de classe de anfitrião USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-129">USB Host Class APIs</span></span>

<span data-ttu-id="5cfd3-130">Normalmente, uma aplicação USBX não deve ter de ligar para nenhuma das funções de API da pilha de anfitriões USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-130">Normally, a USBX application should not have to call any of the USB host stack API functions.</span></span> <span data-ttu-id="5cfd3-131">A maioria das aplicações só acederá às funções API da classe USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-131">Most applications will only access the USB Class API functions.</span></span>

### <a name="usb-host-stack-apis"></a><span data-ttu-id="5cfd3-132">APIs de pilha de anfitriões USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-132">USB Host Stack APIs</span></span>

<span data-ttu-id="5cfd3-133">As funções de API da pilha de anfitrião são responsáveis pelo registo de componentes USBX (classes de anfitrião e controladores de anfitrião), configuração de dispositivos e pedidos de transferência para os pontos finais do dispositivo disponíveis.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-133">The host stack API functions are responsible for the registration of USBX components (host classes and host controllers), configuration of devices, and the transfer requests for available device endpoints.</span></span>

### <a name="usb-host-class-api"></a><span data-ttu-id="5cfd3-134">API da classe de anfitrião USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-134">USB Host Class API</span></span>

<span data-ttu-id="5cfd3-135">As APIs de classe são muito específicas de cada classe USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-135">The Class APIs are very specific to each USB class.</span></span> <span data-ttu-id="5cfd3-136">A maioria das funções comuns de API para classes USB fornecem serviços como abrir/fechar um dispositivo e ler e escrever para um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-136">Most of the common API functions for USB classes provide services such as opening/closing a device and reading from and writing to a device.</span></span>

### <a name="root-hub"></a><span data-ttu-id="5cfd3-137">Centro de Raiz</span><span class="sxs-lookup"><span data-stu-id="5cfd3-137">Root Hub</span></span>

<span data-ttu-id="5cfd3-138">Cada instância do controlador anfitrião tem um ou mais centros de raiz USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-138">Each host controller instance has one or more USB root hubs.</span></span> <span data-ttu-id="5cfd3-139">O número de cubos de raiz é determinado pela natureza do controlador ou pode ser recuperado através da leitura de registos específicos do controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-139">The number of root hubs is either determined by the nature of the controller or can be retrieved by reading specific registers from the controller.</span></span>

### <a name="hub-class"></a><span data-ttu-id="5cfd3-140">Classe Hub</span><span class="sxs-lookup"><span data-stu-id="5cfd3-140">Hub Class</span></span>

<span data-ttu-id="5cfd3-141">A classe hub está encarregada de conduzir centros USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-141">The hub class is in charge of driving USB hubs.</span></span> <span data-ttu-id="5cfd3-142">Um hub USB pode ser um hub autónomo ou como parte de um dispositivo composto, como um teclado ou um monitor.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-142">A USB hub can either be a stand-alone hub or as part of a compound device such as a keyboard or a monitor.</span></span> <span data-ttu-id="5cfd3-143">Um hub pode ser autoalimentado ou movido a autocarros.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-143">A hub can be self-powered or bus-powered.</span></span> <span data-ttu-id="5cfd3-144">Os hubs movidos a autocarros têm um máximo de quatro portas a jusante e só podem permitir a ligação de dispositivos que sejam dispositivos autoalimentados ou movidos a autocarros que utilizem menos de 100mA de potência.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-144">Bus-powered hubs have a maximum of four downstream ports and can only allow for the connection of devices that are either self-powered or bus-powered devices that use less than 100mA of power.</span></span> <span data-ttu-id="5cfd3-145">Os centros podem ser em cascata.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-145">Hubs can be cascaded.</span></span> <span data-ttu-id="5cfd3-146">Até cinco centros podem ser ligados uns aos outros.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-146">Up to five hubs can be connected to one another.</span></span>

### <a name="usb-host-stack"></a><span data-ttu-id="5cfd3-147">Pilha de anfitriões USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-147">USB Host Stack</span></span>

<span data-ttu-id="5cfd3-148">A pilha de anfitriões USB é a peça central do USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-148">The USB host stack is the centerpiece of USBX.</span></span> <span data-ttu-id="5cfd3-149">Tem três funções principais.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-149">It has three main functions.</span></span>

- <span data-ttu-id="5cfd3-150">Gerir a topologia do USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-150">Manage the topology of the USB.</span></span>
- <span data-ttu-id="5cfd3-151">Ligue um dispositivo USB a uma ou mais classes.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-151">Bind a USB device to one or more classes.</span></span>
- <span data-ttu-id="5cfd3-152">Forneça uma API às aulas para realizar interrogatórios de descritor de dispositivos e transferências USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-152">Provide an API to classes to perform device descriptor interrogation and USB transfers.</span></span>

### <a name="topology-manager"></a><span data-ttu-id="5cfd3-153">Gestor de Topologia</span><span class="sxs-lookup"><span data-stu-id="5cfd3-153">Topology Manager</span></span>

<span data-ttu-id="5cfd3-154">O fio topologia da pilha USB é despertado quando um novo dispositivo está ligado ou quando um dispositivo foi desligado.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-154">The USB stack topology thread is awakened when a new device is connected or when a device has been disconnected.</span></span> <span data-ttu-id="5cfd3-155">O hub raiz ou um hub regular podem aceitar ligações do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-155">Either the root hub or a regular hub can accept device connections.</span></span> <span data-ttu-id="5cfd3-156">Uma vez ligado um dispositivo ao USB, o gestor de topologia recuperará o descritor do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-156">Once a device has been connected to the USB, the topology manager will retrieve the device descriptor.</span></span> <span data-ttu-id="5cfd3-157">Este descritor conterá o número de configurações possíveis disponíveis para este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-157">This descriptor will contain the number of possible configurations available for this device.</span></span> <span data-ttu-id="5cfd3-158">A maioria dos dispositivos tem apenas uma configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-158">Most devices have one configuration only.</span></span> <span data-ttu-id="5cfd3-159">Alguns dispositivos podem funcionar de forma diferente de acordo com a energia disponível na porta onde está ligada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-159">Some devices can operate differently according to the available power available on the port where it is connected.</span></span> <span data-ttu-id="5cfd3-160">Se for esse o caso, o dispositivo terá múltiplas configurações que podem ser selecionadas dependendo da energia disponível.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-160">If this is the case, the device will have multiple configurations that can be selected depending on the available power.</span></span> <span data-ttu-id="5cfd3-161">Quando o dispositivo é configurado pelo gestor de topologia, é então permitido extrair a quantidade de energia especificada no seu descritor de configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-161">When the device is configured by the topology manager, it is then allowed to draw the amount of power specified in its configuration descriptor.</span></span>

## <a name="usb-class-binding"></a><span data-ttu-id="5cfd3-162">Ligação de classe USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-162">USB Class Binding</span></span>

<span data-ttu-id="5cfd3-163">Quando o dispositivo estiver configurado, o gestor de topologia permitirá que o gestor de classe continue a descoberta do dispositivo olhando para os descritores de interface do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-163">When the device is configured, the topology manager will let the class manager continue the device discovery by looking at the device interface descriptors.</span></span> <span data-ttu-id="5cfd3-164">Um dispositivo pode ter um ou mais descritores de interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-164">A device can have one or more interface descriptors.</span></span>

<span data-ttu-id="5cfd3-165">Uma interface representa uma função num dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-165">An interface represents a function in a device.</span></span> <span data-ttu-id="5cfd3-166">Por exemplo, um altifalante USB tem três interfaces, uma para streaming de áudio, uma para controlo de áudio e outra para gerir os vários botões de altifalante.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-166">For instance, a USB speaker has three interfaces, one for audio streaming, one for audio control, and one to manage the various speaker buttons.</span></span>

<span data-ttu-id="5cfd3-167">O gestor de classe tem dois mecanismos para juntar a interface do dispositivo a uma ou mais classes.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-167">The class manager has two mechanisms to join the device interface(s) to one or more classes.</span></span> <span data-ttu-id="5cfd3-168">Pode utilizar a combinação de um PID/VID (ID do produto e ID do fornecedor) encontrado no descritor de interface ou na combinação de Classe/Subclasse/Protocolo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-168">It can either use the combination of a PID/VID (product ID and vendor ID) found in the interface descriptor or the combination of Class/Subclass/Protocol.</span></span>

<span data-ttu-id="5cfd3-169">A combinação PID/VID é válida para interfaces que não podem ser conduzidas por uma classe genérica.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-169">The PID/VID combination is valid for interfaces that cannot be driven by a generic class.</span></span> <span data-ttu-id="5cfd3-170">A combinação Classe/Subclasse/Protocolo é utilizada por interfaces que pertencem a uma classe certificada USB-IF, como impressora, hub, armazenamento, áudio ou HID.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-170">The Class/Subclass/Protocol combination is used by interfaces that belong to a USB-IF certified class such as a printer, hub, storage, audio, or HID.</span></span>

<span data-ttu-id="5cfd3-171">O gestor da classe contém uma lista de classes registadas a partir da inicialização do USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-171">The class manager contains a list of registered classes from the initialization of USBX.</span></span> <span data-ttu-id="5cfd3-172">O gestor de turma ligará para cada classe um de cada vez até que uma classe aceite gerir a interface para esse dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-172">The class manager will call each class one at a time until one class accepts to manage the interface for that device.</span></span> <span data-ttu-id="5cfd3-173">Uma classe só consegue gerir uma interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-173">A class can only manage one interface.</span></span> <span data-ttu-id="5cfd3-174">Para o exemplo do altifalante de áudio USB, o gestor de classe irá ligar para todas as classes para cada uma das interfaces.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-174">For the example of the USB audio speaker, the class manager will call all the classes for each of the interfaces.</span></span>

<span data-ttu-id="5cfd3-175">Uma vez que uma classe aceita uma interface, uma nova instância dessa classe é criada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-175">Once a class accepts an interface, a new instance of that class is created.</span></span> <span data-ttu-id="5cfd3-176">O gestor de classe procurará então a definição alternativa predefinida para a interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-176">The class manager will then search for the default alternate setting for the interface.</span></span> <span data-ttu-id="5cfd3-177">Um dispositivo pode ter uma ou mais configurações alternativas para cada interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-177">A device may have one or more alternate settings for each interface.</span></span> <span data-ttu-id="5cfd3-178">A definição alternativa 0 será a utilizada por predefinição até que uma classe decida alterá-la.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-178">The alternate setting 0 will be the on used by default until a class decides to change it.</span></span>

<span data-ttu-id="5cfd3-179">Para a definição alternativa predefinida, o gestor de classe montará todos os pontos finais contidos na definição alternativa.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-179">For the default alternate setting, the class manager will mount all the endpoints contained in the alternate setting.</span></span> <span data-ttu-id="5cfd3-180">Se a montagem de cada ponto final for bem sucedida, o gestor de classe completará o seu trabalho devolvendo à classe que terminará a inicialização da interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-180">If the mounting of each endpoint is successful, the class manager will complete its job by returning to the class that will finish the initialization of the interface.</span></span>

### <a name="usbx-apis"></a><span data-ttu-id="5cfd3-181">USBX APIs</span><span class="sxs-lookup"><span data-stu-id="5cfd3-181">USBX APIs</span></span>

<span data-ttu-id="5cfd3-182">A pilha USB exporta um certo número de APIs para as classes USB para realizar interrogatórios no dispositivo e transferências USB em pontos finais específicos.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-182">The USB stack exports a certain number of APIs for the USB classes to perform interrogation on the device and USB transfers on specific endpoints.</span></span> <span data-ttu-id="5cfd3-183">Estas funções API são descritas em detalhe neste manual de referência.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-183">These API functions are described in detail in this reference manual.</span></span>

### <a name="host-controller"></a><span data-ttu-id="5cfd3-184">Controlador anfitrião</span><span class="sxs-lookup"><span data-stu-id="5cfd3-184">Host Controller</span></span>

<span data-ttu-id="5cfd3-185">O controlador de anfitrião é responsável pela condução de um tipo específico de controlador USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-185">The host controller driver is responsible for driving a specific type of USB controller.</span></span> <span data-ttu-id="5cfd3-186">Um controlador de anfitrião USB pode ter vários controladores no interior.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-186">A USB host controller can have multiple controllers inside.</span></span> <span data-ttu-id="5cfd3-187">Por exemplo, certos chipsets do Pc Intel contêm dois controladores UHCI.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-187">For instance, certain Intel PC chipset contain two UHCI controllers.</span></span> <span data-ttu-id="5cfd3-188">Alguns controladores USB 2.0 contêm múltiplas instâncias de um controlador OHCI, além de uma instância do controlador EHCI.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-188">Some USB 2.0 controllers contain multiple instances of an OHCI controller in addition to one instance of the EHCI controller.</span></span>

<span data-ttu-id="5cfd3-189">O controlador anfitrião gerirá várias instâncias apenas do mesmo controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-189">The Host controller will manage multiple instance of the same controller only.</span></span> <span data-ttu-id="5cfd3-190">Para conduzir a maioria dos controladores hospedeiros USB 2.0, será necessário inicializar tanto o controlador OCHI como o controlador EHCI durante a inicialização do USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-190">In order to drive most USB 2.0 host controllers, it will be required to initialize both the OCHI controller and the EHCI controller during the initialization of USBX.</span></span>

<span data-ttu-id="5cfd3-191">O controlador anfitrião é responsável pela gestão do seguinte.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-191">The host controller is responsible for managing the following.</span></span>

- <span data-ttu-id="5cfd3-192">Centro de Raiz</span><span class="sxs-lookup"><span data-stu-id="5cfd3-192">Root Hub</span></span>
- <span data-ttu-id="5cfd3-193">Gestão de Energia</span><span class="sxs-lookup"><span data-stu-id="5cfd3-193">Power Management</span></span>
- <span data-ttu-id="5cfd3-194">Pontos Finais</span><span class="sxs-lookup"><span data-stu-id="5cfd3-194">Endpoints</span></span>
- <span data-ttu-id="5cfd3-195">Transferências</span><span class="sxs-lookup"><span data-stu-id="5cfd3-195">Transfers</span></span>

### <a name="root-hub"></a><span data-ttu-id="5cfd3-196">Centro de Raiz</span><span class="sxs-lookup"><span data-stu-id="5cfd3-196">Root Hub</span></span>

<span data-ttu-id="5cfd3-197">A gestão do hub raiz é responsável pela alimentação de cada porta do controlador e determinar se há um dispositivo inserido ou não.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-197">The root hub management is responsible for the powering up of each controller port and determining if there is a device inserted or not.</span></span> <span data-ttu-id="5cfd3-198">Esta funcionalidade é utilizada pelo hub genérico usbx para interrogar as portas a jusante do controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-198">This functionality is used by the USBX generic root hub to interrogate the controller downstream ports.</span></span>

### <a name="power-management"></a><span data-ttu-id="5cfd3-199">Gestão de Energia</span><span class="sxs-lookup"><span data-stu-id="5cfd3-199">Power Management</span></span>

<span data-ttu-id="5cfd3-200">O processamento de gestão de energia prevê o manuseamento de sinais de suspensão/retoma, quer no modo gang, afetando assim todas as portas a jusante do controlador ao mesmo tempo, quer individualmente se o controlador oferecer esta funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-200">The power management processing provides for the handling of suspend/resume signals either in gang mode, therefore affecting all controller downstream ports at the same time, or individually if the controller offers this functionality.</span></span>

### <a name="endpoints"></a><span data-ttu-id="5cfd3-201">Pontos Finais</span><span class="sxs-lookup"><span data-stu-id="5cfd3-201">Endpoints</span></span>

<span data-ttu-id="5cfd3-202">A gestão do ponto final prevê a criação ou destruição de pontos finais físicos para o controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-202">The endpoint management provides for the creation or destruction of physical endpoints to the controller.</span></span> <span data-ttu-id="5cfd3-203">Os pontos finais físicos são entidades de memória que são analisadas pelo controlador se o controlador suporta o DMA principal ou que estão escritos no controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-203">The physical endpoints are memory entities that are parsed by the controller if the controller supports master DMA or that are written in the controller.</span></span> <span data-ttu-id="5cfd3-204">Os pontos finais físicos contêm informações de transações a serem realizadas pelo controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-204">The physical endpoints contain transactions information to be performed by the controller.</span></span>

### <a name="transfers"></a><span data-ttu-id="5cfd3-205">Transferências</span><span class="sxs-lookup"><span data-stu-id="5cfd3-205">Transfers</span></span>

<span data-ttu-id="5cfd3-206">A gestão de transferências prevê que uma classe efetue uma transação em cada um dos pontos finais que foram criados.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-206">Transfer management provides for a class to perform a transaction on each of the endpoints that have been created.</span></span> <span data-ttu-id="5cfd3-207">Cada ponto final lógico contém um componente chamado TRANSFER REQUEST para pedidos de transferência USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-207">Each logical endpoint contains a component called TRANSFER REQUEST for USB transfer requests.</span></span> <span data-ttu-id="5cfd3-208">O PEDIDO DE TRANSFERÊNCIA é utilizado pela stack para descrever a transação.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-208">The TRANSFER REQUEST is used by the stack to describe the transaction.</span></span> <span data-ttu-id="5cfd3-209">Este PEDIDO DE TRANSFERÊNCIA é então passado para a pilha e para o controlador, o que pode dividi-lo em várias sub-transacções dependendo das capacidades do controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-209">This TRANSFER REQUEST is then passed to the stack and to the controller, which may divide it into several sub transactions depending on the capabilities of the controller.</span></span>

## <a name="usb-device-framework"></a><span data-ttu-id="5cfd3-210">Estrutura do dispositivo USB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-210">USB Device Framework</span></span>

<span data-ttu-id="5cfd3-211">Um dispositivo USB é representado por uma árvore de descritores.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-211">A USB device is represented by a tree of descriptors.</span></span> <span data-ttu-id="5cfd3-212">Existem seis tipos principais de descritores.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-212">There are six main types of descriptors.</span></span>

- <span data-ttu-id="5cfd3-213">Descritores de dispositivos</span><span class="sxs-lookup"><span data-stu-id="5cfd3-213">Device descriptors</span></span>
- <span data-ttu-id="5cfd3-214">Descritores de configuração</span><span class="sxs-lookup"><span data-stu-id="5cfd3-214">Configuration descriptors</span></span>
- <span data-ttu-id="5cfd3-215">Descritores de interface</span><span class="sxs-lookup"><span data-stu-id="5cfd3-215">Interface descriptors</span></span>
- <span data-ttu-id="5cfd3-216">Descritores de ponto final</span><span class="sxs-lookup"><span data-stu-id="5cfd3-216">Endpoint descriptors</span></span>
- <span data-ttu-id="5cfd3-217">Descritores de cordas</span><span class="sxs-lookup"><span data-stu-id="5cfd3-217">String descriptors</span></span>
- <span data-ttu-id="5cfd3-218">Descritores funcionais</span><span class="sxs-lookup"><span data-stu-id="5cfd3-218">Functional descriptors</span></span>

<span data-ttu-id="5cfd3-219">Um dispositivo USB pode ter uma descrição muito simples e parece-se com isto.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-219">A USB device may have a very simple description and looks like this.</span></span>
<span data-ttu-id="5cfd3-220">![Dispositivo USB simples](./media/usbx-host-stack/usb-device-simple.png)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-220">![Simple USB device](./media/usbx-host-stack/usb-device-simple.png)</span></span>

<span data-ttu-id="5cfd3-221">Na ilustração acima, o dispositivo tem apenas uma configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-221">In the above illustration, the device has only one configuration.</span></span> <span data-ttu-id="5cfd3-222">Uma única interface é anexada a esta configuração, indicando que o dispositivo tem apenas uma função, e tem apenas um ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-222">A single interface is attached to this configuration, indicating that the device has only one function, and it has one endpoint only.</span></span> <span data-ttu-id="5cfd3-223">Anexado ao descritor do dispositivo está um descritor de cordas que fornece uma identificação visível do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-223">Attached to the device descriptor is a string descriptor providing a visible identification of the device.</span></span>

<span data-ttu-id="5cfd3-224">No entanto, um dispositivo pode ser mais complexo e pode aparecer da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-224">However, a device may be more complex and may appear as follows.</span></span>

![Dispositivo USB complexo](./media/usbx-host-stack/usb-device-complex.png)

<span data-ttu-id="5cfd3-226">Na ilustração acima, o dispositivo tem dois descritores de configuração ligados ao descritor do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-226">In the above illustration, the device has two configuration descriptors attached to the device descriptor.</span></span> <span data-ttu-id="5cfd3-227">Este dispositivo pode indicar que tem dois modos de alimentação ou pode ser conduzido por classes padrão ou classes próprias.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-227">This device may indicate that it has two power modes or can be driven by either standard classes or proprietary classes.</span></span>

<span data-ttu-id="5cfd3-228">Anexadas à primeira configuração estão duas interfaces que indicam que o dispositivo tem duas funções lógicas.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-228">Attached to the first configuration are two interfaces indicating that the device has two logical functions.</span></span> <span data-ttu-id="5cfd3-229">A primeira função tem 3 descritores de ponto final e um descritor funcional.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-229">The first function has 3 endpoint descriptors and a functional descriptor.</span></span> <span data-ttu-id="5cfd3-230">O descritor funcional pode ser utilizado pela classe responsável para conduzir a interface para obter mais informações sobre esta interface normalmente não encontradas por um descritor genérico.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-230">The functional descriptor may be used by the class responsible to drive the interface to obtain further information about this interface normally not found by a generic descriptor.</span></span>

### <a name="device-descriptors"></a><span data-ttu-id="5cfd3-231">Descritores de dispositivos</span><span class="sxs-lookup"><span data-stu-id="5cfd3-231">Device Descriptors</span></span>

<span data-ttu-id="5cfd3-232">Cada dispositivo USB tem um único descritor de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-232">Each USB device has one single device descriptor.</span></span> <span data-ttu-id="5cfd3-233">Este descritor contém a identificação do dispositivo, o número de configurações suportadas e as características do ponto final de controlo predefinido utilizado para configurar o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-233">This descriptor contains the device identification, the number of configurations supported, and the characteristics of the default control endpoint used for configuring the device.</span></span>

| <span data-ttu-id="5cfd3-234">Desvio</span><span class="sxs-lookup"><span data-stu-id="5cfd3-234">Offset</span></span> | <span data-ttu-id="5cfd3-235">Campo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-235">Field</span></span>              | <span data-ttu-id="5cfd3-236">Tamanho</span><span class="sxs-lookup"><span data-stu-id="5cfd3-236">Size</span></span> | <span data-ttu-id="5cfd3-237">Valor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-237">Value</span></span>    | <span data-ttu-id="5cfd3-238">Descrição</span><span class="sxs-lookup"><span data-stu-id="5cfd3-238">Description</span></span>                             |
| ------ | ------------------ | ---- | -------- | --------------------------------------- |
| <span data-ttu-id="5cfd3-239">0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-239">0</span></span>      | <span data-ttu-id="5cfd3-240">Rio BLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-240">BLength</span></span>            | <span data-ttu-id="5cfd3-241">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-241">1</span></span>    | <span data-ttu-id="5cfd3-242">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-242">Number</span></span>   | <span data-ttu-id="5cfd3-243">Tamanho deste descritor em bytes</span><span class="sxs-lookup"><span data-stu-id="5cfd3-243">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="5cfd3-244">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-244">1</span></span>      | <span data-ttu-id="5cfd3-245">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="5cfd3-245">bDescriptorType</span></span>    | <span data-ttu-id="5cfd3-246">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-246">1</span></span>    | <span data-ttu-id="5cfd3-247">Constante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-247">Constant</span></span> | <span data-ttu-id="5cfd3-248">Tipo de descritor de dispositivo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-248">DEVICE Descriptor Type</span></span> |
| <span data-ttu-id="5cfd3-249">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-249">2</span></span>      | <span data-ttu-id="5cfd3-250">bcdUSB</span><span class="sxs-lookup"><span data-stu-id="5cfd3-250">bcdUSB</span></span>             | <span data-ttu-id="5cfd3-251">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-251">2</span></span>    | <span data-ttu-id="5cfd3-252">BCD</span><span class="sxs-lookup"><span data-stu-id="5cfd3-252">BCD</span></span>      | <span data-ttu-id="5cfd3-253">Número de desbloqueio de especificações USB em BinaryCoded Dec</span><span class="sxs-lookup"><span data-stu-id="5cfd3-253">USB Specification Release Number in BinaryCoded Dec</span></span><br /><span data-ttu-id="5cfd3-254">Exemplo: 2.10 é equivalente a 0x210.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-254">Example: 2.10 is equivalent to 0x210.</span></span> <span data-ttu-id="5cfd3-255">Este campo identifica a libertação da Especificação USB com a que o dispositivo e os seus descritores estão em conformidade.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-255">This field identifies the release of the USB Specification that the device and its descriptors are compliant with.</span></span> |
| <span data-ttu-id="5cfd3-256">4</span><span class="sxs-lookup"><span data-stu-id="5cfd3-256">4</span></span>      | <span data-ttu-id="5cfd3-257">bDeviceClass</span><span class="sxs-lookup"><span data-stu-id="5cfd3-257">bDeviceClass</span></span>       | <span data-ttu-id="5cfd3-258">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-258">1</span></span>    | <span data-ttu-id="5cfd3-259">Classe</span><span class="sxs-lookup"><span data-stu-id="5cfd3-259">Class</span></span>    | <span data-ttu-id="5cfd3-260">Código de classe (atribuído por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-260">Class code (assigned by USB-IF).</span></span><br /><span data-ttu-id="5cfd3-261">Se este campo for reiniciado para 0, cada interface dentro de uma configuração especifica as suas próprias informações de classe e as várias interfaces funcionam de forma independente.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-261">If this field is reset to 0, each interface within a configuration specifies its own class information and the various interfaces operate independently.</span></span><br /><span data-ttu-id="5cfd3-262">Se este campo estiver definido para um valor entre 1 e 0xFE, o dispositivo suporta diferentes especificações de classe em diferentes interfaces e as interfaces podem não funcionar de forma independente.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-262">If this field is set to a value between 1 and 0xFE, the device supports different class specifications on different interfaces and the interfaces may not operate independently.</span></span> <span data-ttu-id="5cfd3-263">Este valor identifica a definição de classe utilizada para as interfaces agregadas.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-263">This value identifies the class definition used for the aggregate interfaces.</span></span><br /><span data-ttu-id="5cfd3-264">Se este campo estiver definido para 0xFF, a classe do dispositivo é específica do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-264">If this field is set to 0xFF, the device class is vendor specific.</span></span> |
| <span data-ttu-id="5cfd3-265">5</span><span class="sxs-lookup"><span data-stu-id="5cfd3-265">5</span></span>      | <span data-ttu-id="5cfd3-266">bDeviceSubClass</span><span class="sxs-lookup"><span data-stu-id="5cfd3-266">bDeviceSubClass</span></span>    | <span data-ttu-id="5cfd3-267">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-267">1</span></span>    | <span data-ttu-id="5cfd3-268">Subclasse</span><span class="sxs-lookup"><span data-stu-id="5cfd3-268">SubClass</span></span> | <span data-ttu-id="5cfd3-269">Código de subclasse (atribuído por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-269">Subclass code (assigned by USB-IF).</span></span><br /><span data-ttu-id="5cfd3-270">Estes códigos são qualificados pelo valor do campo bDeviceClass.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-270">These codes are qualified by the value of the bDeviceClass field.</span></span> <span data-ttu-id="5cfd3-271">Se o campo bDeviceClass for reiniciado para 0, este campo também deve ser reposto para 0.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-271">If the bDeviceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="5cfd3-272">Se o campo bDeviceClass não estiver definido para 0xFF, todos os valores são reservados para atribuição por USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-272">If the bDeviceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="5cfd3-273">6</span><span class="sxs-lookup"><span data-stu-id="5cfd3-273">6</span></span>      | <span data-ttu-id="5cfd3-274">bDeviceProtocol</span><span class="sxs-lookup"><span data-stu-id="5cfd3-274">bDeviceProtocol</span></span>    | <span data-ttu-id="5cfd3-275">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-275">1</span></span>    | <span data-ttu-id="5cfd3-276">Protocolo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-276">Protocol</span></span> | <span data-ttu-id="5cfd3-277">Código de protocolo (atribuído por USB-IF).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-277">Protocol code (assigned by USB-IF).</span></span><br /><span data-ttu-id="5cfd3-278">Estes códigos são qualificados pelo valor dos campos bDeviceClass e bDeviceSubClass.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-278">These codes are qualified by the value of the bDeviceClass and the bDeviceSubClass fields.</span></span> <span data-ttu-id="5cfd3-279">Se um dispositivo suporta protocolos específicos de classe numa base de dispositivo em oposição a uma base de interface, este código identifica os protocolos que o dispositivo utiliza conforme definido pela especificação da classe do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-279">If a device supports class-specific protocols on a device basis as opposed to an interface basis, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span> <span data-ttu-id="5cfd3-280">Se este campo for reiniciado para 0, o dispositivo não utiliza protocolos específicos de classe numa base de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-280">If this field is reset to 0, the device does not use class specific protocols on a device basis.</span></span><br /><span data-ttu-id="5cfd3-281">No entanto, pode utilizar protocolos específicos de classe numa base de interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-281">However, it may use class specific protocols on an interface basis.</span></span><br /><span data-ttu-id="5cfd3-282">Se este campo estiver definido para 0xFF, o dispositivo utiliza um protocolo específico do fornecedor numa base de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-282">If this field is set to 0xFF, the device uses a vendor specific protocol on a device basis.</span></span> |
| <span data-ttu-id="5cfd3-283">7</span><span class="sxs-lookup"><span data-stu-id="5cfd3-283">7</span></span>      | <span data-ttu-id="5cfd3-284">bMaxPacketSize0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-284">bMaxPacketSize0</span></span>    | <span data-ttu-id="5cfd3-285">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-285">1</span></span>    | <span data-ttu-id="5cfd3-286">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-286">Number</span></span>   | <span data-ttu-id="5cfd3-287">Tamanho máximo do pacote para ponto final zero (apenas os tamanhos byte de 8, 16, 32 ou 64 são válidos)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-287">Maximum packet size for endpoint zero (only byte sizes of 8, 16, 32, or 64 are valid)</span></span> |
| <span data-ttu-id="5cfd3-288">8</span><span class="sxs-lookup"><span data-stu-id="5cfd3-288">8</span></span>      | <span data-ttu-id="5cfd3-289">idVendor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-289">idVendor</span></span>           | <span data-ttu-id="5cfd3-290">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-290">2</span></span>    | <span data-ttu-id="5cfd3-291">ID</span><span class="sxs-lookup"><span data-stu-id="5cfd3-291">ID</span></span>       | <span data-ttu-id="5cfd3-292">ID do fornecedor (atribuído por USB-IF)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-292">Vendor ID (assigned by USB-IF)</span></span> |
| <span data-ttu-id="5cfd3-293">10</span><span class="sxs-lookup"><span data-stu-id="5cfd3-293">10</span></span>     | <span data-ttu-id="5cfd3-294">idPro</span><span class="sxs-lookup"><span data-stu-id="5cfd3-294">idProduct</span></span>          | <span data-ttu-id="5cfd3-295">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-295">2</span></span>    | <span data-ttu-id="5cfd3-296">ID</span><span class="sxs-lookup"><span data-stu-id="5cfd3-296">ID</span></span>       | <span data-ttu-id="5cfd3-297">ID do produto (atribuído pelo Fabricante)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-297">Product ID (assigned by the Manufacturer)</span></span> |
| <span data-ttu-id="5cfd3-298">12</span><span class="sxs-lookup"><span data-stu-id="5cfd3-298">12</span></span>     | <span data-ttu-id="5cfd3-299">bcdDevice</span><span class="sxs-lookup"><span data-stu-id="5cfd3-299">bcdDevice</span></span>          | <span data-ttu-id="5cfd3-300">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-300">2</span></span>    | <span data-ttu-id="5cfd3-301">BCD</span><span class="sxs-lookup"><span data-stu-id="5cfd3-301">BCD</span></span>      | <span data-ttu-id="5cfd3-302">Número de libertação do dispositivo em decimal codificado binário</span><span class="sxs-lookup"><span data-stu-id="5cfd3-302">Device release number in binary-coded decimal</span></span> |
| <span data-ttu-id="5cfd3-303">14</span><span class="sxs-lookup"><span data-stu-id="5cfd3-303">14</span></span>     | <span data-ttu-id="5cfd3-304">iManufacturer</span><span class="sxs-lookup"><span data-stu-id="5cfd3-304">iManufacturer</span></span>      | <span data-ttu-id="5cfd3-305">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-305">1</span></span>    | <span data-ttu-id="5cfd3-306">Índice</span><span class="sxs-lookup"><span data-stu-id="5cfd3-306">Index</span></span>    | <span data-ttu-id="5cfd3-307">Índice do descritor de cordas que descreve o fabricante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-307">Index of string descriptor describing manufacturer</span></span> |
| <span data-ttu-id="5cfd3-308">15</span><span class="sxs-lookup"><span data-stu-id="5cfd3-308">15</span></span>     | <span data-ttu-id="5cfd3-309">iProduto</span><span class="sxs-lookup"><span data-stu-id="5cfd3-309">iProduct</span></span>           | <span data-ttu-id="5cfd3-310">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-310">1</span></span>    | <span data-ttu-id="5cfd3-311">Índice</span><span class="sxs-lookup"><span data-stu-id="5cfd3-311">Index</span></span>    | <span data-ttu-id="5cfd3-312">Índice do descritor de cordas que descreve o produto</span><span class="sxs-lookup"><span data-stu-id="5cfd3-312">Index of string descriptor describing product</span></span> |
| <span data-ttu-id="5cfd3-313">16</span><span class="sxs-lookup"><span data-stu-id="5cfd3-313">16</span></span>     | <span data-ttu-id="5cfd3-314">iSerialNumbe</span><span class="sxs-lookup"><span data-stu-id="5cfd3-314">iSerialNumbe</span></span>       | <span data-ttu-id="5cfd3-315">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-315">1</span></span>    | <span data-ttu-id="5cfd3-316">Índice</span><span class="sxs-lookup"><span data-stu-id="5cfd3-316">Index</span></span>    | <span data-ttu-id="5cfd3-317">Índice do descritor de cordas descrevendo o número de série do dispositivo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-317">Index of string descriptor describing the device's serial number</span></span> |
| <span data-ttu-id="5cfd3-318">17</span><span class="sxs-lookup"><span data-stu-id="5cfd3-318">17</span></span>     | <span data-ttu-id="5cfd3-319">bNumConfigurations</span><span class="sxs-lookup"><span data-stu-id="5cfd3-319">bNumConfigurations</span></span> | <span data-ttu-id="5cfd3-320">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-320">1</span></span>    | <span data-ttu-id="5cfd3-321">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-321">Number</span></span>   | <span data-ttu-id="5cfd3-322">Número de configurações possíveis</span><span class="sxs-lookup"><span data-stu-id="5cfd3-322">Number of possible configurations</span></span> |

<span data-ttu-id="5cfd3-323">USBX define um descritor de dispositivos USB da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-323">USBX defines a USB device descriptor as follows:</span></span>

```c
typedef struct UX_DEVICE_DESCRIPTOR_STRUCT
{
    UINT      bLength;
    UINT      bDescriptorType;
    USHORT    bcdUSB;
    UINT      bDeviceClass;
    UINT      bDeviceSubClass;
    UINT      bDeviceProtocol;
    UINT      bMaxPacketSize0;
    USHORT    idVendor;
    USHORT    idProduct;
    USHORT    bcdDevice;
    UINT      iManufacturer;
    UINT      iProduct;
    UINT      iSerialNumber;
    UINT      bNumConfigurations;
} UX_DEVICE_DESCRIPTOR;
```

<span data-ttu-id="5cfd3-324">O descritor do dispositivo USB faz parte de um recipiente de dispositivo descrito como:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-324">The USB device descriptor is part of a device container described as:</span></span>

```c
typedef struct UX_DEVICE_STRUCT
{
    ULONG ux_device_handle;
    ULONG ux_device_type;
    ULONG ux_device_state;
    ULONG ux_device_address;
    ULONG ux_device_speed;
    ULONG ux_device_port_location;
    ULONG ux_device_max_power;
    ULONG ux_device_power_source;
    UINT ux_device_current_configuration;

    TX_SEMAPHORE ux_device_protection_semaphore;
    struct UX_DEVICE_STRUCT *ux_device_parent; 
    struct UX_HOST_CLASS_STRUCT *ux_device_class; 
    VOID *ux_device_class_instance;
    struct UX_HCD_STRUCT *ux_device_hcd;
    struct UX_CONFIGURATION_STRUCT *ux_device_first_configuration; 
    struct UX_DEVICE_STRUCT *ux_device_next_device;
    struct UX_DEVICE_DESCRIPTOR_STRUCT ux_device_descriptor;
    struct UX_ENDPOINT_STRUCT ux_device_control_endpoint;
    struct UX_HUB_TT_STRUCT ux_device_hub_tt[UX_MAX_TT];
} UX_DEVICE;
```

- <span data-ttu-id="5cfd3-325">**ux_device_handle:** Manuseie o aparelho.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-325">**ux_device_handle**: Handle of the device.</span></span> <span data-ttu-id="5cfd3-326">Este é tipicamente o endereço da instância desta estrutura para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-326">This is typically the address of the instance of this structure for the device.</span></span>
- <span data-ttu-id="5cfd3-327">**ux_device_type:** Valor obsoleto.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-327">**ux_device_type**: Obsolete value.</span></span> <span data-ttu-id="5cfd3-328">Não é bem-de-suso.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-328">Unused.</span></span>
- <span data-ttu-id="5cfd3-329">**ux_device_state**: Estado do Dispositivo, que pode ter um dos seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-329">**ux_device_state**: Device State, which can have one of the following values:</span></span>
    - <span data-ttu-id="5cfd3-330">**UX_DEVICE_RESET**                0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-330">**UX_DEVICE_RESET**                0</span></span>
    - <span data-ttu-id="5cfd3-331">**UX_DEVICE_ATTACHED**             1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-331">**UX_DEVICE_ATTACHED**             1</span></span>
    - <span data-ttu-id="5cfd3-332">**UX_DEVICE_ADDRESSED**            2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-332">**UX_DEVICE_ADDRESSED**            2</span></span>
    - <span data-ttu-id="5cfd3-333">**UX_DEVICE_CONFIGURED**           3</span><span class="sxs-lookup"><span data-stu-id="5cfd3-333">**UX_DEVICE_CONFIGURED**           3</span></span>
    - <span data-ttu-id="5cfd3-334">**UX_DEVICE_SUSPENDED**            4</span><span class="sxs-lookup"><span data-stu-id="5cfd3-334">**UX_DEVICE_SUSPENDED**            4</span></span>
    - <span data-ttu-id="5cfd3-335">**UX_DEVICE_RESUMED**              5</span><span class="sxs-lookup"><span data-stu-id="5cfd3-335">**UX_DEVICE_RESUMED**              5</span></span>
    - <span data-ttu-id="5cfd3-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span><span class="sxs-lookup"><span data-stu-id="5cfd3-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span></span>
    - <span data-ttu-id="5cfd3-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span><span class="sxs-lookup"><span data-stu-id="5cfd3-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span></span>
    - <span data-ttu-id="5cfd3-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span><span class="sxs-lookup"><span data-stu-id="5cfd3-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span></span>
    - <span data-ttu-id="5cfd3-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span><span class="sxs-lookup"><span data-stu-id="5cfd3-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span></span>
    - <span data-ttu-id="5cfd3-340">**UX_DEVICE_REMOVED**              10</span><span class="sxs-lookup"><span data-stu-id="5cfd3-340">**UX_DEVICE_REMOVED**              10</span></span>
    - <span data-ttu-id="5cfd3-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span><span class="sxs-lookup"><span data-stu-id="5cfd3-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span></span>
- <span data-ttu-id="5cfd3-342">**ux_device_address**: Endereço do dispositivo após a aceitação do comando **SET_ADDRESS** (de 1 a 127).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-342">**ux_device_address**: Address of the device after the **SET_ADDRESS** command has been accepted (from 1 to 127).</span></span>
- <span data-ttu-id="5cfd3-343">**ux_device_speed**: Velocidade do dispositivo:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-343">**ux_device_speed**: Speed of the device:</span></span>
    - <span data-ttu-id="5cfd3-344">**UX_LOW_SPEED_DEVICE**      0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-344">**UX_LOW_SPEED_DEVICE**      0</span></span>
    - <span data-ttu-id="5cfd3-345">**UX_FULL_SPEED_DEVICE**     1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-345">**UX_FULL_SPEED_DEVICE**     1</span></span>
    - <span data-ttu-id="5cfd3-346">**UX_HIGH_SPEED_DEVICE**     2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-346">**UX_HIGH_SPEED_DEVICE**     2</span></span>
- <span data-ttu-id="5cfd3-347">**ux_device_port_location**: Índice da porta do dispositivo-mãe (eixo de raiz ou hub).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-347">**ux_device_port_location**: Index of the port of the parent device (root hub or hub).</span></span>
- <span data-ttu-id="5cfd3-348">**ux_device_max_power**: Potência máxima em mA que o dispositivo pode ter na configuração selecionada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-348">**ux_device_max_power**: Maximum power in mA that the device may take in the selected configuration.</span></span>
- <span data-ttu-id="5cfd3-349">**ux_device_power_source**: Pode ser um dos dois valores seguintes:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-349">**ux_device_power_source**: Can be one of the two following values:</span></span>
    - <span data-ttu-id="5cfd3-350">**UX_DEVICE_BUS_POWERED**     1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-350">**UX_DEVICE_BUS_POWERED**     1</span></span>
    - <span data-ttu-id="5cfd3-351">**UX_DEVICE_SELF_POWERED**    2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-351">**UX_DEVICE_SELF_POWERED**    2</span></span>
- <span data-ttu-id="5cfd3-352">**ux_device_current_configuration**: Índice da configuração atual utilizada por este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-352">**ux_device_current_configuration**: Index of the current configuration being used by this device.</span></span>
- <span data-ttu-id="5cfd3-353">**ux_device_parent**: Ponteiro do recipiente do dispositivo do progenitor deste dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-353">**ux_device_parent**: Device container pointer of the parent of this device.</span></span> <span data-ttu-id="5cfd3-354">Se o ponteiro for nulo, o progenitor é o eixo principal do controlador.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-354">If the pointer is null, the parent is the root hub of the controller.</span></span>
- <span data-ttu-id="5cfd3-355">**ux_device_class**: Ponter para o tipo de classe que possui este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-355">**ux_device_class**: Pointer to the class type that owns this device.</span></span>
- <span data-ttu-id="5cfd3-356">**ux_device_class_instance**: Ponte para o caso da classe proprietária deste dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-356">**ux_device_class_instance**: Pointer to the instance of the class that owns this device.</span></span>
- <span data-ttu-id="5cfd3-357">**ux_device_hcd**: Instância do controlador de anfitrião USB onde este dispositivo está ligado.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-357">**ux_device_hcd**: USB Host Controller Instance where this device is attached.</span></span>
- <span data-ttu-id="5cfd3-358">**ux_device_first_configuration**: Ponteiro para o primeiro recipiente de configuração deste dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-358">**ux_device_first_configuration**: Pointer to the first configuration container for this device.</span></span>
- <span data-ttu-id="5cfd3-359">**ux_device_next_device**: Pontear para o próximo dispositivo na lista de dispositivos em qualquer um dos autocarros detetados por USBX.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-359">**ux_device_next_device**: Pointer to the next device in the list of device on any of the buses detected by USBX.</span></span>
- <span data-ttu-id="5cfd3-360">**ux_device_descriptor**: descritor de dispositivos USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-360">**ux_device_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="5cfd3-361">**ux_device_control_endpoint**: Descritor do ponto final de controlo predefinido utilizado por este dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-361">**ux_device_control_endpoint**: Descriptor of the default control endpoint used by this device.</span></span>
- <span data-ttu-id="5cfd3-362">**ux_device_hub_tt**: Matriz de TTs hub para o dispositivo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-362">**ux_device_hub_tt**: Array of Hub TTs for the device</span></span>

### <a name="configuration-descriptors"></a><span data-ttu-id="5cfd3-363">Descritores de configuração</span><span class="sxs-lookup"><span data-stu-id="5cfd3-363">Configuration Descriptors</span></span>

<span data-ttu-id="5cfd3-364">O descritor de configuração descreve informações sobre uma configuração específica do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-364">The configuration descriptor describes information about a specific device configuration.</span></span> <span data-ttu-id="5cfd3-365">Um dispositivo USB pode conter um ou mais descritores de configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-365">A USB device may contain one or more configuration descriptors.</span></span> <span data-ttu-id="5cfd3-366">O campo **bNumConfigurations** no descritor do dispositivo indica o número de descritores de configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-366">The **bNumConfigurations** field in the device descriptor indicates the number of configuration descriptors.</span></span> <span data-ttu-id="5cfd3-367">O descritor contém um campo **bConfigurationValue** com um valor que, quando utilizado como parâmetro para o pedido de Configuração de Conjunto, faz com que o dispositivo assuma a configuração descrita.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-367">The descriptor contains a **bConfigurationValue** field with a value that, when used as a parameter to the Set Configuration request, causes the device to assume the described configuration.</span></span>

<span data-ttu-id="5cfd3-368">O descritor descreve o número de interfaces fornecidas pela configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-368">The descriptor describes the number of interfaces provided by the configuration.</span></span> <span data-ttu-id="5cfd3-369">Cada interface representa uma função lógica dentro do dispositivo e pode funcionar de forma independente.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-369">Each interface represents a logical function within the device and may operate independently.</span></span> <span data-ttu-id="5cfd3-370">Por exemplo, um altifalante de áudio USB pode ter três interfaces, uma para streaming de áudio, uma para controlo de áudio e uma interface HID para gerir os botões do altifalante.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-370">For instance a USB audio speaker may have three interfaces, one for audio streaming, one for audio control, and one HID interface to manage the speaker's buttons.</span></span>

<span data-ttu-id="5cfd3-371">Quando o anfitrião emite um pedido GET_DESCRIPTOR para o descritor de configuração, todos os descritores de interface e ponto final relacionados são devolvidos.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-371">When the host issues a GET_DESCRIPTOR request for the configuration descriptor, all related interface and endpoint descriptors are returned.</span></span>

| <span data-ttu-id="5cfd3-372">Desvio</span><span class="sxs-lookup"><span data-stu-id="5cfd3-372">Offset</span></span> | <span data-ttu-id="5cfd3-373">Campo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-373">Field</span></span>               | <span data-ttu-id="5cfd3-374">Tamanho</span><span class="sxs-lookup"><span data-stu-id="5cfd3-374">Size</span></span> | <span data-ttu-id="5cfd3-375">Valor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-375">Value</span></span>    | <span data-ttu-id="5cfd3-376">Descrição</span><span class="sxs-lookup"><span data-stu-id="5cfd3-376">Description</span></span>                       |
| ------ | ------------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="5cfd3-377">0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-377">0</span></span>      | <span data-ttu-id="5cfd3-378">bLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-378">bLength</span></span>             | <span data-ttu-id="5cfd3-379">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-379">1</span></span>    | <span data-ttu-id="5cfd3-380">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-380">Number</span></span>   | <span data-ttu-id="5cfd3-381">Tamanho deste descritor em bytes.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-381">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="5cfd3-382">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-382">1</span></span>      | <span data-ttu-id="5cfd3-383">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="5cfd3-383">bDescriptorType</span></span>     | <span data-ttu-id="5cfd3-384">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-384">1</span></span>    | <span data-ttu-id="5cfd3-385">Constante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-385">Constant</span></span> | <span data-ttu-id="5cfd3-386">CONFIGURAÇÃO</span><span class="sxs-lookup"><span data-stu-id="5cfd3-386">CONFIGURATION</span></span>                     |
| <span data-ttu-id="5cfd3-387">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-387">2</span></span>      | <span data-ttu-id="5cfd3-388">wTotalLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-388">wTotalLength</span></span>        | <span data-ttu-id="5cfd3-389">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-389">2</span></span>    | <span data-ttu-id="5cfd3-390">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-390">Number</span></span>   | <span data-ttu-id="5cfd3-391">Comprimento total dos dados devolvidos para esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-391">Total length of data returned for this configuration.</span></span> <span data-ttu-id="5cfd3-392">Inclui o comprimento combinado de todos os descritores (configuração, interface, ponto final e classe ou fornecedor específico) devolvidos para esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-392">Includes the combined length of all descriptors (configuration, interface, endpoint, and class or vendor specific) returned for this configuration.</span></span> |
| <span data-ttu-id="5cfd3-393">4</span><span class="sxs-lookup"><span data-stu-id="5cfd3-393">4</span></span>      | <span data-ttu-id="5cfd3-394">bNumInterfaces</span><span class="sxs-lookup"><span data-stu-id="5cfd3-394">bNumInterfaces</span></span>      | <span data-ttu-id="5cfd3-395">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-395">1</span></span>    | <span data-ttu-id="5cfd3-396">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-396">Number</span></span>   | <span data-ttu-id="5cfd3-397">Número de interfaces suportadas por esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-397">Number of interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="5cfd3-398">5</span><span class="sxs-lookup"><span data-stu-id="5cfd3-398">5</span></span>      | <span data-ttu-id="5cfd3-399">bConfigurationValue</span><span class="sxs-lookup"><span data-stu-id="5cfd3-399">bConfigurationValue</span></span> | <span data-ttu-id="5cfd3-400">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-400">1</span></span>    | <span data-ttu-id="5cfd3-401">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-401">Number</span></span>   | <span data-ttu-id="5cfd3-402">Valor a usar como argumento para definir</span><span class="sxs-lookup"><span data-stu-id="5cfd3-402">Value to use as an argument to Set</span></span><br/><span data-ttu-id="5cfd3-403">Configuração para selecionar esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-403">Configuration to select this configuration.</span></span> |
| <span data-ttu-id="5cfd3-404">6</span><span class="sxs-lookup"><span data-stu-id="5cfd3-404">6</span></span>      | <span data-ttu-id="5cfd3-405">iConfiguration</span><span class="sxs-lookup"><span data-stu-id="5cfd3-405">iConfiguration</span></span>      | <span data-ttu-id="5cfd3-406">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-406">1</span></span>    | <span data-ttu-id="5cfd3-407">Índice</span><span class="sxs-lookup"><span data-stu-id="5cfd3-407">Index</span></span>    | <span data-ttu-id="5cfd3-408">Índice de descritor de cordas descrevendo esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-408">Index of string descriptor describing this configuration.</span></span> |
| <span data-ttu-id="5cfd3-409">7</span><span class="sxs-lookup"><span data-stu-id="5cfd3-409">7</span></span>      | <span data-ttu-id="5cfd3-410">bMAttributes</span><span class="sxs-lookup"><span data-stu-id="5cfd3-410">bMAttributes</span></span>        | <span data-ttu-id="5cfd3-411">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-411">1</span></span>    | <span data-ttu-id="5cfd3-412">Bitmap</span><span class="sxs-lookup"><span data-stu-id="5cfd3-412">Bitmap</span></span>   | <span data-ttu-id="5cfd3-413">Características de configuração D7 Bus Powered</span><span class="sxs-lookup"><span data-stu-id="5cfd3-413">Configuration characteristics D7 Bus Powered</span></span><br /><span data-ttu-id="5cfd3-414">D6 Autoalimentado</span><span class="sxs-lookup"><span data-stu-id="5cfd3-414">D6 Self Powered</span></span><br /><span data-ttu-id="5cfd3-415">Despertar Remoto D5</span><span class="sxs-lookup"><span data-stu-id="5cfd3-415">D5 Remote Wakeup</span></span><br /><span data-ttu-id="5cfd3-416">D4. 0 Reservado (reset a 0)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-416">D4..0 Reserved (reset to 0)</span></span><br /><span data-ttu-id="5cfd3-417">Uma configuração do dispositivo que utiliza energia do autocarro e uma fonte local define tanto D7 como D6.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-417">A device configuration that uses power from the bus and a local source sets both D7 and D6.</span></span> <span data-ttu-id="5cfd3-418">A fonte de energia real no tempo de execução pode ser determinada usando o pedido do dispositivo Get Status.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-418">The actual power source at runtime may be determined using the Get Status device request.</span></span><br /><span data-ttu-id="5cfd3-419">Se uma configuração do dispositivo suportar o despertar remoto, o D5 está definido para 1.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-419">If a device configuration supports remote wakeup, D5 is set to 1.</span></span> |
| <span data-ttu-id="5cfd3-420">8</span><span class="sxs-lookup"><span data-stu-id="5cfd3-420">8</span></span>      | <span data-ttu-id="5cfd3-421">MaxPower</span><span class="sxs-lookup"><span data-stu-id="5cfd3-421">MaxPower</span></span>            | <span data-ttu-id="5cfd3-422">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-422">1</span></span>    | <span data-ttu-id="5cfd3-423">mA</span><span class="sxs-lookup"><span data-stu-id="5cfd3-423">mA</span></span>       | <span data-ttu-id="5cfd3-424">Consumo máximo de energia do dispositivo USB a partir do autocarro nesta configuração específica quando o dispositivo estiver totalmente operacional.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-424">Maximum power consumption of USB device from the bus in this specific configuration when the device is fully operational.</span></span><br /><span data-ttu-id="5cfd3-425">Expresso em 2 unidades mA (por exemplo, 50 = 100 mA).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-425">Expressed in 2 mA units (e.g., 50 = 100 mA).</span></span><br /><span data-ttu-id="5cfd3-426">Nota: Uma configuração do dispositivo informa se a configuração é alimentada por autocarro ou autoalimentada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-426">Note: A device configuration reports whether the configuration is bus-powered or self-powered.</span></span><br /><span data-ttu-id="5cfd3-427">O estado do dispositivo informa se o dispositivo está atualmente autoalimentado.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-427">Device status reports whether the device is currently self-powered.</span></span> <span data-ttu-id="5cfd3-428">Se um dispositivo for desligado da sua fonte de alimentação externa, atualiza o estado do dispositivo para indicar que já não é alimentado por si próprio.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-428">If a device is disconnected from its external power source, it updates device status to indicate that it is no longer self-powered.</span></span> |

<span data-ttu-id="5cfd3-429">USBX define um descritor de configuração USB da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-429">USBX defines a USB configuration descriptor as follows.</span></span>

```c
typedef struct UX_CONFIGURATION_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT wTotalLength;
    UINT bNumInterfaces;
    UINT bConfigurationValue;
    UINT iConfiguration;
    UINT bmAttributes;
    UINT MaxPower;
} UX_CONFIGURATION_DESCRIPTOR;
```

<span data-ttu-id="5cfd3-430">O descritor de configuração USB faz parte de um recipiente de configuração descrito como mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-430">The USB configuration descriptor is part of a configuration container described as shown below.</span></span>

```c
typedef struct UX_CONFIGURATION_STRUCT
{
    ULONG ux_configuration_handle;
    ULONG ux_configuration_state;
    struct UX_CONFIGURATION_DESCRIPTOR_STRUCT ux_configuration_descriptor;
    struct UX_INTERFACE_STRUCT *ux_configuration_first_interface;
    struct UX_CONFIGURATION_STRUCT *ux_configuration_next_configuration;
    struct UX_DEVICE_STRUCT *ux_configuration_device;
} UX_CONFIGURATION;
```

- <span data-ttu-id="5cfd3-431">**ux_configuration_handle**: Manuseie a configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-431">**ux_configuration_handle**: Handle of the configuration.</span></span> <span data-ttu-id="5cfd3-432">Este é tipicamente o endereço da instância desta estrutura para a configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-432">This is typically the address of the instance of this structure for the configuration.</span></span>
- <span data-ttu-id="5cfd3-433">**ux_configuration_state**: Estado da configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-433">**ux_configuration_state**: State of the configuration.</span></span>
- <span data-ttu-id="5cfd3-434">**ux_configuration_descriptor**: descritor de dispositivos USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-434">**ux_configuration_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="5cfd3-435">**ux_configuration_first_interface**: Ponteiro para a primeira interface para esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-435">**ux_configuration_first_interface**: Pointer to the first interface for this configuration.</span></span>
- <span data-ttu-id="5cfd3-436">**ux_configuration_next_configuration**: Ponteiro para a próxima configuração para o mesmo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-436">**ux_configuration_next_configuration**: Pointer to the next configuration for the same device.</span></span>
- <span data-ttu-id="5cfd3-437">**ux_configuration_device**: Pontear para o proprietário do dispositivo desta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-437">**ux_configuration_device**: Pointer to the device owner of this configuration.</span></span>

### <a name="interface-descriptors"></a><span data-ttu-id="5cfd3-438">Descritores de interface</span><span class="sxs-lookup"><span data-stu-id="5cfd3-438">Interface Descriptors</span></span>

<span data-ttu-id="5cfd3-439">O descritor de interface descreve uma interface específica dentro de uma configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-439">The interface descriptor describes a specific interface within a configuration.</span></span> <span data-ttu-id="5cfd3-440">Uma interface é uma função lógica dentro de um dispositivo USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-440">An interface is a logical function within a USB device.</span></span> <span data-ttu-id="5cfd3-441">Uma configuração fornece uma ou mais interfaces, cada uma com descritores de ponto final zero ou mais descrevendo um conjunto único de pontos finais dentro da configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-441">A configuration provides one or more interfaces, each with zero or more endpoint descriptors describing a unique set of endpoints within the configuration.</span></span> <span data-ttu-id="5cfd3-442">Quando uma configuração suporta mais de uma interface, os descritores de ponto final de uma determinada interface seguem o descritor de interface nos dados devolvidos pelo **GET_DESCRIPTOR** pedido para a configuração especificada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-442">When a configuration supports more than one interface, the endpoint descriptors for a particular interface follow the interface descriptor in the data returned by the **GET_DESCRIPTOR** request for the specified configuration.</span></span>

<span data-ttu-id="5cfd3-443">Um descritor de interface é sempre devolvido como parte de um descritor de configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-443">An interface descriptor is always returned as part of a configuration descriptor.</span></span> <span data-ttu-id="5cfd3-444">Um descritor de interface não pode ser diretamente acedededor por um pedido GET_DESCRIPTOR.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-444">An interface descriptor cannot be directly access by a GET_DESCRIPTOR request.</span></span>

<span data-ttu-id="5cfd3-445">Uma interface pode incluir configurações alternativas que permitam que os pontos finais e/ou as suas características sejam variados após a configuração do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-445">An interface may include alternate settings that allow the endpoints and/or their characteristics to be varied after the device has been configured.</span></span> <span data-ttu-id="5cfd3-446">A definição predefinição de uma interface é sempre a definição alternativa zero.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-446">The default setting for an interface is always alternate setting zero.</span></span> <span data-ttu-id="5cfd3-447">Uma classe pode selecionar para alterar a definição alternativa atual para alterar o comportamento da interface e as características dos pontos finais associados.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-447">A class can select to change the current alternate setting to change the interface behavior and the characteristics of the associated endpoints.</span></span> <span data-ttu-id="5cfd3-448">O pedido de SET_INTERFACE é utilizado para selecionar uma definição alternativa ou para voltar à definição predefinitiva.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-448">The SET_INTERFACE request is used to select an alternate setting or to return to the default setting.</span></span>

<span data-ttu-id="5cfd3-449">As definições alternativas permitem que uma parte da configuração do dispositivo seja variada enquanto outras interfaces permanecem em funcionamento.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-449">Alternate settings allow a portion of the device configuration to be varied while other interfaces remain in operation.</span></span> <span data-ttu-id="5cfd3-450">Se uma configuração tiver configurações alternativas para uma ou mais das suas interfaces, um descritor de interface separado e os seus pontos finais associados estão incluídos para cada definição.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-450">If a configuration has alternate settings for one or more of its interfaces, a separate interface descriptor and its associated endpoints are included for each setting.</span></span>

<span data-ttu-id="5cfd3-451">Se uma configuração do dispositivo contiver uma única interface com duas definições alternativas, o pedido de GET_DESCRIPTOR para a configuração devolveria o descritor de configuração, então o descritor de interface com os campos **bInterfaceNumber** e **bAlternateSetting** definidos para zero e, em seguida, os descritores de ponto final para essa definição, seguido de outro descritor de interface e seus descritores de ponto final associados.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-451">If a device configuration contains a single interface with two alternate settings, the GET_DESCRIPTOR request for the configuration would return the configuration descriptor, then the interface descriptor with the **bInterfaceNumber** and **bAlternateSetting** fields set to zero and then the endpoint descriptors for that setting, followed by another interface descriptor and its associated endpoint descriptors.</span></span> <span data-ttu-id="5cfd3-452">O segundo campo **bInterfaceNumber** do descritor de segunda interface também seria definido para zero, mas o campo **bAlternateSetting** do descritor de segunda interface seria definido para 1 indicando que esta definição alternativa pertence à primeira interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-452">The second interface descriptor's **bInterfaceNumber** field would also be set to zero, but the **bAlternateSetting** field of the second interface descriptor would be set to 1 indicating that this alternate setting belongs to the first interface.</span></span>

<span data-ttu-id="5cfd3-453">Uma interface pode não ter quaisquer pontos finais associados à mesma, caso em que apenas o ponto final de controlo predefinido é válido para essa interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-453">An interface may not have any endpoints associated with it, in which case only the default control endpoint is valid for that interface.</span></span>

<span data-ttu-id="5cfd3-454">As definições alternativas são utilizadas principalmente para alterar a largura de banda solicitada para pontos finais periódicos associados à interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-454">Alternate settings are used mainly to change the requested bandwidth for periodic endpoints associated with the interface.</span></span> <span data-ttu-id="5cfd3-455">Por exemplo, uma interface de streaming de altifalantes USB deve ter a primeira definição alternativa com uma procura de largura de banda de 0 no seu ponto final isocronous.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-455">For example, a USB speaker streaming interface should have the first alternate setting with a 0 bandwidth demand on its isochronous endpoint.</span></span> <span data-ttu-id="5cfd3-456">Outras definições alternativas podem selecionar diferentes requisitos de largura de banda dependendo da frequência de streaming de áudio.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-456">Other alternate settings may select different bandwidth requirements depending on the audio streaming frequency.</span></span>

<span data-ttu-id="5cfd3-457">O descritor USB para a interface é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-457">The USB descriptor for the interface is as follows:</span></span>

| <span data-ttu-id="5cfd3-458">Desvio</span><span class="sxs-lookup"><span data-stu-id="5cfd3-458">Offset</span></span> | <span data-ttu-id="5cfd3-459">Campo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-459">Field</span></span>              | <span data-ttu-id="5cfd3-460">Tamanho</span><span class="sxs-lookup"><span data-stu-id="5cfd3-460">Size</span></span> | <span data-ttu-id="5cfd3-461">Valor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-461">Value</span></span>     | <span data-ttu-id="5cfd3-462">Descritor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-462">Descriptor</span></span>                              |
| ------ | ------------------ | ---- | --------- | --------------------------------------- |
| <span data-ttu-id="5cfd3-463">0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-463">0</span></span>      | <span data-ttu-id="5cfd3-464">bLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-464">bLength</span></span>            | <span data-ttu-id="5cfd3-465">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-465">1</span></span>    | <span data-ttu-id="5cfd3-466">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-466">Number</span></span>    | <span data-ttu-id="5cfd3-467">Tamanho deste descritor em bytes.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-467">Size of this descriptor in bytes.</span></span>       |
| <span data-ttu-id="5cfd3-468">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-468">1</span></span>      | <span data-ttu-id="5cfd3-469">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="5cfd3-469">bDescriptorType</span></span>    | <span data-ttu-id="5cfd3-470">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-470">1</span></span>    | <span data-ttu-id="5cfd3-471">Constante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-471">Constant</span></span>  | <span data-ttu-id="5cfd3-472">Tipo de descritor interface</span><span class="sxs-lookup"><span data-stu-id="5cfd3-472">INTERFACE Descriptor Type</span></span>               |
| <span data-ttu-id="5cfd3-473">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-473">2</span></span>      | <span data-ttu-id="5cfd3-474">bInterfaceNumber</span><span class="sxs-lookup"><span data-stu-id="5cfd3-474">bInterfaceNumber</span></span>   | <span data-ttu-id="5cfd3-475">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-475">1</span></span>    | <span data-ttu-id="5cfd3-476">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-476">Number</span></span>    | <span data-ttu-id="5cfd3-477">Número de interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-477">Number of interface.</span></span> <span data-ttu-id="5cfd3-478">Valor baseado em zero identificando o índice na matriz de interfaces simultâneas suportadas por esta configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-478">Zero-based value identifying the index in the array of concurrent interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="5cfd3-479">3</span><span class="sxs-lookup"><span data-stu-id="5cfd3-479">3</span></span>      | <span data-ttu-id="5cfd3-480">bAltenateSetting</span><span class="sxs-lookup"><span data-stu-id="5cfd3-480">bAltenateSetting</span></span>   | <span data-ttu-id="5cfd3-481">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-481">1</span></span>    | <span data-ttu-id="5cfd3-482">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-482">Number</span></span>    | <span data-ttu-id="5cfd3-483">Valor utilizado para selecionar definição alternativa para a interface identificada no campo anterior.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-483">Value used to select alternate setting for the interface identified in the prior field.</span></span> |
| <span data-ttu-id="5cfd3-484">4</span><span class="sxs-lookup"><span data-stu-id="5cfd3-484">4</span></span>      | <span data-ttu-id="5cfd3-485">bNumEndpoints</span><span class="sxs-lookup"><span data-stu-id="5cfd3-485">bNumEndpoints</span></span>      | <span data-ttu-id="5cfd3-486">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-486">1</span></span>    | <span data-ttu-id="5cfd3-487">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-487">Number</span></span>    | <span data-ttu-id="5cfd3-488">Número de pontos finais utilizados por esta interface (excluindo o ponto final zero).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-488">Number of endpoints used by this interface (excluding endpoint zero).</span></span> <span data-ttu-id="5cfd3-489">Se este valor for 0, esta interface utiliza apenas o ponto final zero.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-489">If this value is 0, this interface only uses endpoint zero.</span></span> |
| <span data-ttu-id="5cfd3-490">5</span><span class="sxs-lookup"><span data-stu-id="5cfd3-490">5</span></span>      | <span data-ttu-id="5cfd3-491">bInterfaceClass</span><span class="sxs-lookup"><span data-stu-id="5cfd3-491">bInterfaceClass</span></span>    | <span data-ttu-id="5cfd3-492">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-492">1</span></span>    | <span data-ttu-id="5cfd3-493">Classe</span><span class="sxs-lookup"><span data-stu-id="5cfd3-493">Class</span></span>     | <span data-ttu-id="5cfd3-494">Código de classe (atribuído por USB)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-494">Class code (assigned by USB)</span></span><br /><span data-ttu-id="5cfd3-495">Se este campo for reiniciado para 0, a interface não pertence a nenhuma classe de dispositivos especificados USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-495">If this field is reset to 0, the interface does not belong to any USB specified device class.</span></span><br /><span data-ttu-id="5cfd3-496">Se este campo estiver definido para 0xFF, a classe de interface é específica do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-496">If this field is set to 0xFF, the interface class is vendor specific.</span></span><br /><span data-ttu-id="5cfd3-497">Todos os outros valores são reservados para atribuição por USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-497">All other values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="5cfd3-498">6</span><span class="sxs-lookup"><span data-stu-id="5cfd3-498">6</span></span>      | <span data-ttu-id="5cfd3-499">bInterfaceSubClass</span><span class="sxs-lookup"><span data-stu-id="5cfd3-499">bInterfaceSubClass</span></span> | <span data-ttu-id="5cfd3-500">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-500">1</span></span>    | <span data-ttu-id="5cfd3-501">Subclasse</span><span class="sxs-lookup"><span data-stu-id="5cfd3-501">SubClass</span></span>  | <span data-ttu-id="5cfd3-502">Código de subclasse (atribuído por USB).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-502">Subclass code (assigned by USB).</span></span><br /><span data-ttu-id="5cfd3-503">Estes códigos são qualificados pelo valor do campo bInterfaceClass.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-503">These codes are qualified by the value of the bInterfaceClass field.</span></span> <span data-ttu-id="5cfd3-504">Se o campo bInterfaceClass for reiniciado para 0, este campo também deve ser reposto para 0.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-504">If the bInterfaceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="5cfd3-505">Se o campo bInterfaceClass não estiver definido para 0xFF, todos os valores são reservados para atribuição por USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-505">If the bInterfaceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="5cfd3-506">7</span><span class="sxs-lookup"><span data-stu-id="5cfd3-506">7</span></span>      | <span data-ttu-id="5cfd3-507">bInterfaceProtocol</span><span class="sxs-lookup"><span data-stu-id="5cfd3-507">bInterfaceProtocol</span></span> | <span data-ttu-id="5cfd3-508">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-508">1</span></span>    | <span data-ttu-id="5cfd3-509">Protocolo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-509">Protocol</span></span>  | <span data-ttu-id="5cfd3-510">Código de protocolo (atribuído por USB).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-510">Protocol code (assigned by USB).</span></span> <span data-ttu-id="5cfd3-511">Estes códigos são qualificados pelo valor dos campos bInterfaceClass e bInterfaceSubClass.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-511">These codes are qualified by the value of the bInterfaceClass and the bInterfaceSubClass fields.</span></span> <span data-ttu-id="5cfd3-512">Se uma interface suporta pedidos específicos de classe, este código identifica os protocolos que o dispositivo utiliza conforme definido pela especificação da classe do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-512">If an interface supports class-specific requests, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span><br /><span data-ttu-id="5cfd3-513">Se este campo for reiniciado para 0, o dispositivo não utiliza um protocolo específico de classe nesta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-513">If this field is reset to 0, the device does not use a class specific protocol on this interface.</span></span> <span data-ttu-id="5cfd3-514">Se este campo estiver definido para 0xFF, o dispositivo utiliza um protocolo específico do fornecedor para esta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-514">If this field is set to 0xFF, the device uses a vendor specific protocol for this interface.</span></span> |
| <span data-ttu-id="5cfd3-515">8</span><span class="sxs-lookup"><span data-stu-id="5cfd3-515">8</span></span>      | <span data-ttu-id="5cfd3-516">iInterface</span><span class="sxs-lookup"><span data-stu-id="5cfd3-516">iInterface</span></span>         | <span data-ttu-id="5cfd3-517">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-517">1</span></span>    | <span data-ttu-id="5cfd3-518">Índice</span><span class="sxs-lookup"><span data-stu-id="5cfd3-518">Index</span></span>     | <span data-ttu-id="5cfd3-519">Índice de descritor de cordas descrevendo esta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-519">Index of string descriptor describing this interface.</span></span> |

<span data-ttu-id="5cfd3-520">USBX define um descritor de interface USB da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-520">USBX defines a USB interface descriptor as follows.</span></span>

```c
typedef struct UX_INTERFACE_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bInterfaceNumber;
    UINT bAlternateSetting;
    UINT bNumEndpoints;
    UINT bInterfaceClass
    UINT bInterfaceSubClass;
    UINT bInterfaceProtocol;
    UINT iInterface;
} UX_INTERFACE_DESCRIPTOR;
```

<span data-ttu-id="5cfd3-521">O descritor de interface USB faz parte de um recipiente de interface descrito da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-521">The USB interface descriptor is part of an interface container described as follows.</span></span>

```c
typedef struct UX_INTERFACE_STRUCT
{
    ULONG ux_interface_handle;
    ULONG ux_interface_state;
    ULONG ux_interface_current_alternate_setting;
    struct UX_INTERFACE_DESCRIPTOR_STRUCT ux_interface_descriptor;
    struct UX_HOST_CLASS_STRUCT    *ux_interface_class;
    VOID    *ux_interface_class_instance;
    struct UX_ENDPOINT_STRUCT    *ux_interface_first_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_interface_next_interface;
    struct UX_CONFIGURATION_STRUCT    *ux_interface_configuration;
} UX_INTERFACE;
```

- <span data-ttu-id="5cfd3-522">**ux_interface_handle:** Manuseie a interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-522">**ux_interface_handle**: Handle of the interface.</span></span> <span data-ttu-id="5cfd3-523">Este é tipicamente o endereço da instância desta estrutura para a interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-523">This is typically the address of the instance of this structure for the interface.</span></span>
- <span data-ttu-id="5cfd3-524">**ux_interface_state**: Estado da interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-524">**ux_interface_state**: State of the interface.</span></span>
- <span data-ttu-id="5cfd3-525">**ux_interface_descriptor**: descritor de interface USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-525">**ux_interface_descriptor**: USB interface descriptor.</span></span>
- <span data-ttu-id="5cfd3-526">**ux_interface_class**: Ponter para o tipo de classe que detém esta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-526">**ux_interface_class**: Pointer to the class type that owns this interface.</span></span>
- <span data-ttu-id="5cfd3-527">**ux_interface_class_instance**: Ponteiro para o exemplo da classe que detém esta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-527">**ux_interface_class_instance**: Pointer to the instance of the class that owns this interface.</span></span>
- <span data-ttu-id="5cfd3-528">**ux_interface_first_endpoint**: Ponteiro para o primeiro ponto final registado com esta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-528">**ux_interface_first_endpoint**: Pointer to the first endpoint registered with this interface.</span></span>
- <span data-ttu-id="5cfd3-529">**ux_interface_next_interface**: Ponteiro para a interface seguinte associada à configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-529">**ux_interface_next_interface**: Pointer to the next interface associated with the configuration.</span></span>
- <span data-ttu-id="5cfd3-530">**ux_interface_configuration**: Ponteiro para o proprietário da configuração desta interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-530">**ux_interface_configuration**: Pointer to the configuration owner of this interface.</span></span>

### <a name="endpoint-descriptors"></a><span data-ttu-id="5cfd3-531">Descritores de ponto final</span><span class="sxs-lookup"><span data-stu-id="5cfd3-531">Endpoint Descriptors</span></span>

<span data-ttu-id="5cfd3-532">Cada ponto final associado a uma interface tem o seu próprio descritor de ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-532">Each endpoint associated with an interface has its own endpoint descriptor.</span></span> <span data-ttu-id="5cfd3-533">Este descritor contém as informações necessárias pela pilha de anfitrião para determinar os requisitos de largura de banda de cada ponto final, a carga máxima associada ao ponto final, a sua periodicidade e a sua direção.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-533">This descriptor contains the information required by the host stack to determine the bandwidth requirements of each endpoint, the maximum payload associated with the endpoint, its periodicity, and its direction.</span></span> <span data-ttu-id="5cfd3-534">Um descritor de ponto final é sempre devolvido por um GET_DESCRIPTOR comando para a configuração.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-534">An endpoint descriptor is always returned by a GET_DESCRIPTOR command for the configuration.</span></span>

<span data-ttu-id="5cfd3-535">O ponto final de controlo predefinido associado ao descritor do dispositivo não é contabilizado como parte do ponto final associado à interface e, portanto, não devolvido neste descritor.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-535">The default control endpoint associated with the device descriptor is not counted as part of the endpoint(s) associated with the interface and therefore not returned in this descriptor.</span></span>

<span data-ttu-id="5cfd3-536">Quando o software anfitrião solicita uma alteração da definição alternativa para uma interface, todos os pontos finais associados e os seus recursos USB são modificados de acordo com a nova configuração alternativa.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-536">When the host software requests a change of the alternate setting for an interface, all the associated endpoints and their USB resources are modified according to the new alternate setting.</span></span>

<span data-ttu-id="5cfd3-537">Com exceção dos pontos finais de controlo predefinidos, os pontos finais não podem ser repartições entre interfaces.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-537">Except for the default control endpoints, endpoints cannot be share between interfaces.</span></span>

| <span data-ttu-id="5cfd3-538">Desvio</span><span class="sxs-lookup"><span data-stu-id="5cfd3-538">Offset</span></span> | <span data-ttu-id="5cfd3-539">Campo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-539">Field</span></span>            | <span data-ttu-id="5cfd3-540">Tamanho</span><span class="sxs-lookup"><span data-stu-id="5cfd3-540">Size</span></span> | <span data-ttu-id="5cfd3-541">Valor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-541">Value</span></span>    | <span data-ttu-id="5cfd3-542">Descrição</span><span class="sxs-lookup"><span data-stu-id="5cfd3-542">Description</span></span>                       |
| ------ | ---------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="5cfd3-543">0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-543">0</span></span>      | <span data-ttu-id="5cfd3-544">bLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-544">bLength</span></span>          | <span data-ttu-id="5cfd3-545">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-545">1</span></span>    | <span data-ttu-id="5cfd3-546">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-546">Number</span></span>   | <span data-ttu-id="5cfd3-547">Tamanho deste descritor em bytes.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-547">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="5cfd3-548">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-548">1</span></span>      | <span data-ttu-id="5cfd3-549">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="5cfd3-549">bDescriptorType</span></span>  | <span data-ttu-id="5cfd3-550">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-550">1</span></span>    | <span data-ttu-id="5cfd3-551">Constante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-551">Constant</span></span> | <span data-ttu-id="5cfd3-552">Tipo de descritor ENDPOINT.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-552">ENDPOINT Descriptor Type.</span></span> |
| <span data-ttu-id="5cfd3-553">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-553">2</span></span>      | <span data-ttu-id="5cfd3-554">bEndpointAddress</span><span class="sxs-lookup"><span data-stu-id="5cfd3-554">bEndpointAddress</span></span> | <span data-ttu-id="5cfd3-555">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-555">1</span></span>    | <span data-ttu-id="5cfd3-556">Ponto final</span><span class="sxs-lookup"><span data-stu-id="5cfd3-556">Endpoint</span></span> | <span data-ttu-id="5cfd3-557">O endereço do ponto final no dispositivo USB descrito por este descritor.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-557">The address of the endpoint on the USB device described by this descriptor.</span></span> <span data-ttu-id="5cfd3-558">O endereço está codificado da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-558">The address is encoded as follows:</span></span><br /><span data-ttu-id="5cfd3-559">Bit 3...0: O número do ponto final</span><span class="sxs-lookup"><span data-stu-id="5cfd3-559">Bit 3...0: The endpoint number</span></span><br /><span data-ttu-id="5cfd3-560">Bit 6...4: Reservado, reposto a zero</span><span class="sxs-lookup"><span data-stu-id="5cfd3-560">Bit 6...4: Reserved, reset to zero</span></span><br /><span data-ttu-id="5cfd3-561">Bit 7: Direção, ignorada para pontos finais de controlo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-561">Bit 7: Direction, ignored for control endpoints</span></span><br /><span data-ttu-id="5cfd3-562">0 = OUT endpoint</span><span class="sxs-lookup"><span data-stu-id="5cfd3-562">0 = OUT endpoint</span></span><br /><span data-ttu-id="5cfd3-563">1 = ponto final</span><span class="sxs-lookup"><span data-stu-id="5cfd3-563">1 = IN endpoint</span></span> |
| <span data-ttu-id="5cfd3-564">3</span><span class="sxs-lookup"><span data-stu-id="5cfd3-564">3</span></span>      | <span data-ttu-id="5cfd3-565">bmAttributes</span><span class="sxs-lookup"><span data-stu-id="5cfd3-565">bmAttributes</span></span>     | <span data-ttu-id="5cfd3-566">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-566">1</span></span>    | <span data-ttu-id="5cfd3-567">Bitmap</span><span class="sxs-lookup"><span data-stu-id="5cfd3-567">Bitmap</span></span>   | <span data-ttu-id="5cfd3-568">Este campo descreve os atributos do ponto final quando é configurado usando o campo **bConfigurationValue.**</span><span class="sxs-lookup"><span data-stu-id="5cfd3-568">This field describes the endpoint's attributes when it is configured using the **bConfigurationValue** field.</span></span> <span data-ttu-id="5cfd3-569">Bits 1.0: Tipo de Transferência</span><span class="sxs-lookup"><span data-stu-id="5cfd3-569">Bits 1..0: Transfer Type</span></span><br /><span data-ttu-id="5cfd3-570">00 = Controlo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-570">00 = Control</span></span><br /><span data-ttu-id="5cfd3-571">01 = Isochronous</span><span class="sxs-lookup"><span data-stu-id="5cfd3-571">01 = Isochronous</span></span><br /><span data-ttu-id="5cfd3-572">10 = Granel</span><span class="sxs-lookup"><span data-stu-id="5cfd3-572">10 = Bulk</span></span><br /><span data-ttu-id="5cfd3-573">11 = Interromper</span><span class="sxs-lookup"><span data-stu-id="5cfd3-573">11 = Interrupt</span></span><br /><span data-ttu-id="5cfd3-574">Se não for um ponto final isocronous, os bits 5.2 estão reservados e devem ser definidos para zero.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-574">If not an isochronous endpoint, bits 5..2 are reserved and must be set to zero.</span></span> <span data-ttu-id="5cfd3-575">Se isocromous, são definidos da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-575">If isochronous, they are defined as follows:</span></span><br /><span data-ttu-id="5cfd3-576">Bits 3.2: Tipo de sincronização</span><span class="sxs-lookup"><span data-stu-id="5cfd3-576">Bits 3..2: Synchronization Type</span></span><br /><span data-ttu-id="5cfd3-577">00 = Sem Sincronização</span><span class="sxs-lookup"><span data-stu-id="5cfd3-577">00 = No Synchronization</span></span><br /><span data-ttu-id="5cfd3-578">01 = Assíncronos</span><span class="sxs-lookup"><span data-stu-id="5cfd3-578">01 = Asynchronous</span></span><br /><span data-ttu-id="5cfd3-579">10 = Adaptável</span><span class="sxs-lookup"><span data-stu-id="5cfd3-579">10 = Adaptive</span></span><br /><span data-ttu-id="5cfd3-580">11 = Sincronizado</span><span class="sxs-lookup"><span data-stu-id="5cfd3-580">11 = Synchronous</span></span><br /><span data-ttu-id="5cfd3-581">Bits 5.4: Tipo de utilização</span><span class="sxs-lookup"><span data-stu-id="5cfd3-581">Bits 5..4: Usage Type</span></span><br /><span data-ttu-id="5cfd3-582">00 = Ponto final de dados</span><span class="sxs-lookup"><span data-stu-id="5cfd3-582">00 = Data endpoint</span></span><br /><span data-ttu-id="5cfd3-583">01 = Ponto final de feedback</span><span class="sxs-lookup"><span data-stu-id="5cfd3-583">01 = Feedback endpoint</span></span><br /><span data-ttu-id="5cfd3-584">10 = Ponto final de dados de feedback implícito</span><span class="sxs-lookup"><span data-stu-id="5cfd3-584">10 = Implicit feedback data endpoint</span></span><br /><span data-ttu-id="5cfd3-585">11 = Reservado</span><span class="sxs-lookup"><span data-stu-id="5cfd3-585">11 = Reserved</span></span> |
| <span data-ttu-id="5cfd3-586">4</span><span class="sxs-lookup"><span data-stu-id="5cfd3-586">4</span></span>      | <span data-ttu-id="5cfd3-587">wMaxPacketSize</span><span class="sxs-lookup"><span data-stu-id="5cfd3-587">wMaxPacketSize</span></span>   | <span data-ttu-id="5cfd3-588">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-588">2</span></span>    | <span data-ttu-id="5cfd3-589">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-589">Number</span></span>   | <span data-ttu-id="5cfd3-590">O tamanho máximo do pacote este ponto final é capaz de enviar ou receber quando esta configuração é selecionada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-590">Maximum packet size this endpoint is capable of sending or receiving when this configuration is selected.</span></span><br /><span data-ttu-id="5cfd3-591">Para pontos finais isocronous, este valor é utilizado para reservar o tempo de autocarro no horário, necessário para as cargas de dados por fotogramas.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-591">For isochronous endpoints, this value is used to reserve the bus time in the schedule, required for the per-(micro)frame data payloads.</span></span> <span data-ttu-id="5cfd3-592">O tubo pode, numa base contínua, utilizar de facto menos largura de banda do que a reservada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-592">The pipe may, on an ongoing basis, actually use less bandwidth than that reserved.</span></span> <span data-ttu-id="5cfd3-593">O dispositivo informa, se necessário, a largura de banda real utilizada através dos seus mecanismos normais não USB definidos.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-593">The device reports, if necessary, the actual bandwidth used via its normal, non-USB defined mechanisms.</span></span><br /><span data-ttu-id="5cfd3-594">Para todos os pontos finais, os bits 10.0 especificam o tamanho máximo do pacote (em bytes).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-594">For all endpoints, bits 10..0 specify the maximum packet size (in bytes).</span></span><br /><span data-ttu-id="5cfd3-595">Para pontos finais isocronos e de alta velocidade:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-595">For high-speed isochronous and interrupt endpoints:</span></span><br /><span data-ttu-id="5cfd3-596">Bits 12..11 especificam o número de oportunidades de transação adicionais por micro-quadro: 00 = Nenhuma (1 transação por microframe)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-596">Bits 12..11 specify the number of additional transaction opportunities per microframe: 00 = None (1 transaction per microframe)</span></span><br /><span data-ttu-id="5cfd3-597">01 = 1 adicional (2 por microframe)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-597">01 = 1 additional (2 per microframe)</span></span><br /><span data-ttu-id="5cfd3-598">10 = 2 adicionais (3 por microframe)</span><span class="sxs-lookup"><span data-stu-id="5cfd3-598">10 = 2 additional (3 per microframe)</span></span><br /><span data-ttu-id="5cfd3-599">11 = Reservado</span><span class="sxs-lookup"><span data-stu-id="5cfd3-599">11 = Reserved</span></span><br /><span data-ttu-id="5cfd3-600">Os bits 15.13 estão reservados e devem ser definidos a zero.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-600">Bits 15..13 are reserved and must be set to zero.</span></span> |
| <span data-ttu-id="5cfd3-601">6</span><span class="sxs-lookup"><span data-stu-id="5cfd3-601">6</span></span>      | <span data-ttu-id="5cfd3-602">bInterval</span><span class="sxs-lookup"><span data-stu-id="5cfd3-602">bInterval</span></span>        | <span data-ttu-id="5cfd3-603">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-603">1</span></span>     | <span data-ttu-id="5cfd3-604">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-604">Number</span></span>   | <span data-ttu-id="5cfd3-605">Intervalo de número para o ponto final das sondagens para transferências de dados.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-605">Number interval for polling endpoint for data transfers.</span></span><br /><span data-ttu-id="5cfd3-606">Expressos em quadros ou micropartidos dependendo da velocidade de funcionamento do dispositivo (ou seja, 1 milissegundo ou 125 unidades de μs).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-606">Expressed in frames or microframes depending on the device operating speed (i.e., either 1 millisecond or 125 µs units).</span></span><br /><span data-ttu-id="5cfd3-607">Para os pontos finais isocronos de alta velocidade, este valor deve estar na faixa de 1 a 16.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-607">For full-/high-speed isochronous endpoints, this value must be in the range from 1 to 16.</span></span> <span data-ttu-id="5cfd3-608">O **bInterval** é utilizado como expoente para um valor 2bInterval-1; por exemplo, **bInterval** 4 significa um período de 8 (24-1).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-608">The **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span><br /><span data-ttu-id="5cfd3-609">Para pontos finais de interrupção a toda/baixa velocidade, o valor deste campo pode ser de 1 a 255.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-609">For full-/low-speed interrupt endpoints, the value of this field may be from 1 to 255.</span></span><br /><span data-ttu-id="5cfd3-610">Para pontos finais de interrupção de alta velocidade, o **bInterval** é usado como expoente para um valor 2bInterval-1; por exemplo, **bInterval** 4 significa um período de 8 (24-1).</span><span class="sxs-lookup"><span data-stu-id="5cfd3-610">For high-speed interrupt endpoints, the **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span> <span data-ttu-id="5cfd3-611">Este valor deve ser de 1 a 16.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-611">This value must be from 1 to 16.</span></span><br /><span data-ttu-id="5cfd3-612">Para pontos finais out a granel/controlo de alta velocidade, o **bInterval** especifica a taxa máxima de NAK do ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-612">For high-speed bulk/control OUT endpoints, the **bInterval** specify the maximum NAK rate of the endpoint.</span></span> <span data-ttu-id="5cfd3-613">Um valor de 0 indica que o ponto final nunca é NAKs.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-613">A value of 0 indicates the endpoint never NAKs.</span></span> <span data-ttu-id="5cfd3-614">Outros valores indicam, no máximo, um NAK cada **bInterval** de micropartidos.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-614">Other values indicate at most one NAK each **bInterval** of microframes.</span></span><br /><span data-ttu-id="5cfd3-615">Este valor deve estar entre 0 e 255.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-615">This value must be in the range from 0 to 255.</span></span> |

<span data-ttu-id="5cfd3-616">USBX define um descritor de ponto final USB da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-616">USBX defines a USB endpoint descriptor as follows:</span></span>

```c
typedef struct UX_ENDPOINT_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bEndpointAddress;
    UINT bmAttributes;
    USHORT wMaxPacketSize;
    UINT bInterval;
} UX_ENDPOINT_DESCRIPTOR;
```

<span data-ttu-id="5cfd3-617">O descritor de ponto final USB faz parte de um recipiente de ponto final, que é descrito da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-617">The USB endpoint descriptor is part of an endpoint container, which is described as follows.</span></span>

```c
typedef struct UX_ENDPOINT_STRUCT {
    ULONG    ux_endpoint_handle;
    ULONG    ux_endpoint_state;
    VOID    *ux_endpoint_ed;
    struct UX_ENDPOINT_DESCRIPTOR_STRUCT    ux_endpoint_descriptor;
    struct UX_ENDPOINT_STRUCT    *ux_endpoint_next_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_endpoint_interface;
    struct UX_DEVICE_STRUCT    *ux_endpoint_device;
    struct UX_TRANSFER REQUEST_STRUCT    ux_endpoint_transfer request;
} UX_ENDPOINT;

```

- <span data-ttu-id="5cfd3-618">**ux_endpoint_handle:** Manuseie o ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-618">**ux_endpoint_handle**: Handle of the endpoint.</span></span> <span data-ttu-id="5cfd3-619">Este é tipicamente o endereço da instância desta estrutura para o ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-619">This is typically the address of the instance of this structure for the endpoint.</span></span>
- <span data-ttu-id="5cfd3-620">**ux_endpoint_state:** Estado do ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-620">**ux_endpoint_state**: State of the endpoint.</span></span>
- <span data-ttu-id="5cfd3-621">**ux_endpoint_ed**: Ponte até ao ponto final físico na camada do controlador do anfitrião.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-621">**ux_endpoint_ed**: Pointer to the physical endpoint at the host controller layer.</span></span>
- <span data-ttu-id="5cfd3-622">**ux_endpoint_descriptor**: descritor de ponto final USB.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-622">**ux_endpoint_descriptor**: USB endpoint descriptor.</span></span>
- <span data-ttu-id="5cfd3-623">**ux_endpoint_next_endpoint**: Ponteiro para o próximo ponto final que pertence à mesma interface.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-623">**ux_endpoint_next_endpoint**: Pointer to the next endpoint that belongs to the same interface.</span></span>
- <span data-ttu-id="5cfd3-624">**ux_endpoint_interface**: Ponteiro para a interface que detém esta interface de ponto final.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-624">**ux_endpoint_interface**: Pointer to the interface that owns this endpoint interface.</span></span>
- <span data-ttu-id="5cfd3-625">**ux_endpoint_device:** Pontear para o recipiente do dispositivo principal.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-625">**ux_endpoint_device**: Pointer to the parent device container.</span></span>
- <span data-ttu-id="5cfd3-626">**ux_endpoint_transfer pedido:** pedido de transferência USB utilizado para enviar/receber dados de/para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-626">**ux_endpoint_transfer request**: USB transfer request used to send/receive data from to/from the device.</span></span>

### <a name="string-descriptors"></a><span data-ttu-id="5cfd3-627">Descritores de cordas</span><span class="sxs-lookup"><span data-stu-id="5cfd3-627">String descriptors</span></span>

<span data-ttu-id="5cfd3-628">Os descritores de cordas são opcionais.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-628">String descriptors are optional.</span></span> <span data-ttu-id="5cfd3-629">Se um dispositivo não suporta descritores de cordas, todas as referências aos descritores de cordas dentro do dispositivo, configuração e descritores de interface devem ser reiniciadas para zero.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-629">If a device does not support string descriptors, all references to string descriptors within device, configuration, and interface descriptors must be reset to zero.</span></span>

<span data-ttu-id="5cfd3-630">Os descritores de cordas utilizam codificação UNICODE, permitindo assim o suporte para vários conjuntos de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-630">String descriptors use UNICODE encoding, thus allowing the support for several character sets.</span></span> <span data-ttu-id="5cfd3-631">As cordas de um dispositivo USB podem suportar vários idiomas.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-631">The strings in a USB device may support multiple languages.</span></span> <span data-ttu-id="5cfd3-632">Ao solicitar um descritor de cordas, o solicitador especifica a língua desejada utilizando um ID de idioma definido pelo USB-IF.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-632">When requesting a string descriptor, the requester specifies the desired language using a language ID defined by the USB-IF.</span></span> <span data-ttu-id="5cfd3-633">A lista de LANGIDs USB atualmente definidos pode ser encontrada no apêndice USBX ??.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-633">The list of currently defined USB LANGIDs can be found in the USBX appendix ??.</span></span>
<span data-ttu-id="5cfd3-634">Índice de cadeia zero para todas as línguas devolve um descritor de cordas que contém uma matriz de códigos LANGID de dois bytes suportados pelo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-634">String index zero for all languages returns a string descriptor that contains an array of two-byte LANGID codes supported by the device.</span></span> <span data-ttu-id="5cfd3-635">Note-se que a cadeia UNICODE não está terminada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-635">It should be noted that the UNICODE string is not 0 terminated.</span></span> <span data-ttu-id="5cfd3-636">Em vez disso, o tamanho da matriz de cordas é calculado subtraindo dois do tamanho da matriz contida no primeiro byte do descritor.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-636">Instead, the size of the string array is computed by subtracting two from the size of the array contained in the first byte of the descriptor.</span></span>

<span data-ttu-id="5cfd3-637">O descritor de cordas USB 0 está codificado da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-637">The USB string descriptor 0 is encoded as follows.</span></span>

| <span data-ttu-id="5cfd3-638">Desvio</span><span class="sxs-lookup"><span data-stu-id="5cfd3-638">Offset</span></span> | <span data-ttu-id="5cfd3-639">Campo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-639">Field</span></span>           | <span data-ttu-id="5cfd3-640">Tamanho</span><span class="sxs-lookup"><span data-stu-id="5cfd3-640">Size</span></span> | <span data-ttu-id="5cfd3-641">Valor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-641">Value</span></span>    | <span data-ttu-id="5cfd3-642">Descrição</span><span class="sxs-lookup"><span data-stu-id="5cfd3-642">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="5cfd3-643">0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-643">0</span></span>      | <span data-ttu-id="5cfd3-644">bLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-644">bLength</span></span>         | <span data-ttu-id="5cfd3-645">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-645">1</span></span>    | <span data-ttu-id="5cfd3-646">N+2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-646">N+2</span></span>      | <span data-ttu-id="5cfd3-647">Tamanho deste descritor em bytes</span><span class="sxs-lookup"><span data-stu-id="5cfd3-647">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="5cfd3-648">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-648">1</span></span>      | <span data-ttu-id="5cfd3-649">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="5cfd3-649">bDescriptorType</span></span> | <span data-ttu-id="5cfd3-650">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-650">1</span></span>    | <span data-ttu-id="5cfd3-651">Constante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-651">Constant</span></span> | <span data-ttu-id="5cfd3-652">Tipo de descritor de cordas</span><span class="sxs-lookup"><span data-stu-id="5cfd3-652">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="5cfd3-653">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-653">2</span></span>      | <span data-ttu-id="5cfd3-654">wLANGID[0]</span><span class="sxs-lookup"><span data-stu-id="5cfd3-654">wLANGID[0]</span></span>      | <span data-ttu-id="5cfd3-655">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-655">2</span></span>    | <span data-ttu-id="5cfd3-656">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-656">Number</span></span>   | <span data-ttu-id="5cfd3-657">Código LANGID 0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-657">LANGID code 0</span></span>                    |
| <span data-ttu-id="5cfd3-658">...</span><span class="sxs-lookup"><span data-stu-id="5cfd3-658">...</span></span>    | <span data-ttu-id="5cfd3-659">...]</span><span class="sxs-lookup"><span data-stu-id="5cfd3-659">...]</span></span>            | <span data-ttu-id="5cfd3-660">...</span><span class="sxs-lookup"><span data-stu-id="5cfd3-660">...</span></span>  | <span data-ttu-id="5cfd3-661">...</span><span class="sxs-lookup"><span data-stu-id="5cfd3-661">...</span></span>      | <span data-ttu-id="5cfd3-662">...</span><span class="sxs-lookup"><span data-stu-id="5cfd3-662">...</span></span>                              |
| <span data-ttu-id="5cfd3-663">N</span><span class="sxs-lookup"><span data-stu-id="5cfd3-663">N</span></span>      | <span data-ttu-id="5cfd3-664">wLANGID[n]</span><span class="sxs-lookup"><span data-stu-id="5cfd3-664">wLANGID[n]</span></span>      | <span data-ttu-id="5cfd3-665">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-665">2</span></span>    | <span data-ttu-id="5cfd3-666">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-666">Number</span></span>   | <span data-ttu-id="5cfd3-667">Código LANGID n</span><span class="sxs-lookup"><span data-stu-id="5cfd3-667">LANGID code n</span></span>                    |

<span data-ttu-id="5cfd3-668">Outros descritores de cordas USB são codificados da seguinte forma.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-668">Other USB string descriptors are encoded as follows.</span></span>

| <span data-ttu-id="5cfd3-669">Desvio</span><span class="sxs-lookup"><span data-stu-id="5cfd3-669">Offset</span></span> | <span data-ttu-id="5cfd3-670">Campo</span><span class="sxs-lookup"><span data-stu-id="5cfd3-670">Field</span></span>           | <span data-ttu-id="5cfd3-671">Tamanho</span><span class="sxs-lookup"><span data-stu-id="5cfd3-671">Size</span></span> | <span data-ttu-id="5cfd3-672">Valor</span><span class="sxs-lookup"><span data-stu-id="5cfd3-672">Value</span></span>    | <span data-ttu-id="5cfd3-673">Descrição</span><span class="sxs-lookup"><span data-stu-id="5cfd3-673">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="5cfd3-674">0</span><span class="sxs-lookup"><span data-stu-id="5cfd3-674">0</span></span>      | <span data-ttu-id="5cfd3-675">bLength</span><span class="sxs-lookup"><span data-stu-id="5cfd3-675">bLength</span></span>         | <span data-ttu-id="5cfd3-676">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-676">1</span></span>    | <span data-ttu-id="5cfd3-677">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-677">Number</span></span>   | <span data-ttu-id="5cfd3-678">Tamanho deste descritor em bytes</span><span class="sxs-lookup"><span data-stu-id="5cfd3-678">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="5cfd3-679">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-679">1</span></span>      | <span data-ttu-id="5cfd3-680">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="5cfd3-680">bDescriptorType</span></span> | <span data-ttu-id="5cfd3-681">1</span><span class="sxs-lookup"><span data-stu-id="5cfd3-681">1</span></span>    | <span data-ttu-id="5cfd3-682">Constante</span><span class="sxs-lookup"><span data-stu-id="5cfd3-682">Constant</span></span> | <span data-ttu-id="5cfd3-683">Tipo de descritor de cordas</span><span class="sxs-lookup"><span data-stu-id="5cfd3-683">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="5cfd3-684">2</span><span class="sxs-lookup"><span data-stu-id="5cfd3-684">2</span></span>      | <span data-ttu-id="5cfd3-685">bString</span><span class="sxs-lookup"><span data-stu-id="5cfd3-685">bString</span></span>         | <span data-ttu-id="5cfd3-686">n</span><span class="sxs-lookup"><span data-stu-id="5cfd3-686">n</span></span>    | <span data-ttu-id="5cfd3-687">Número</span><span class="sxs-lookup"><span data-stu-id="5cfd3-687">Number</span></span>   | <span data-ttu-id="5cfd3-688">Cadeia codificada UNICODE</span><span class="sxs-lookup"><span data-stu-id="5cfd3-688">UNICODE encoded string</span></span>           |

<span data-ttu-id="5cfd3-689">USBX define um descritor de cordas USB de comprimento não zero da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="5cfd3-689">USBX defines a non-zero length USB string descriptor as follows:</span></span>

```c
typedef struct UX_STRING_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT bString[1];
} UX_STRING_DESCRIPTOR;
```

### <a name="functional-descriptors"></a><span data-ttu-id="5cfd3-690">Descritores funcionais</span><span class="sxs-lookup"><span data-stu-id="5cfd3-690">Functional Descriptors</span></span>

<span data-ttu-id="5cfd3-691">Os descritores funcionais também são conhecidos como descritores específicos da classe.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-691">Functional descriptors are also known as class-specific descriptors.</span></span> <span data-ttu-id="5cfd3-692">Normalmente usam as mesmas estruturas básicas que descritores genéricos e permitem que informações adicionais estejam disponíveis para a classe.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-692">They normally use the same basic structures as generic descriptors and allow for additional information to be available to the class.</span></span> <span data-ttu-id="5cfd3-693">Por exemplo, no caso do altifalante de áudio USB, os descritores específicos da classe permitem que a classe de áudio recupere para cada definição alternativa o tipo de frequência de áudio suportada.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-693">For example, in the case of the USB audio speaker, class specific descriptors allow the audio class to retrieve for each alternate setting the type of audio frequency supported.</span></span>

### <a name="usbx-device-descriptor-framework-in-memory"></a><span data-ttu-id="5cfd3-694">Quadro de descritor de dispositivo USBX na memória</span><span class="sxs-lookup"><span data-stu-id="5cfd3-694">USBX Device Descriptor Framework in Memory</span></span>

<span data-ttu-id="5cfd3-695">USBX mantém a maioria dos descritores de dispositivos na memória, isto é, todos os descritores, exceto os descritores de cadeia e funcional.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-695">USBX maintains most device descriptors in memory, that is, all descriptors except the string and functional descriptors.</span></span> <span data-ttu-id="5cfd3-696">O diagrama seguinte mostra como estes descritores são armazenados e relacionados.</span><span class="sxs-lookup"><span data-stu-id="5cfd3-696">The following diagram shows how these descriptors are stored and related.</span></span>

![Quadro de descritor de dispositivo USBX na memória](./media/usbx-host-stack/usbx-device-descriptor-framework.png)
