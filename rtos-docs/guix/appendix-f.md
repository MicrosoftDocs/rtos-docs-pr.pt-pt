---
title: Apêndice F - SERVIÇOS DE Encadernação RTOS GUIX
description: Saiba mais sobre os serviços de encadernação DO GUIX RTOS.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1d94dbb9d7d53ec3e1900188142974cc981dfea9
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/22/2021
ms.locfileid: "104827271"
---
# <a name="appendix-f---guix-rtos-binding-services"></a><span data-ttu-id="18b5f-103">Apêndice F - SERVIÇOS DE Encadernação RTOS GUIX</span><span class="sxs-lookup"><span data-stu-id="18b5f-103">Appendix F - GUIX RTOS Binding Services</span></span>

<span data-ttu-id="18b5f-104">O GUIX requer serviços de thread ou tasking, mutex, fila de eventos e serviços de cronometragem prestados pelo RTOS subjacente.</span><span class="sxs-lookup"><span data-stu-id="18b5f-104">GUIX requires thread or tasking services, mutex, event queue, and timing services providing by the underlying RTOS.</span></span> <span data-ttu-id="18b5f-105">Por predefinição, o GUIX está configurado para utilizar o sistema operativo ThreadX em tempo real para fornecer estes serviços.</span><span class="sxs-lookup"><span data-stu-id="18b5f-105">By default GUIX is configured to utilize the ThreadX real time operating system to provide these services.</span></span> <span data-ttu-id="18b5f-106">Para colocar o GUIX noutro sistema operativo, o desenvolvedor deve # definir a diretiva pré-processador GX_DISABLE_THREADX_BINDING e reconstruir a biblioteca GUIX para remover as dependências do ThreadX.</span><span class="sxs-lookup"><span data-stu-id="18b5f-106">To port GUIX to another operating system, the developer should # define the pre-processor directive GX_DISABLE_THREADX_BINDING and rebuild the GUIX library to remove the ThreadX dependencies.</span></span> <span data-ttu-id="18b5f-107">Além disso, o desenvolvedor terá de fornecer as seguintes definições macro e funções de suporte.</span><span class="sxs-lookup"><span data-stu-id="18b5f-107">In addition, the developer will need to provide the following macro definitions and supporting functions.</span></span> <span data-ttu-id="18b5f-108">Exemplos destas definições macro e funções de suporte podem ser encontrados nos ficheiros gx_system_rtos_bind.h e gx_system_rtos_bind.c, que fornecem um exemplo de integração genérica de rtos.</span><span class="sxs-lookup"><span data-stu-id="18b5f-108">Examples of these macro definitions and supporting functions can be found in the files gx_system_rtos_bind.h and gx_system_rtos_bind.c, which provide an example generic rtos integration.</span></span>

<span data-ttu-id="18b5f-109">Macros de Integração do Sistema:</span><span class="sxs-lookup"><span data-stu-id="18b5f-109">System Integration macros:</span></span>

<span data-ttu-id="18b5f-110">**GX_RTOS_BINDING_INITIALIZE**</span><span class="sxs-lookup"><span data-stu-id="18b5f-110">**GX_RTOS_BINDING_INITIALIZE**</span></span>

<span data-ttu-id="18b5f-111">Esta macro é invocada durante a inicialização do sistema.</span><span class="sxs-lookup"><span data-stu-id="18b5f-111">This macro is invoked during system initialization.</span></span> <span data-ttu-id="18b5f-112">O macro deve ser definido para chamar qualquer função necessária para preparar os seus serviços de sistema rtos ou recursos rtos antes da utilização.</span><span class="sxs-lookup"><span data-stu-id="18b5f-112">The macro should be defined to call any function needed to prepare your rtos system services or rtos resources prior to use.</span></span> <span data-ttu-id="18b5f-113">Esta é a oportunidade da encadernação para preparar os recursos rtos que o GUIX irá utilizar.</span><span class="sxs-lookup"><span data-stu-id="18b5f-113">This is the binding’s opportunity to prepare the rtos resources that GUIX will use.</span></span>

<span data-ttu-id="18b5f-114">**GX_SYSTEM_THREAD_START**</span><span class="sxs-lookup"><span data-stu-id="18b5f-114">**GX_SYSTEM_THREAD_START**</span></span>

<span data-ttu-id="18b5f-115">Esta macro é invocada quando a tarefa ou fio GUIX deve começar a executar.</span><span class="sxs-lookup"><span data-stu-id="18b5f-115">This macro is invoked when the GUIX task or thread should start executing.</span></span> <span data-ttu-id="18b5f-116">Este macro deve ser definido para chamar uma função que iniciará o fio GUIX em funcionamento.</span><span class="sxs-lookup"><span data-stu-id="18b5f-116">This macro should be defined to call a function which will start the GUIX thread running.</span></span> <span data-ttu-id="18b5f-117">O ponto de entrada do fio GUIX é passado para a função chamada.</span><span class="sxs-lookup"><span data-stu-id="18b5f-117">The entry point to the GUIX thread is passed to the called function.</span></span> <span data-ttu-id="18b5f-118">A assinatura da chamada função deve ser</span><span class="sxs-lookup"><span data-stu-id="18b5f-118">The signature of the called function must be</span></span>

<span data-ttu-id="18b5f-119">**function_name *UINT*(VOID (thread_entry_point)(VOID));**</span><span class="sxs-lookup"><span data-stu-id="18b5f-119">**UINT *function_name*(VOID (thread_entry_point)(VOID));**</span></span>

<span data-ttu-id="18b5f-120">Esta função deve voltar GX_SUCCESS se o fio for iniciado com sucesso ou GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="18b5f-120">This function should return GX_SUCCESS if the thread is successfully started, or GX_FAILURE.</span></span>

<span data-ttu-id="18b5f-121">**GX_EVENT_PUSH**</span><span class="sxs-lookup"><span data-stu-id="18b5f-121">**GX_EVENT_PUSH**</span></span>

<span data-ttu-id="18b5f-122">Esta macro é invocada para empurrar um evento para a fila de eventos FIFO usada pelo GUIX.</span><span class="sxs-lookup"><span data-stu-id="18b5f-122">This macro is invoked to push an event into the FIFO event queue used by GUIX.</span></span> <span data-ttu-id="18b5f-123">Ao apresentar um novo rtos, é da sua responsabilidade implementar esta fila de eventos de forma segura.</span><span class="sxs-lookup"><span data-stu-id="18b5f-123">When porting to a new rtos, it is your responsibility to implement this event queue in a thread-safe manner.</span></span> <span data-ttu-id="18b5f-124">GX_EVENT estruturas devem ser copiadas para esta fila e copiadas para fora desta fila, ou seja, uma fila de ponteiros GX_EVENT não funcionará, uma vez que os eventos GUIX podem ser variáveis automáticas do ponto de vista do produtor do evento.</span><span class="sxs-lookup"><span data-stu-id="18b5f-124">GX_EVENT structures must be copied into this queue and copied out of this queue, i.e. a queue of GX_EVENT pointers will not work, since GUIX events can be automatic variables from the view of the event producer.</span></span> <span data-ttu-id="18b5f-125">A assinatura da função chamada por esta macro deve ser:</span><span class="sxs-lookup"><span data-stu-id="18b5f-125">The signature of the function called by this macro must be:</span></span>

<span data-ttu-id="18b5f-126">\**UINT *function_name* (event_ptr *GX_EVENT);**</span><span class="sxs-lookup"><span data-stu-id="18b5f-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span></span>

<span data-ttu-id="18b5f-127">Esta função deve voltar GX_SUCCESS se o evento for empurrado para a fila do evento, caso contrário deverá voltar GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="18b5f-127">This function should return GX_SUCCESS if the event is pushed into the event queue, otherwise it should return GX_FAILURE.</span></span>

<span data-ttu-id="18b5f-128">**GX_EVENT_POP**</span><span class="sxs-lookup"><span data-stu-id="18b5f-128">**GX_EVENT_POP**</span></span>

<span data-ttu-id="18b5f-129">Esta macro é invocada para remover o evento da cabeça (mais antiga) da fila do evento GUIX e copiá-lo para o local solicitado.</span><span class="sxs-lookup"><span data-stu-id="18b5f-129">This macro is invoked to remove the head (oldest) event from the GUIX event queue and copy it into the requested location.</span></span> <span data-ttu-id="18b5f-130">Esta função deve ser capaz de bloquear opcionalmente ou esperar por um evento se não houver eventos na fila do evento.</span><span class="sxs-lookup"><span data-stu-id="18b5f-130">This function must be able to optionally block or wait for an event if no events are currently in the event queue.</span></span> <span data-ttu-id="18b5f-131">A assinatura da função invocada por esta macro deve ser</span><span class="sxs-lookup"><span data-stu-id="18b5f-131">The signature of the function invoked by this macro must be</span></span>

<span data-ttu-id="18b5f-132">UINT function_name(GX_EVENT \*put_event, GX_BOOL espera)</span><span class="sxs-lookup"><span data-stu-id="18b5f-132">UINT function_name(GX_EVENT \*put_event, GX_BOOL wait)</span></span>

<span data-ttu-id="18b5f-133">Se o parâmetro de espera == GX_TRUE, a função não deve voltar até que um evento seja fornecido.</span><span class="sxs-lookup"><span data-stu-id="18b5f-133">If the wait parameter == GX_TRUE, the function should not return until an event is provided.</span></span> <span data-ttu-id="18b5f-134">Se o parâmetro de espera for GX_FALSE, a função deve regressar imediatamente com ou sem evento.</span><span class="sxs-lookup"><span data-stu-id="18b5f-134">If the wait parameter is GX_FALSE, the function should return immediately with or without an event.</span></span>

<span data-ttu-id="18b5f-135">Se um evento for recuperado da fila, deve ser copiado para o local put_event e o estado de retorno é GX_SUCCESS.</span><span class="sxs-lookup"><span data-stu-id="18b5f-135">If an event is retrieved from the queue, it should copied into the put_event location and the return status is GX_SUCCESS.</span></span> <span data-ttu-id="18b5f-136">Caso contrário, o estado de devolução deve ser GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="18b5f-136">Otherwise the return status should be GX_FAILURE.</span></span>

<span data-ttu-id="18b5f-137">**GX_EVENT_FOLD**</span><span class="sxs-lookup"><span data-stu-id="18b5f-137">**GX_EVENT_FOLD**</span></span>

<span data-ttu-id="18b5f-138">Esta macro é invocada pelo GUIX para dobrar um evento na fila do evento FIFO.</span><span class="sxs-lookup"><span data-stu-id="18b5f-138">This macro is invoked by GUIX to fold an event into the FIFO event queue.</span></span> <span data-ttu-id="18b5f-139">Dobrar um evento significa que se um evento do mesmo tipo já existe na fila, essa entrada é atualizada para conter a carga útil do novo evento.</span><span class="sxs-lookup"><span data-stu-id="18b5f-139">Folding an event means that if an event of the same type already exists in the queue, that entry is update to contain the payload of the new event.</span></span> <span data-ttu-id="18b5f-140">Se um evento existente do mesmo tipo não for encontrado na fila, um novo evento é empurrado para a fila.</span><span class="sxs-lookup"><span data-stu-id="18b5f-140">If an existing event of the same type is not found in the queue, a new event is pushed into the queue.</span></span> 

<span data-ttu-id="18b5f-141">Para encadernações que não podem implementar a função de dobra do evento, é aceitável simplesmente invocar o GX_EVENT_PUSH.</span><span class="sxs-lookup"><span data-stu-id="18b5f-141">For bindings that cannot implement the event fold feature, it is acceptable to simply invoke the GX_EVENT_PUSH.</span></span>

<span data-ttu-id="18b5f-142">**GX_TIMER_START**</span><span class="sxs-lookup"><span data-stu-id="18b5f-142">**GX_TIMER_START**</span></span>

<span data-ttu-id="18b5f-143">Esta macro é invocada quando o GUIX precisa de receber entrada de temporizador periódico.</span><span class="sxs-lookup"><span data-stu-id="18b5f-143">This macro is invoked when GUIX needs to receive periodic timer input.</span></span> <span data-ttu-id="18b5f-144">Esta macro deve invocar um serviço que inicie o serviço de temporizador periódico RTOS de baixo nível.</span><span class="sxs-lookup"><span data-stu-id="18b5f-144">This macro should invoke a service that starts the low-level RTOS periodic timer service.</span></span> <span data-ttu-id="18b5f-145">Se o serviço de temporizador RTOS não puder ser facilmente interrompido e iniciado, é aceitável, mas menos eficiente, deixar este serviço sempre em funcionamento.</span><span class="sxs-lookup"><span data-stu-id="18b5f-145">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times.</span></span>

<span data-ttu-id="18b5f-146">Quando o serviço de temporizador RTOS de baixo nível expirar periodicamente, a ligação deve chamar a função do sistema GUIX _gx_system_timer_expiration(0); Chamar esta função periodicamente é o que impulsiona os serviços de temporizador de temporizador GUIX de alto nível.</span><span class="sxs-lookup"><span data-stu-id="18b5f-146">When the low-level RTOS timer service periodically expires, the binding must call the GUIX system function _gx_system_timer_expiration(0); Calling this function periodically is what drives the high-level GUIX timer widget timer services.</span></span>

<span data-ttu-id="18b5f-147">**GX_TIMER_STOP**</span><span class="sxs-lookup"><span data-stu-id="18b5f-147">**GX_TIMER_STOP**</span></span>

<span data-ttu-id="18b5f-148">Esta macro é invocada quando o GUIX já não necessita de um temporizador periódico (ou seja, não existem temporizadores GUIX ativos em funcionamento).</span><span class="sxs-lookup"><span data-stu-id="18b5f-148">This macro is invoked when GUIX no longer needs a periodic timer (i.e. there are no active GUIX timers running).</span></span> <span data-ttu-id="18b5f-149">Se o serviço de temporizador RTOS não puder ser facilmente interrompido e iniciado, é aceitável, mas menos eficiente, deixar este serviço em funcionamento e definir este macro para não fazer nada.</span><span class="sxs-lookup"><span data-stu-id="18b5f-149">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times and define this macro to do nothing.</span></span>

<span data-ttu-id="18b5f-150">**GX_SYSTEM_MUTEX_LOCK**</span><span class="sxs-lookup"><span data-stu-id="18b5f-150">**GX_SYSTEM_MUTEX_LOCK**</span></span>

<span data-ttu-id="18b5f-151">Esta macro é invocada pelo GUIX durante secções de código críticas para evitar que outra tarefa impeça e modifique estruturas de dados comuns, potencialmente causando corrupção.</span><span class="sxs-lookup"><span data-stu-id="18b5f-151">This macro is invoked by GUIX during critical code sections to prevent another task from  pre-empting and modifying common data structures, potentially causing corruption.</span></span> <span data-ttu-id="18b5f-152">Esta macro deve chamar uma função que implementa o serviço adequado de bloqueio de recursos RTOS.</span><span class="sxs-lookup"><span data-stu-id="18b5f-152">This macro should call a function that implements the suitable RTOS resource locking service.</span></span>

<span data-ttu-id="18b5f-153">Se nunca utilizar quaisquer serviços de API GUIX fora da linha GUIX, pode definir esta macro para não fazer nada.</span><span class="sxs-lookup"><span data-stu-id="18b5f-153">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="18b5f-154">**GX_SYSTEM_MUTEX_UNLOCK**</span><span class="sxs-lookup"><span data-stu-id="18b5f-154">**GX_SYSTEM_MUTEX_UNLOCK**</span></span>

<span data-ttu-id="18b5f-155">Esta macro é invocada no final das secções de código crítico, e deve desbloquear o recurso GUIX utilizando o serviço RTOS subjacente adequado.</span><span class="sxs-lookup"><span data-stu-id="18b5f-155">This macro is invoked at the end of critical code sections, and should unlock the GUIX resource using the suitable underlying RTOS service.</span></span> <span data-ttu-id="18b5f-156">Se nunca utilizar quaisquer serviços de API GUIX fora da linha GUIX, pode definir esta macro para não fazer nada.</span><span class="sxs-lookup"><span data-stu-id="18b5f-156">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="18b5f-157">**GX_SYSTEM_TIME_GET**</span><span class="sxs-lookup"><span data-stu-id="18b5f-157">**GX_SYSTEM_TIME_GET**</span></span>

<span data-ttu-id="18b5f-158">Este macro deve chamar uma função que devolve o tempo atual do sistema é "ticks do sistema", que é geralmente o número de interrupções de temporizador de baixo nível que ocorreram desde o arranque do sistema.</span><span class="sxs-lookup"><span data-stu-id="18b5f-158">This macro should call a function that returns the current system time is “system ticks”, which is usually the number of low-level timer interrupts that have occurred since system startup.</span></span> <span data-ttu-id="18b5f-159">Este serviço é utilizado para calcular a velocidade da caneta touch event para gestos de entrada de toque.</span><span class="sxs-lookup"><span data-stu-id="18b5f-159">This service is used to calculate touch event pen speed for touch input gestures.</span></span> <span data-ttu-id="18b5f-160">A assinatura da função invocada por esta macro deve ser:</span><span class="sxs-lookup"><span data-stu-id="18b5f-160">The signature of the function invoked by this macro must be:</span></span>

<span data-ttu-id="18b5f-161">**function_name *ULONG*(VOID);**</span><span class="sxs-lookup"><span data-stu-id="18b5f-161">**ULONG *function_name*(VOID);**</span></span>

<span data-ttu-id="18b5f-162">**GX_CURRENT_THREAD**</span><span class="sxs-lookup"><span data-stu-id="18b5f-162">**GX_CURRENT_THREAD**</span></span>

<span data-ttu-id="18b5f-163">Esta macro é invocada para identificar o fio atualmente executado.</span><span class="sxs-lookup"><span data-stu-id="18b5f-163">This macro is invoked to identify the currently executing thread.</span></span> <span data-ttu-id="18b5f-164">O serviço chamado por esta macro deve devolver um vazio \*, o que significa que o tipo de dados utilizado pelo seu sistema operativo para identificar o fio de execução atual deve ser lançado para um vazio \* para ser devolvido ao GUX.</span><span class="sxs-lookup"><span data-stu-id="18b5f-164">The service called by this macro must return a void \*, meaning that the data type used by your operating system to identify the current execution thread must be cast to a void \* to be returned to GUX.</span></span>

<span data-ttu-id="18b5f-165">Um exemplo completo de uma ligação genérica de RTOS é implementado no gx_system_rtos_bind.h e gx_system_rtos_bind.c</span><span class="sxs-lookup"><span data-stu-id="18b5f-165">A complete example of a generic RTOS binding is implemented in the filed gx_system_rtos_bind.h and gx_system_rtos_bind.c</span></span>